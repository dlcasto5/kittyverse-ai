const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/legal-CrG-l4iq.js","assets/vendor-CbEAU8Mu.js","assets/lodash-CbCywYXj.js","assets/common-_oQXLTLN.js","assets/gpt-token-Ba_r2oKT.js","assets/build.umd-CtN2yqbk.js"])))=>i.map(i=>d[i]);
var Iu=Object.defineProperty;var Pu=(t,s,n)=>s in t?Iu(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n;var er=(t,s,n)=>Pu(t,typeof s!="symbol"?s+"":s,n);import{l as Q,cQ as Ru,cR as Ou,cS as ku,cT as Lu,cU as Mu,cV as Du,ag as Uu,cW as Vo,cX as Fu,cY as Ho,cZ as $o,c_ as Bu,a6 as Je,r,p as e,L as S,am as K,c$ as Gu,d0 as Vu,bN as gt,d1 as Hu,d2 as Da,m as he,au as Ps,a8 as Ie,n as fs,bA as Ft,bR as ps,d3 as Sn,bT as ds,a9 as zo,_ as te,b0 as Xi,$ as Se,b5 as Wo,B as gn,b4 as it,s as Ds,d4 as Rl,av as is,aw as Ts,b6 as Di,bt as oe,u as _r,aJ as bt,cO as Dr,cP as Ua,d5 as Zi,co as Yo,ab as vs,d6 as Ko,cl as ct,cm as qo,cn as Jo,d7 as Qo,an as Mt,d8 as $u,d9 as zu,bL as hn,da as mr,c9 as gr,cb as Wu,c6 as Ur,a5 as wt,aE as $e,db as sr,H as Zs,ax as wn,cy as Va,dc as Xo,dd as Qs,de as Bt,bX as Zt,bY as ea,df as Zo,b_ as sa,c0 as Et,dg as el,dh as ec,P as L,di as Yu,dj as Ol,W as es,dk as sl,cg as Ku,I as Ks,cc as tl,ad as Ui,bz as Fr,bs as Cs,dl as qu,dm as Ju,dn as Qu,dp as Xu,J as ue,bj as Zu,dq as eh,dr as sh,ds as th,dt as ah,du as nh,c7 as Kt,cK as rh,cL as ih,bQ as lh,cN as oh,dv as ch,dw as li,A as Ss,dx as dh,aB as as,dy as uh,dz as sc,a$ as Yt,dA as tc,F as Re,dB as hh,M as En,dC as ac,N as ua,dD as xh,dE as nc,dF as rc,dG as ic,dH as qt,dI as lc,dJ as oc,ao as cc,G as ph,dK as Fi,aC as fn,dL as vr,dM as mh,bh as dc,bg as gh,dN as fh,dO as Sa,dP as Lt,dQ as jh,aD as bh,dR as yh,dS as _h,dT as vh,cp as uc,bZ as Nh,b$ as jn,ci as hc,bW as xn,aa as Ch,a1 as An,a2 as ft,X as al,Y as Fa,ap as He,dU as Ct,dV as kl,dW as Sh,dX as Bs,z as Ls,dY as xc,dZ as Br,d_ as pc,d$ as mc,e0 as gc,e1 as fc,cf as jc,e2 as Tn,af as Ha,e3 as Gr,e4 as Vr,e5 as nl,ai as $a,aj as Ys,ak as Ba,al as ha,aK as bc,e6 as wh,e7 as Eh,e8 as oi,e9 as ci,ea as Ah,eb as di,ec as Th,O as xa,ed as Ih,aF as Ph,aG as Rh,aH as Oh,ee as kh,c3 as Lh,at as Mh,ef as bn,eg as Dh,U as Uh,eh as Fh,ei as yc,ej as Bh,ek as Gh,el as Vh,em as Hh,en as $h,eo as zh,ep as Wh,eq as Yh,er as Kh,es as qh,as as Jh,et as Qh,eu as tr,ev as Xh,ew as Zh,ex,bU as _c,ey as sx,ez as tx,t as ax,cz as vc,cA as Nc,cD as Cc,cB as Sc,cC as wc,cG as Ec,eA as nx,eB as rx,eC as ix,eD as lx,bE as ox,eE as cx,b1 as dx,eF as ui,bD as ux,bF as hx,bG as xx,w as pn,eG as px,eH as mx,eI as Ll,c5 as gx,bv as Ml,eJ as Dl,eK as Ac,eL as fx,eM as jx,eN as In,eO as bx,eP as yx,eQ as _x,eR as vx,eS as Nx,eT as Cx}from"./vendor-CbEAU8Mu.js";import{I as Is,J as Sx,G as rl,s as wx,g as Hr,j as Nr,l as Ex,n as Ax,a as Tx,w as Ix,b as Px,c as il,d as Tc,r as Rx,u as ta,e as za,f as Ic,R as _,S as U,T as l,h as Ox,i as wa,k as Pc,m as kx,o as Ee,D as Ut,p as Ms,q as le,M as Ue,C,N as Gt,t as q,v as _s,x as Rc,W as jt,y as Pn,z as Lx,A as gs,B as Oc,F as Pa,E as kc,H as yn,K as Lc,L as _n,O as Mc,P as ll,Q as ot,U as aa,V as Rn,X as Oe,Y as Mx,Z as Ae,_ as Dx,$ as hi,a0 as Xs,a1 as Ul,a2 as ol,a3 as Ux,a4 as Fx,a5 as xi,a6 as cl,a7 as Bx,a8 as ms,a9 as Jt,aa as Qt,ab as $r,ac as Dc,ad as zr,ae as Bi,af as Qe,ag as Wr,ah as na,ai as dl,aj as Gx,ak as pa,al as xs,am as Uc,an as Fc,ao as Bc,ap as Gi,aq as Gc,ar as ul,as as Vc,at as cs,au as Os,av as Vx,aw as Cr,ax as Hc,ay as lt,az as Ea,aA as $c,aB as zc,aC as Ra,aD as ks,aE as Sr,aF as wr,aG as Er,aH as Ar,aI as Wc,aJ as rs,aK as Yc,aL as be,aM as Tr,aN as hl,aO as ma,aP as Kc,aQ as qc,aR as Jc,aS as xl,aT as Qc,aU as Ir,aV as Xc,aW as Zc,aX as ed,aY as sd,aZ as td,a_ as ad,a$ as Vi,b0 as Hx,b1 as $x,b2 as zx,b3 as Wx,b4 as ws,b5 as Ze,b6 as mt,b7 as Ws,b8 as nd,b9 as Xt,ba as Pr,bb as rd,bc as id,bd as Ns,be as ld,bf as rn,bg as On,bh as Fl,bi as od,bj as St,bk as ar,bl as Yx,bm as cd,bn as Kx,bo as nr,bp as Aa,bq as qx,br as pi,bs as Bl,bt as mn,bu as Jx,bv as Qx,bw as Xx,bx as Zx,by as Yr,bz as dd,bA as ud,bB as hd,bC as ep,bD as sp,bE as Gl,bF as tp,bG as fr,bH as pl,bI as xd,bJ as Kr,bK as ap,bL as pd,bM as Wa,bN as ts,bO as np,bP as rp,bQ as Vl,bR as ip,bS as lp,bT as op,bU as ln,bV as kn,bW as md,bX as mi,bY as cp,bZ as dp,b_ as up,b$ as Hl,c0 as Hi,c1 as Ln,c2 as $i,c3 as jr,c4 as ml,c5 as vn,c6 as hp,c7 as gi,c8 as fi,c9 as ji,ca as xp,cb as zi,cc as gd,cd as pp,ce as mp,cf as Wi,cg as fd,ch as gp,ci as fp,cj as jp,ck as jd,cl as bd,cm as bp,cn as Nn,co as gl,cp as $l,cq as Cn,cr as zl,cs as Wl,ct as Yl,cu as Kl,cv as yp,cw as As,cx as Rr,cy as Oa,cz as yd,cA as _d,cB as Or,cC as vd,cD as Dt,cE as Nd,cF as ka,cG as Ga,cH as La,cI as Cd,cJ as Sd,cK as _p,cL as ql,cM as bi,cN as yi,cO as _i,cP as oa,cQ as vp,cR as wd,cS as Np,cT as Cp,cU as Sp,cV as wp,cW as Ed,cX as Ad,cY as Jl,cZ as vi,c_ as Td,c$ as Ep,d0 as kr,d1 as Lr,d2 as Id,d3 as Ap,d4 as Tp,d5 as Ip,d6 as Pp,d7 as Rp,d8 as Op,d9 as Mr,da as Pd,db as Rd,dc as Od,dd as Ql,de as kp,df as Lp,dg as Mp,dh as Dp,di as Up,dj as Fp,dk as Bp,dl as Gp,dm as Yi,dn as kd,dp as Ld,dq as Md,dr as se,ds as on,dt as Vp,du as Hp,dv as $p,dw as zp,dx as Xl}from"./common-_oQXLTLN.js";/* empty css                  */import"./lodash-CbCywYXj.js";import"./gpt-token-Ba_r2oKT.js";function Rj(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}window.mainJSLoaded=!1;var Zl={VITE_KINDE_CLIENT_ID:"fb5754f42ee84f4787f9bd8ff49cac7a",VITE_KINDE_DOMAIN:"https://gamma.kinde.com"};class Wp{constructor(){er(this,"kindeClient")}async getToken(){if(JSON.parse(await Q.getItem(Is))||!1){const n=sessionStorage.getItem(Sx);return Promise.resolve(n)}else return this.kindeClient||(this.kindeClient=await Ru({client_id:Zl.VITE_KINDE_CLIENT_ID,domain:Zl.VITE_KINDE_DOMAIN,redirect_uri:window.location.origin})),this.kindeClient.getToken()}getGuestUserId(){return localStorage.getItem(rl)}}class Yp{constructor(s,n){er(this,"analytics");er(this,"remoteConfig");this.analytics=s,this.remoteConfig=n}async setUserProperties(s){Ou(this.analytics,s)}async getRemoteConfigValue(s="bannerConfig"){return await ku(this.remoteConfig),Lu(this.remoteConfig,s).asString()||JSON.stringify([])}logEvent(s,n){Mu(this.analytics,s,n)}}class Kp{constructor(){}async setUserProperties(s){}async getRemoteConfigValue(s="bannerConfig"){return JSON.stringify([])}async logEvent(s,n){}}const qp=(()=>{let t=null;const s=()=>!1,n=()=>!1,a=async()=>!1,d=async()=>!1,o=async()=>!1,i=async(u,m)=>!1,c=async u=>!1;return{getIsInitialized:s,getIsLogin:n,initialize:a,login:d,logout:o,addTag:i,addTags:c,getInstance:()=>(t||(t={getIsInitialized:s,getIsLogin:n,initialize:a,login:d,logout:o,addTag:i,addTags:c}),t)}})();var Dd={VITE_API_URL:"https://4mpanjbsf6.execute-api.us-east-1.amazonaws.com",VITE_LOCALHOST_AS_DOMAIN:"spicychat.ai"};const Jp=t=>s=>async n=>{var d;n=s(n);const a=t.getState();return(d=Vo)!=null&&d.match(n)&&(Nr.setGuestUserId(a.userInfo.guestUserId),Q.setGuestUserId(a.userInfo.guestUserId),Ex.setGuestUserId(a.userInfo.guestUserId),localStorage.setItem(rl,a.userInfo.guestUserId)),Ho.match(n)&&Nr.setExternalUserId(a.userInfo.externalUserId),n},Ud=[Jp];window.LogRocket&&window.LogRocket.reduxMiddleware&&Ud.push(window.LogRocket.reduxMiddleware());wx(Dd.VITE_LOCALHOST_AS_DOMAIN);const Wt=Hr(window.location.hostname),Fd=Du(new Wp,localStorage,{getCookie:()=>""},{settings:Px,waitingQueue:Ix,navigation:Tx,notification:Ax},Ud,Nr,void 0,void 0,Wt!=null&&Wt.isPartner?new Kp:new Yp(Tc,Rx),Wt!=null&&Wt.isPartner?qp:il);let Ki=localStorage.getItem(rl);Ki||(Ki=Uu());Fd.dispatch(Vo(Ki));Fu(Dd.VITE_API_URL);$o(Wt.applicationId);Nr.setApplicationId(Wt.applicationId);const Ni=()=>{let t=Bu();const s=ta(),n=Je(),[a,d]=r.useState(!1);function o(){const m=new Date().getTime();let j=new URL(window.location.href);j.searchParams.set("cacheBust",m),window.location.href=j.href}const i=()=>{n("/")};r.useEffect(()=>{navigator.onLine||s(za(Ic)),console.error(t)},[t,s]);const c=()=>navigator.onLine?t&&t.message&&t.message.startsWith("LazyLoadError")?"A new version of the website is available. Reload to get latest version.":"Uh oh, something went wrong 😩":"It looks like you're offline. Check your internet connection and try again.",u=async()=>{try{await navigator.clipboard.writeText("".concat(window.location.href," ( ").concat(t==null?void 0:t.message," )")),d(!0),setTimeout(()=>{d(!1)},2e3)}catch(m){console.error(m)}};return e.jsxs("div",{className:"p-4 px-8",children:[e.jsx("h1",{children:c()}),e.jsx(S,{y:2}),e.jsxs(_,{className:"gap-3",children:[e.jsx(U,{variant:"bordered",color:"transparent",onClick:o,children:"Click here to reload the app"}),e.jsx(U,{variant:"secondary",color:"primary_strong",onClick:i,children:"Go Back"})]}),e.jsx(S,{y:6}),e.jsxs(l,{variant:"xs",type:"neutral",children:["Debug Information to share with ",e.jsx(K,{to:"https://docs.spicychat.ai/support",target:"_blank",className:"underline","aria-label":"support",children:"support"})," :",e.jsx("br",{}),e.jsx("br",{}),window.location.href," ( ",t==null?void 0:t.message," )"]})," ",a?e.jsx(Gu,{className:"text-gray-800 relative top-[3px] left-1"}):e.jsx(Vu,{className:"cursor-pointer text-gray-500 hover:text-gray-800 relative top-[3px] left-1",size:15,onClick:u})]})},Qp=t=>r.lazy(()=>t().catch(s=>{throw new Error("LazyLoadError: ".concat(s.message))})),Xp=()=>e.jsx("p",{children:"Loading"});function qr(t){const s=Qp(t);return n=>e.jsx(r.Suspense,{fallback:e.jsx(Xp,{}),children:e.jsx(s,{...n})})}const Zp=t=>{let{message:s="",type:n=wa.success,duration:a=Ox.normal}=t;const d=n===wa.alert;let o="",i="",c="",u="",m="";const j=ta(),{isVisible:f}=Pc(b=>b==null?void 0:b.notification),[h,x]=r.useState(f);let y="default";switch(n){case wa.success:y="success";break;case wa.warning:y="warning";break;case wa.error:y="danger";break;case wa.alert:o="transparent",i="#320504",c="#E62C26",u="#FFEDEC",m="FDF4F4";break;default:y="primary";break}const p=r.useCallback(()=>{x(!1),j(kx())},[j]);return r.useEffect(()=>{let b;return h&&(b=setTimeout(()=>{p()},a)),()=>{clearTimeout(b)}},[a,h,p]),r.useEffect(()=>{x(f)},[f]),e.jsx(gt,{isOpen:h,className:"flex",classNames:{base:"fixed w-full top-2 left-0 flex justify-center cursor-pointer z-50",content:"font-medium w-max p-2 ".concat(d?"bg-[".concat(o,"]"):"max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg xl:max-w-xl ")},content:d?e.jsx("div",{style:{backgroundColor:i,borderColor:c},className:"px-4 py-3 rounded-md alertNotification max-w-[546px] w-full border-solid border-1",children:e.jsxs(_,{className:"gap-2.5",children:[e.jsx("div",{children:e.jsx(Hu,{className:"text-[".concat(c,"] size-4")})}),e.jsxs("div",{children:[e.jsx(l,{type:"text-[".concat(m,"]"),children:"Something bad happened"}),e.jsx("div",{children:e.jsx(l,{style:{color:u},type:"opacity-[0.7]",children:s})})]})]})}):e.jsxs("span",{className:"whitespace-normal break-words text-center",onClick:p,children:[s," ",e.jsx(Da,{className:"relative top-0.5"})]}),placement:"bottom",color:y,children:e.jsx("div",{})})};function rr(){var w,I,A,D,O,P,E,N,R;const{userId:t}=he(),{characterId:s}=Ps(),[n,a]=r.useState(!0),d=Je(),{data:o,jsonApiService:i,callApi:c,isLoading:u,error:m}=Ee(),{isMobile:j}=Ie(),f=(w=JSON.parse(Q.getItem(Ut)))==null?void 0:w[s];let h=(I=o==null?void 0:o.moderationReport)==null?void 0:I.moderation_status;const x=o==null?void 0:o.reportsType,y=Array.isArray(x)&&(x==null?void 0:x.includes("User"));Object.values(Ms).includes(h)||(h=null);const p=k=>Object.keys(o).reduce((G,F)=>((F==="tags"?JSON.stringify(k[F])!==JSON.stringify(o[F]):k[F]!==o[F])&&(G[F]=k[F]),G),{});r.useEffect(()=>{async function k(){await c(i.fetchResource,"characters",s+"?switch=T1",{})}k()},[s,c,i.fetchResource]);const b=async k=>(o&&(k=p(k)),await c(i.updateResource,"characters",s+"?switch=T1",k,jt));r.useEffect(()=>{o!=null&&o.creator_user_id&&a((o==null?void 0:o.creator_user_id)!==t)},[o==null?void 0:o.creator_user_id,t]);const{moderationBorder:g,moderationColor:v,moderationText:T}=le.moderationStyles(h);return o?e.jsxs(e.Fragment,{children:[e.jsx(Ue,{index:"EditCharacterPage",properties:{character:o}}),e.jsx(_,{children:e.jsx(C,{children:e.jsx(Gt,{})})}),e.jsxs(q,{className:"flex justify-between ".concat(j?"flex-col":"flex-row"),children:[e.jsx(l,{h2:!0,children:"Chatbot Editor"}),e.jsx(K,{className:"text-link no-underline",target:"_blank",to:"https://docs.spicychat.ai/product-guides/creating-chatbots","aria-label":"chatbot-guide",children:"Read our Chatbot Creation guide."})]}),e.jsx(S,{y:5}),h&&e.jsx(q,{className:"flex justify-between flex-col mb-4",children:e.jsxs(_s,{className:"h-fit w-full flex bg-[#353535] rounded-[10px] p-[10px] border-0 border-b-5 border-solid "+g,children:[e.jsx(_,{children:e.jsx(l,{type:v,children:T+"".concat(h===Ms.FixRequired?": Chatbot ".concat(y?"Reported":"Rejected"):"")})}),e.jsxs(C,{className:"mt-2",children:[e.jsx(l,{b:!0,type:"steel_blue",children:h===Ms.FixRequired?e.jsx(e.Fragment,{children:y?"The chatbot has been unpublished due to reports of non-compliance with community guidelines. Please address the following issues and resubmit.":"The chatbot has been rejected due to non-compliance with our guidelines. Please address the following issues and resubmit."}):e.jsx(l,{n:!0,type:"steel_blue",children:"This chatbot is currently in the review queue. The moderation team is carefully evaluating it to ensure it aligns with the community standards. While under review, further edits cannot be made."})}),e.jsx(S,{y:1}),h===Ms.FixRequired&&e.jsxs(e.Fragment,{children:[((D=(A=o==null?void 0:o.moderationReport)==null?void 0:A.reason_for_moderation)==null?void 0:D.length)>0&&e.jsxs("div",{children:[e.jsx(l,{n:!0,type:"steel_blue",children:"Reasons:"}),e.jsx("ul",{children:(P=(O=o==null?void 0:o.moderationReport)==null?void 0:O.reason_for_moderation)==null?void 0:P.map((k,G)=>e.jsx("li",{className:"list-disc ml-[18px]",children:e.jsx(l,{n:!0,type:"steel_blue",children:k})},G))})]}),e.jsxs("div",{children:[((E=o==null?void 0:o.moderationReport)==null?void 0:E.action_taken_description)&&e.jsxs(C,{children:[e.jsx(S,{y:2}),e.jsx(l,{n:!0,type:"steel_blue",children:"Mod Note:"}),e.jsx(l,{n:!0,type:"steel_blue",children:(N=o==null?void 0:o.moderationReport)==null?void 0:N.action_taken_description})]}),e.jsx(S,{y:2}),e.jsxs(l,{n:!0,type:"steel_blue",children:["Disagree with the decision?"," ",e.jsx(K,{className:"text-blue-600",to:"https://docs.spicychat.ai/support",target:"_blank","aria-label":"contact-us",children:"Contact us"})," ","for support."]})]})]})]})]})}),n?e.jsx(l,{children:"You are not allowed to access this page"}):e.jsxs(e.Fragment,{children:[e.jsx(S,{}),e.jsx(Rc,{...f||o,tags:(R=o==null?void 0:o.tags)==null?void 0:R.map(k=>({label:k,value:k})),onSave:b,onCancel:()=>d("/"),isSubmitting:u,submitError:m,isEdit:!0,isAlreadyDraft:!!f})]})]}):null}const em=()=>{const{likedBots:t}=fs();return e.jsxs(e.Fragment,{children:[e.jsx(Ue,{index:"FavoriteBotsPage"}),e.jsx(l,{h1:!0,className:"m-0 px-4 max-mob:px-2",variant:"xxl",children:"Favorite Bots"}),e.jsx(Pn,{useStoreTagFilters:!1,charactersList:t})]})},sm=()=>{const{likedBots:t}=fs();return e.jsxs(e.Fragment,{children:[e.jsx(Ue,{index:"FavoriteBotsPage"}),e.jsx(l,{h1:!0,className:"m-0",variant:"xxl",children:"Favorite Bots"}),e.jsx(Pn,{useStoreTagFilters:!1,charactersList:t})]})};function eo(){const{hasAccessToV2:t}=Ft();return t?e.jsx(sm,{}):e.jsx(em,{})}const tm=()=>{const{userId:t}=he(),s=Ut+"_"+t,n=JSON.parse(localStorage.getItem(s)||"{}"),a=Object.values(n).length,d=a===1;return e.jsx(K,{className:"cursor-pointer no-underline",to:Lx,"aria-label":"draft",children:e.jsxs(ps,{variant:"bordered",className:"relative z-[0] max-w-[200px] w-full h-[270px] align-middle justify-between shadow-none border border-solid border-border",children:[e.jsx(Sn,{className:"flex justify-center mt-2 font-bold",children:e.jsxs(l,{variant:"md",type:"white",children:["DRAFTS (",a,")"]})}),e.jsx(ds,{className:"grid place-items-center",children:e.jsx("div",{className:"w-full flex flex-col items-center relative",children:Object.values(n).slice(0,3).map((o,i)=>{let c=d?" -mt-8 w-[100px] h-[100px] ":"w-[70px] h-[70px] absolute  -translate-y-3/4  z-[".concat(i,"] ")+(i===1?" left-6 ":"")+(i===2?"top-6 right-8 ":"")+(i===0?"right-6 -top-7 ":"");return e.jsx(e.Fragment,{children:o.avatar_url?e.jsx(te,{removeWrapper:!0,className:"object-contain rounded-[10px] !opacity-70 max-w-full "+c,src:gs(o.avatar_url,{preset:"avatar256x256"}),alt:o.name},i):e.jsx("div",{className:"bg-[#D9D9D9] rounded-[10px] flex items-center justify-center "+c,children:e.jsx(zo,{className:"text-[#000000] text-[28px]"})},i)})})})})]})})},so=164.41,to=20;function am(){var F;const{isMobile:t}=Ie(),{getInlineBannersRowMapping:s}=Xi(),n=r.useRef(),[a,d]=r.useState(null),[o,i]=r.useState(""),[c,u]=r.useState(Oc.LATEST),[m,j]=r.useState(Pa.ALL),[f,h]=r.useState(!1),x=r.useRef([]),{jsonApiService:y,callApi:p,isLoading:b}=Ee(),{callApi:g,isLoading:v}=Ee(),T=Je(),{userId:w}=he(),I=JSON.parse(Q.getItem(Ut)||"{}"),A=Object.values(I),D=Math.max(((F=n.current)==null?void 0:F.clientWidth)||400,400),O=t?10:16,P=r.useMemo(()=>kc({containerWidth:D,containerPadding:O,colWidth:so,colGap:to}),[D,t]);r.useEffect(()=>{async function H(){const V=await p(y.fetchResource,"users/characters?switch=T1",null,{},jt);let z=V==null?void 0:V.data;if(z==null)return;const ne=xe=>{var W;const de=(W=xe==null?void 0:xe.moderationReport)==null?void 0:W.moderation_status;return de===Ms.FixRequired?1:de===Ms.RereviewRequired||de===Ms.Pending?2:3};let J=z.sort((xe,de)=>{const W=ne(xe),ge=ne(de);return W===ge?0:W-ge});d(J),x.current=J;let $=A.filter(xe=>{var de;return((de=xe==null?void 0:xe.moderationReport)==null?void 0:de.moderation_status)===Ms.FixRequired});$!=null&&$.length&&ll($,z,I)}return w&&H(),()=>d(null)},[w,p,y.fetchResource]);const E=async H=>{if(await g(y.deleteResource,"characters/".concat(H)).then(()=>{d(V=>V.filter(z=>z.id!==H))}),I[H]){let V=I;delete V[H],Q.setItem(Ut,JSON.stringify(V))}},N=yn.contentfulScreen&&s(yn.contentfulScreen),R=a?(a==null?void 0:a.length)/P:0,k=H=>{if(!H)return!1;const V=H/P;return R>V},G=()=>{const H="No Results Found";return o||m!==Pa.ALL?{title:H,description:"Try adjusting your search or exploring popular bots instead."}:{title:H,description:"Create your first bot and start chatting!",buttonText:"Create Chatbot",onClick:()=>T("/chatbot/create")}};return e.jsx(e.Fragment,{children:e.jsx("div",{ref:n,className:"w-full h-full flex flex-col",children:b||!a?e.jsx("div",{className:" flex justify-center items-center",children:e.jsx(Se,{className:"mx-auto"})}):e.jsxs(e.Fragment,{children:[e.jsx(Ue,{index:"MyCharactersPage"}),e.jsx(S,{y:.2}),a&&e.jsx("h1",{className:"tracking-tighter m-0 text-[24px] font-semibold",children:"My Chatbots"}),e.jsx("div",{className:"my-lg",children:e.jsx(Lc,{setSearchQuery:i,searchedQuery:o,allBots:x.current,setData:d,setFilterBy:j,filterBy:m,setIsFiltering:h,sortBy:c,setSortBy:u})}),f?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx(Se,{className:"mx-auto"})}):e.jsxs(e.Fragment,{children:[!(a!=null&&a.length)&&(o||m)&&e.jsx("div",{className:" flex justify-center items-center h-full",children:e.jsx(Wo,{isLoading:!1,...G()})}),(!!(A!=null&&A.length)||!!a.length)&&e.jsxs("div",{className:"grid !gap-y-3 max-[400px]:!grid-cols-2 pb-4 max-mob:pb-2",style:{gridTemplateColumns:"repeat(auto-fill, minmax(".concat(so,"px, 1fr))"),gap:to},children:[A!=null&&A.length&&!o&&m===Pa.ALL?e.jsx(tm,{}):null,a==null?void 0:a.map((H,V)=>{var z;return e.jsxs(e.Fragment,{children:[!!((z=N==null?void 0:N[V/P])!=null&&z.length&&k(V))&&e.jsx("div",{className:" w-full col-span-full",children:e.jsx(_n,{placement:gn.Inline,isVisibleOnPartner:!1,availableBanners:N==null?void 0:N[V/P]})}),e.jsx(q,{children:e.jsx(Mc,{onPress:()=>T("/chat/".concat(H.id)),character:H,onClick:()=>T("/chat/".concat(H.id)),isLoading:v,onDeleteCharacter:E,sortBy:c})},V)]})})]})]})]})})})}const ao=160,no=12,nm={[Ms.Pending]:it.REVIEW,[Ms.RereviewRequired]:it.REVIEW,[Ms.FixRequired]:it.ACTION,[ot.PUBLIC]:it.PUBLIC,[ot.PRIVATE]:it.PRIVATE,[ot.PERMANENTLY_PRIVATE]:it.PRIVATE,[ot.HIDDEN]:it.UNLISTED};function rm(){var Ne,je,js,bs,ns;const t=Ds().pathname,s=aa(t),{logEvent:n}=bt(),{isMobile:a}=Ie(),{getInlineBannersRowMapping:d}=Xi(),{sendUserInteractionDetailView:o,recombeeUserId:i}=Rn(),{onUserBlockCreator:c,isLoading:u,blurNSFW:m}=fs(),{callApi:j,isLoading:f}=Ee(),[h,x]=r.useState(null),[y,p]=r.useState(!1),[b,g]=r.useState(""),[v,T]=r.useState(Pa.ALL),[w,I]=r.useState(!1),A=r.useRef([]),D=r.useRef(),[O,P]=r.useState(null),{jsonApiService:E,callApi:N,isLoading:R}=Ee(),k=Je(),{userId:G,permissions:F}=he(),H=JSON.parse(Q.getItem(Ut)||"{}"),V=Object.values(H),[z,ne]=r.useState(!1),[J,$]=r.useState(!1),[xe,de]=r.useState(!1),[W,ge]=r.useState(Oc.LATEST),X=F==null?void 0:F.includes(Oe.delete_character),ae=(h==null?void 0:h.character_id)||(h==null?void 0:h.id),Pe=Math.max(((Ne=D.current)==null?void 0:Ne.clientWidth)||400,400),Ce=a?10:16,ve=r.useMemo(()=>kc({containerWidth:Pe,containerPadding:Ce,colWidth:ao,colGap:no}),[Pe,a]),{centeredElementIds:Z,setElementRef:me}=Mx();async function Ge(){const M=await N(E.fetchResource,"users/characters?switch=T1",null,{},jt);let ee=M==null?void 0:M.data;if(ee==null)return;const re=Ve=>{var we;const ls=(we=Ve==null?void 0:Ve.moderationReport)==null?void 0:we.moderation_status;return ls===Ms.FixRequired?1:ls===Ms.RereviewRequired||ls===Ms.Pending?2:3};let De=ee.sort((Ve,ls)=>{const we=re(Ve),Es=re(ls);return we===Es?0:we-Es});P(De),A.current=De;let qe=V.filter(Ve=>{var ls;return((ls=Ve==null?void 0:Ve.moderationReport)==null?void 0:ls.moderation_status)===Ms.FixRequired});qe!=null&&qe.length&&ll(qe,ee,H)}if(r.useEffect(()=>(G&&Ge(),()=>P(null)),[G,N,E.fetchResource]),H[Rl]){let M={...H};delete M[Rl],Q.setItem(Ut,JSON.stringify(M))}const Y=r.useCallback(M=>{let ee;return ae!==M&&(ee=O.find(re=>(re==null?void 0:re.id)===M),x(ee)),ee||h},[ae,h,O]),fe=M=>{var De;const ee=Y(M);if((De=ee==null?void 0:ee.moderationReport)==null?void 0:De.moderation_status)p(!0);else if((ee==null?void 0:ee.visibility)===ot.PUBLIC){const qe=(ee==null?void 0:ee.id)||(ee==null?void 0:ee.character_id);o(i,qe)}},Le=(M,ee)=>{const re=W.toLowerCase().split(" ").join("_");switch(n(Bx[M],{user_id:G,bot_category:re,character_id:ee,page_name:s}),M){case _r.CHAT:fe(ee)}},Fe=()=>{ne(!1),de(!1),$(!1)},We=M=>{if(Y(M),!X)return de(!0);ne(!0)},Be=async M=>{await c(M==null?void 0:M.creator_user_id)},Ye=async M=>{await j(E.deleteResource,"characters/".concat(M)).then(()=>{P(ee=>ee==null?void 0:ee.filter(re=>(re==null?void 0:re.id)!==M))})},Ke=()=>{const M="No Results Found";return b||v!==Pa.ALL?{title:M,description:"Try adjusting your search or exploring popular bots instead."}:{title:M,description:"Create your first bot and start chatting!",buttonText:"Create Chatbot",onClick:()=>k("/chatbot/create")}},ze=yn.contentfulScreen&&d(yn.contentfulScreen),B=O?(O==null?void 0:O.length)/ve:0,ce=M=>{if(!M)return!1;const ee=M/ve;return B>ee};return e.jsxs(e.Fragment,{children:[e.jsx(Ue,{index:"MyCharactersPage"}),e.jsx("div",{ref:D,className:"w-full h-full flex flex-col",children:R||!O?e.jsx("div",{className:" flex justify-center items-center",children:e.jsx(Se,{className:"mx-auto"})}):e.jsxs(e.Fragment,{children:[O&&e.jsx(is,{variant:Ts.HEADING_5_MEDIUM,children:"My Chatbots"}),e.jsx("div",{className:"my-lg",children:e.jsx(Lc,{setSearchQuery:g,searchedQuery:b,allBots:A.current,setData:P,setFilterBy:T,filterBy:v,setIsFiltering:I,sortBy:W,setSortBy:ge})}),w?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx(Se,{className:"mx-auto"})}):e.jsxs(e.Fragment,{children:[!(O!=null&&O.length)&&(b||v)&&e.jsx("div",{className:" flex justify-center items-center h-full",children:e.jsx(Wo,{isLoading:!1,...Ke()})}),(!!(V!=null&&V.length)||!!O.length)&&e.jsxs("div",{className:"mt-lg grid !gap-y-3 pb-4 max-mob:pb-2",style:{gridTemplateColumns:"repeat(auto-fill, minmax(".concat(ao,"px, 1fr))"),gap:no},children:[!!(V!=null&&V.length)&&!b&&v===Pa.ALL&&e.jsx(Di,{variant:it.DRAFTS,characterInfo:{characterDraftCount:V==null?void 0:V.length,characterDraftImages:Dx(V),draftsPagePath:"".concat(Ae.chatbots,"/drafts")}}),(je=O||[])==null?void 0:je.map((M,ee)=>{var ls,we;const re=(ls=M==null?void 0:M.moderationReport)==null?void 0:ls.moderation_status,De=nm[re||(M==null?void 0:M.visibility)],qe=De===it.DRAFTS||De===it.PRIVATE,Ve=m&&(M==null?void 0:M.avatar_is_nsfw);return e.jsxs(e.Fragment,{children:[(we=ze==null?void 0:ze[ee/ve])!=null&&we.length&&ce(ee)?e.jsx("div",{className:" w-full col-span-full",children:e.jsx(_n,{placement:gn.Inline,isVisibleOnPartner:!1,availableBanners:ze==null?void 0:ze[ee/ve]})}):null,e.jsx("div",{ref:Es=>me(M==null?void 0:M.id,Es),children:e.jsx(Di,{characterInfo:{characterId:M==null?void 0:M.id,characterName:M==null?void 0:M.name,characterCreatorUserName:M==null?void 0:M.creator_username,characterTitle:M==null?void 0:M.title,characterTags:M==null?void 0:M.tags,characterMessageNumber:qe?"-":(M==null?void 0:M.num_messages)||"0",characterRatingScore:M==null?void 0:M.rating_score,characterAvatarUrl:gs(M==null?void 0:M.avatar_url,{preset:"avatar256x256"}),characterDefinitionVisible:M==null?void 0:M.definition_visible,characterInfoLabel:"".concat(M!=null&&M.definition_visible?"Chatbot Profile, definition visible":"Chatbot Profile"),characterTokensCount:M==null?void 0:M.token_count,characterImageGen:(M==null?void 0:M.lora_status)==="ready",creatorPagePath:"/creator/".concat(M==null?void 0:M.creator_username),chatPagePath:re?void 0:"/chat/".concat(M==null?void 0:M.id),chatbotProfilePagePath:"/chatbot/".concat(M==null?void 0:M.id),characterAvatarBlur:Ve,characterImageGenLabel:"Character can generate images"},characterCardActionsHandler:Le,characterCardActionsState:{[_r.FAVORITE]:{isHidden:!0}},variant:De,dropdownMenuActions:[{label:hi.edit,icon:oe.EDIT,to:"".concat(Ae.editChatbot,"/").concat(M==null?void 0:M.id),onPress:()=>{}},{label:hi.delete,icon:oe.TRASH,onPress:()=>We(M==null?void 0:M.id),isDisabled:!1,isHidden:!1,className:"text-red-9"},{label:hi.report,icon:oe.FLAG,to:"".concat(Ae.report,"/").concat(M.id),onPress:()=>{},isDisabled:!1,isHidden:!1}],atCenter:Z.includes(M==null?void 0:M.id)})},M==null?void 0:M.id)]})})]})]})]})}),J&&e.jsx(Xs,{onUserConfirmation:()=>Be(h),actionButtonColor:"error",actionButtonText:Ul.actionButtonLabel,discardButtonText:Ul.discardButtonLabel,isVisible:J,isLoading:u,handleClose:Fe,confirmationMessage:ol+h.creator_username}),y&&e.jsx(Ux,{moderationModalVisible:y,setModerationModalVisible:p,character:h}),z&&e.jsx(Xs,{heading:"Delete Chatbot",handleClose:Fe,isLoading:f,onUserConfirmation:()=>Ye(ae),confirmationMessage:"".concat(Fx.confirmationMessage," ").concat(h==null?void 0:h.name),isVisible:z}),xe&&e.jsx(Xs,{handleClose:Fe,title:(js=xi)==null?void 0:js.title,confirmationMessage:(bs=xi)==null?void 0:bs.confirmationMessage,link:cl,linkText:(ns=xi)==null?void 0:ns.contactUsLinkText,isVisible:xe,showButtons:!1})]})}function ir(){const{hasAccessToV2:t}=Ft();return t?e.jsx(rm,{}):e.jsx(am,{})}const im=({bottomContent:t,tagOptions:s,addedTags:n,handleTagAddition:a})=>{const[d,o]=r.useState("");return e.jsx(Dr,{classNames:{base:"w-[300px]  bg-cardColor rounded-xl p-2",list:"max-h-[210px] overflow-y-auto custom-scroll"},selectedKeys:n,label:"Assigned to",selectionMode:"multiple",onSelectionChange:i=>a(i),variant:"flat",topContent:e.jsx(ms,{placeholder:"Search Tags ...",value:d,onValueChange:o,variant:"primary_underlined",color:"transparent",isClearable:!0,onClear:()=>o("")}),bottomContent:t,children:s.filter(i=>i.toLowerCase().startsWith(d.toLowerCase())).map(i=>e.jsx(Ua,{textValue:i,endContent:n.includes(i)?e.jsx(Zi,{}):e.jsx(Yo,{}),hideSelectedIcon:!0,children:i},i))})},ro="py-4 pb-4.5 px-1 cursor-auto text-[16px] bg-gray-100",lm="bg-green-600 dark:bg-green-500 text-white font-semibold",om="bg-red-600 text-white font-semibold",cm=t=>{const{tagOptions:s}=vs(),{data:n}=t,{id:a,tags:d}=n,{callApi:o,jsonApiService:i,isLoading:c}=Ee(),[u,m]=r.useState([]),[j,f]=r.useState([]),[h,x]=r.useState(""),[y,p]=r.useState("");let b=JSON.parse(Q.getItem(Jt)),g=b==null?void 0:b[a],v=(d==null?void 0:d.length)-(j==null?void 0:j.length)+(u==null?void 0:u.length);const[T,w]=r.useState(!1),I=k=>{if(!T)return;let G=u.filter(F=>F!==k);m(G)},A=k=>{const G=j.includes(k);f(G?j.filter(F=>F!==k):[...j,k])},D=k=>{if(v>=12){x("You can keep only 12 tags !");return}m(Array.from(k))},O=()=>{T?w(!1):(w(!0),g?(m(g.addedTags),f(g.removedTags)):(m([]),f([])))},P=async()=>{if(!u.length&&!j.length){x("Please select something !");return}h&&x("");let k=u,G=j;w(!1),m((g==null?void 0:g.addedTags)||[]),f((g==null?void 0:g.removedTags)||[]);try{await o(i.createResource,"event",{event_name:"characterSuggestTags",character_id:a,tags_to_add:u,tags_to_remove:j}),p("Suggestions sent successfully !"),m(k),f(G),Q.setItem(Jt,JSON.stringify({...b,[a]:{addedTags:k,removedTags:G}}))}catch(F){x("Suggestions didn't sent !"),console.error(F)}};r.useEffect(()=>{(h||y)&&setTimeout(()=>{h&&x(""),y&&p("")},3e3)},[h,y]);const E=async()=>{if(w(!1),g)try{await o(i.createResource,"event",{event_name:"characterSuggestTags",character_id:a,tags_to_add:[],tags_to_remove:[]}),p("Suggestions Discarded !"),m([]),f([]),b==null||delete b[a],Q.setItem(Jt,JSON.stringify(b))}catch(k){x("Not able to discard the suggestions."),console.error(k)}else m([]),f([])};r.useEffect(()=>{if(g){let k=g.addedTags,G=g.removedTags,F=k==null?void 0:k.filter(V=>!d.includes(V)),H=G==null?void 0:G.filter(V=>d.includes(V));Q.setItem(Jt,JSON.stringify({...b,[a]:{addedTags:F,removedTags:H}})),m(F),f(H)}},[]);const N=k=>{const{children:G,getInputProps:F}=Qo({...k});let H=j.includes(k.value);return e.jsxs("label",{...F(),children:[e.jsx("input",{hidden:!0,...F(),checked:j.includes(k.value)}),e.jsx(ct,{className:"".concat(ro," ").concat(H&&om," ").concat(T?"cursor-pointer":""),children:G})]})},R=()=>e.jsxs(_,{className:"gap-3 grid grid-cols-2",children:[e.jsx(U,{onPress:E,variant:"bordered",radius:"full",size:"sm",children:"Discard Suggestions"}),e.jsx(U,{onPress:P,color:"primary_strong",radius:"full",size:"sm",children:"Send Suggestions"})]});return e.jsxs(e.Fragment,{children:[e.jsxs(C,{children:[e.jsxs(_,{justify:"between",align:"center",children:[e.jsx(l,{b:!0,variant:"lg",mNone:!0,children:"Tags"}),e.jsxs(_,{align:"center",children:[h&&e.jsx(l,{type:"error",children:h}),y&&e.jsx(l,{type:"success",children:y})]})]}),e.jsx(_,{className:"mt-3",justify:"between",children:e.jsxs(Ko,{classNames:{base:"h-min grow",wrapper:"flex-row"},isDisabled:!T,children:[d==null?void 0:d.map(k=>e.jsxs(N,{isSelected:j.includes(k)&&T,value:k,onChange:()=>A(k),children:[k," ",T&&e.jsx(Da,{className:"relative top-[2px] left-[4px]"})]},k)),u.map(k=>{let G=T&&(u==null?void 0:u.includes(k));return e.jsx(ct,{onClick:()=>I(k),className:"".concat(ro," ").concat(lm," ").concat(T?"cursor-pointer":""," "),endContent:G?e.jsx(Zi,{className:"mt-0.5 mr-1"}):null,children:k},k)}),e.jsxs("div",{className:"relative ml-auto",children:[e.jsx(U,{color:"transparent",variant:"tertiary_short",disableRipple:!0,disableAnimation:!0,onPress:O,children:e.jsxs(e.Fragment,{children:[e.jsx(l,{type:"normal",children:"Suggest"}),c?e.jsx(Se,{}):e.jsx(q,{className:"bg-gray-100 rounded-full  grid place-items-center ml-2 min-h-[30px] min-w-[30px]",children:T?e.jsx(Da,{size:20}):e.jsx(Yo,{size:20})})]})}),e.jsx(qo,{children:T&&e.jsx(Jo.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},className:"origin-top-right absolute right-8 top-10 shadow-large z-10",children:e.jsx(im,{bottomContent:e.jsx(R,{}),tagOptions:s,addedTags:u,handleTagAddition:D})})})]})]})})]}),e.jsx(S,{y:0})]})};function dm(){const{onlyUserId:t}=he(),{blurNSFW:s}=fs(),{isDesktop:n}=Ie(),{characterId:a}=Ps(),{data:d,jsonApiService:o,callApi:i,isLoading:c}=Ee(),[u,m]=r.useState(!1),j=window.location.origin,f=JSON.parse(Q.getItem(Is))||!1;if(r.useEffect(()=>{async function y(){await i(o.fetchResource,"characters",a,{},jt)}y()},[a,i,o.fetchResource]),c)return e.jsx(Se,{});if(!d)return null;const h=d,x=(h==null?void 0:h.definition_visible)!==!0&&(h==null?void 0:h.creator_user_id)!==t;return t?e.jsxs(e.Fragment,{children:[e.jsx(Ue,{index:"CharacterDefinitionPage",properties:{character:d},ogImage:gs(h==null?void 0:h.avatar_url,{preset:"avatar500x600"})}),e.jsx(_,{children:e.jsx(Gt,{route:"/"})}),e.jsx("p",{className:"pl-2.5",children:e.jsx(l,{b:!0,variant:"big",children:"Chatbot Profile"})}),e.jsx(S,{y:2}),e.jsx(_,{className:"items-center justify-end gap-2",children:!f&&!!(h!=null&&h.token_count)&&h.token_count>0&&e.jsxs(e.Fragment,{children:[h==null?void 0:h.token_count," Tokens",e.jsx(K,{to:"https://docs.spicychat.ai/product-guides/creating-chatbots/token-limits-and-ai-models",target:"_blank","aria-label":"tokens-info",children:e.jsx(Mt,{className:"text-blue-600"})})]})}),e.jsx(S,{y:n?8:4}),e.jsxs(_,{justify:"center",className:n?"gap-24":"flex-col gap-12",children:[e.jsxs(C,{className:"w-min text-center ".concat(!n&&"mx-auto whitespace-nowrap"),children:[e.jsx(q,{className:"mx-auto ".concat(s&&(h!=null&&h.avatar_is_nsfw)?n?"blur-lg":"blur":"blur-none"," ")+(n?"w-[400px] h-[400px]":"w-[200px] h-[200px]"),children:e.jsx(te,{disableSkeleton:!0,src:gs(h==null?void 0:h.avatar_url,{preset:n?"avatar640x640":"avatar400x400"}),alt:"avatar image",className:"object-cover w-full"})}),e.jsx(S,{y:6}),e.jsx(l,{b:!0,variant:"big",children:h==null?void 0:h.name}),e.jsx(S,{y:.5}),e.jsxs(K,{className:"text-link",to:"/creator/".concat(h==null?void 0:h.creator_username),"aria-label":"creator-profile",children:["@",h==null?void 0:h.creator_username]}),e.jsx(S,{y:5}),e.jsxs(_,{className:"*:px-2.5 *:leading-3 justify-center gap-4",children:[e.jsx(U,{as:K,variant:"primary",color:"primary_strong",startContent:e.jsx($u,{size:26}),to:"/chat/".concat(h==null?void 0:h.id),children:e.jsxs(l,{variant:n?"lg":"md",type:"white",children:["Chat with ",h==null?void 0:h.name]})}),e.jsx(U,{variant:"secondary_small",color:"primary_strong",onPress:()=>m(!0),children:e.jsx(zu,{size:n?30:24})})]})]}),e.jsxs(C,{className:"flex-col grow gap-4",children:[e.jsxs(C,{className:"flex-col",children:[e.jsx(l,{b:!0,variant:"lg",children:"Title:"}),e.jsx(l,{blockquote:!0,children:h.title})]}),e.jsx(cm,{data:d}),e.jsxs(q,{className:"flex-col",children:[e.jsx(l,{b:!0,variant:"lg",children:"Greeting:"}),e.jsx(l,{blockquote:!0,children:e.jsx(Qt,{children:h.greeting})})]}),!x&&e.jsxs(e.Fragment,{children:[e.jsxs(q,{className:"flex-col",children:[e.jsx(l,{b:!0,variant:"lg",children:"Personality:"}),e.jsx(l,{blockquote:!0,children:e.jsx(Qt,{children:h.persona})})]}),h.scenario?e.jsxs(q,{className:"flex-col",children:[e.jsx(l,{b:!0,variant:"lg",children:"Scenario:"}),e.jsx(l,{blockquote:!0,children:e.jsx(Qt,{children:h.scenario})})]}):null,h.dialogue?e.jsxs(C,{children:[e.jsx(l,{b:!0,variant:"lg",children:"Example Dialogues:"}),e.jsx(l,{blockquote:!0,children:e.jsx(Qt,{children:h.dialogue})})]}):null]})]})]}),e.jsx($r,{visible:u,title:"Share this Chatbot",shareUrl:"".concat(j,"/chat/").concat(a),instructions:"This URL points to this chatbot. Your chats remain private.",shareMessage:"Chatting with ".concat(h.name," on SpicyChat.AI! ").concat(j,"/chat/").concat(a),setShowShare:m})]}):null}const um=({bottomContent:t,tagOptions:s,addedTags:n=[],handleTagAddition:a})=>{const[d,o]=r.useState("");return e.jsx(Dr,{classNames:{base:"w-[300px]  bg-cardColor rounded-xl p-2",list:"max-h-[210px] overflow-y-auto custom-scroll"},selectedKeys:n,label:"Assigned to",selectionMode:"multiple",onSelectionChange:i=>a(i),variant:"flat",topContent:e.jsx(ms,{placeholder:"Search Tags ...",value:d,onValueChange:o,variant:"primary_underlined",color:"transparent",isClearable:!0,onClear:()=>o("")}),bottomContent:t,children:s==null?void 0:s.filter(i=>i.toLowerCase().startsWith(d.toLowerCase())).map(i=>e.jsx(Ua,{textValue:i,endContent:e.jsx(hn,{icon:n!=null&&n.includes(i)?oe.CHECK:oe.PLUS,size:mr.SMALL}),hideSelectedIcon:!0,children:i},i))})},hm=({data:{id:t,tags:s}})=>{const{tagOptions:n}=vs(),{callApi:a,jsonApiService:d,isLoading:o}=Ee(),[i,c]=r.useState([]),[u,m]=r.useState([]),[j,f]=r.useState(""),[h,x]=r.useState(""),y=JSON.parse(Q.getItem(Jt)),p=y==null?void 0:y[t],b=(s==null?void 0:s.length)-(u==null?void 0:u.length)+(i==null?void 0:i.length),[g,v]=r.useState(!1),T=N=>{if(!g)return;const R=i.filter(k=>k!==N);c(R)},w=N=>{if(!g)return;const R=u.includes(N);m(R?u.filter(k=>k!==N):[...u,N])},I=N=>{if(b>=12){f("You can keep only 12 tags !");return}c(Array.from(N))},A=()=>{v(N=>!N),p?(c(p.addedTags),m(p.removedTags)):(c([]),m([]))},D=async()=>{if(!i.length&&!u.length){f("Please select something !");return}j&&f("");const N=i,R=u;v(!1),c((p==null?void 0:p.addedTags)||[]),m((p==null?void 0:p.removedTags)||[]);try{await a(d.createResource,"event",{event_name:"characterSuggestTags",character_id:t,tags_to_add:i,tags_to_remove:u}),x("Suggestions sent successfully !"),c(N),m(R),Q.setItem(Jt,JSON.stringify({...y,[t]:{addedTags:N,removedTags:R}}))}catch(k){f("Suggestions didn't sent !"),console.error(k)}};r.useEffect(()=>{(j||h)&&setTimeout(()=>{j&&f(""),h&&x("")},3e3)},[j,h]);const O=async()=>{if(v(!1),p)try{await a(d.createResource,"event",{event_name:"characterSuggestTags",character_id:t,tags_to_add:[],tags_to_remove:[]}),x("Suggestions Discarded !"),c([]),m([]),y==null||delete y[t],Q.setItem(Jt,JSON.stringify(y))}catch(N){f("Not able to discard the suggestions."),console.error(N)}else c([]),m([])};r.useEffect(()=>{if(p){const N=p.addedTags,R=p.removedTags,k=N==null?void 0:N.filter(F=>!s.includes(F)),G=R==null?void 0:R.filter(F=>s.includes(F));Q.setItem(Jt,JSON.stringify({...y,[t]:{addedTags:k,removedTags:G}})),c(k),m(G)}},[]);const P=N=>{const{getInputProps:R}=Qo({...N}),k=N==null?void 0:N.value,G=k&&u.includes(k);return e.jsxs("label",{...R(),children:[e.jsx("input",{hidden:!0,...R()}),e.jsx(gr,{style:{backgroundColor:G?"#dc2626":""},className:"".concat(G?"bg-error text-white":""," ").concat(N!=null&&N.isTagSuggestionMenu?"":"cursor-default"),onClick:()=>{var F;return(F=N.onChange)==null?void 0:F.call(N)},iconEnd:g?oe.CLOSE:void 0,"aria-label":"tag-".concat(k),children:N.value})]})},E=()=>e.jsxs(_,{className:"gap-3 grid grid-cols-2",children:[e.jsx(U,{onPress:O,variant:"bordered",radius:"full",size:"sm",children:"Discard Suggestions"}),e.jsx(U,{onPress:D,color:"primary_strong",radius:"full",size:"sm",children:"Send Suggestions"})]});return e.jsxs(e.Fragment,{children:[e.jsxs(Ko,{classNames:{base:"h-min grow",wrapper:"flex-row gap-1"},isDisabled:!g,children:[s==null?void 0:s.map(N=>e.jsx(P,{isSelected:u.includes(N)&&g,value:N,onChange:()=>w(N),isTagSuggestionMenu:g},N)),i==null?void 0:i.map(N=>{const R=g&&(i==null?void 0:i.includes(N));return e.jsx(gr,{className:"bg-success dark:!bg-green-5 text-white ".concat(g?"":"cursor-default"),onClick:()=>T(N),...R&&{iconEnd:oe.CHECK},"aria-label":"tag-".concat(N),children:N},N)}),e.jsxs("div",{className:"relative",children:[e.jsx(gr,{variant:Wu.OUTLINED,onClick:A,iconStart:g?oe.CLOSE:oe.PLUS,loading:o,"aria-label":"tag-suggest",children:"Suggest Tag"}),e.jsx(qo,{children:g&&e.jsx(Jo.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},className:"origin-top-right absolute right-8 top-10 shadow-large z-10",children:e.jsx(um,{bottomContent:e.jsx(E,{}),tagOptions:n,addedTags:i,handleTagAddition:I})})})]})]}),j&&e.jsx(l,{type:"error",children:j}),h&&e.jsx(l,{type:"success",children:h})]})};function xm(){var G,F;const t=Ds().pathname,s=aa(t),{onlyUserId:n}=he(),{blurNSFW:a,likedBots:d,onUserLikebot:o}=fs(),{isMobile:i,isDesktop:c}=Ie(),{characterId:u}=Ps(),{sendUserInteractionAddBookmark:m,recombeeUserId:j}=Rn(),{data:f,jsonApiService:h,callApi:x,isLoading:y}=Ee(),p=f,[b,g]=r.useState(!1),[v,T]=r.useState(!1),[w,I]=r.useState(!1),A=window.location.origin,D=JSON.parse(Q.getItem(Is))||!1,[O,P]=r.useState(!1),E=a&&(p==null?void 0:p.avatar_is_nsfw),N=async()=>{await x(h.fetchResource,"characters",u,{},jt)};if(r.useEffect(()=>{N()},[u,x,h.fetchResource]),r.useEffect(()=>{u&&!(d!=null&&d.includes(u))?T(!1):T(!0)},[d]),y)return e.jsx(Se,{});if(!p)return null;const R=(p==null?void 0:p.definition_visible)!==!0&&(p==null?void 0:p.creator_user_id)!==n,k=async()=>{g(!0),u&&(await o(u,s),v&&await m(j,u)),g(!1)};return n?e.jsxs(_,{className:"w-full flex flex-col max-w-[700px] gap-lg mx-auto",children:[e.jsx(Ue,{index:"CharacterDefinitionPage",properties:{character:p},ogImage:gs(p==null?void 0:p.avatar_url,{preset:"avatar500x600"})}),e.jsx(Dc,{}),e.jsxs(_,{className:"gap-5 flex-col sm:flex-row",children:[e.jsx("div",{className:"overflow-hidden aspect-square sm:w-[180px] sm:h-[180px] flex-shrink-0",children:e.jsx(zr,{src:(p==null?void 0:p.avatar_url)||"",isOpen:O,onOpenChange:P,blurred:E,children:e.jsx(Ur,{src:gs(p==null?void 0:p.avatar_url,{preset:i?"avatar400x400":"avatar640x640"}),alt:"avatar image",className:"cursor-pointer w-full aspect-square sm:w-[180px] sm:h-[180px] object-cover\n               rounded-lg ".concat(E?"blur sm:blur-lg":"blur-none","\n              "),onClick:()=>P(!0)})})}),e.jsxs(_,{className:"flex-col gap-5",children:[e.jsxs(C,{className:"gap-1",children:[e.jsx(is,{variant:Ts.MOBILE_HEADING_3_BOLD,children:p==null?void 0:p.name}),e.jsx(K,{className:"text-link",to:"/creator/".concat(p==null?void 0:p.creator_username),"aria-label":"creator-profile",children:e.jsxs(is,{variant:Ts.LABEL_LARGE_REGULAR,children:[" @",p==null?void 0:p.creator_username]})})]}),e.jsxs(_,{className:"flex-wrap gap-1",children:[e.jsx(K,{to:"/chat/".concat(u),"aria-label":"chat-with-".concat(p.name),children:e.jsx(wt,{iconStart:oe.MESSAGE_MORE,"aria-label":"chat-now",children:"Chat Now"})}),e.jsx(wt,{iconStart:oe.FAVORITE,variant:$e.TEXT,onClick:k,loading:b,"aria-label":v?"favorited":"favorite",classNames:{icon:v?"text-red-9 fill-red-9":void 0},children:v?"Favorited":"Favorite"}),e.jsx(wt,{iconStart:oe.SHARE,variant:$e.TEXT,onClick:()=>I(!0),"aria-label":"share",children:"Share"})]}),e.jsxs(_,{className:"flex-wrap gap-3 opacity-60 text-sm",children:[e.jsxs(_,{className:"gap-1 items-center",children:[e.jsx(hn,{icon:oe.MESSAGE,size:mr.SMALL}),e.jsx(is,{children:Bi((G=p==null?void 0:p.num_messages)!=null?G:0)})]}),e.jsxs(_,{className:"gap-1 items-center",children:[e.jsx(hn,{icon:oe.LIKE,size:mr.SMALL}),e.jsx(is,{children:p!=null&&p.rating_score&&!Number.isNaN((p==null?void 0:p.rating_score)*100)?"".concat(Math.round((p==null?void 0:p.rating_score)*100),"%"):"0%"})]}),!D&&!!(p!=null&&p.token_count)&&p.token_count>0&&e.jsx(K,{to:"https://docs.spicychat.ai/product-guides/creating-chatbots/token-limits-and-ai-models",target:"_blank","aria-label":"token-info",children:e.jsxs(_,{className:"gap-1 items-center",children:[e.jsx(hn,{icon:oe.INFO,size:mr.SMALL}),e.jsxs(is,{className:"flex items-center gap-1",children:[Bi(p.token_count,!0)," tokens"]})]})})]}),e.jsx(is,{variant:Ts.LABEL_LARGE_REGULAR,children:p==null?void 0:p.title}),e.jsx(hm,{data:p})]})]}),e.jsx(sr,{label:"Greeting",text:(F=p==null?void 0:p.greeting)!=null?F:"",collapsed:!c}),!R&&e.jsxs(e.Fragment,{children:[(p==null?void 0:p.persona)&&e.jsx(sr,{label:"Personality",text:p==null?void 0:p.persona,collapsed:!c}),(p==null?void 0:p.scenario)&&e.jsx(sr,{label:"Scenario",text:p==null?void 0:p.scenario,collapsed:!c}),(p==null?void 0:p.dialogue)&&e.jsx(sr,{label:"Example Dialogues",text:p.dialogue,collapsed:!c})]}),e.jsx($r,{visible:w,title:"Share this Chatbot",shareUrl:"".concat(A,"/chat/").concat(u),instructions:"This URL points to this chatbot. Your chats remain private.",shareMessage:"Chatting with ".concat(p==null?void 0:p.name," on SpicyChat.AI! ").concat(A,"/chat/").concat(u),setShowShare:I})]}):null}function io(){const{hasAccessToV2:t}=Ft();return t?e.jsx(xm,{}):e.jsx(dm,{})}const lo=()=>{const{getCachedRecommendations:t}=Rn(),[s,n]=r.useState([]),[a,d]=r.useState(""),[o,i]=r.useState(!0),{isLoading:c}=Qe()||{},{blockedUsers:u,selectedTags:m}=fs(),j=Q.getItem(Wr)==="true",{recombeeRecommendationsConfig:f,applicationId:h}=vs(),{userId:x}=he(),y=f==null?void 0:f.navigateScenarioName,p=f==null?void 0:f.navigateCacheTimeoutMs,b=Zs();if(r.useEffect(()=>{const v=async()=>{i(!0);const T="recombee_navigate_".concat(j?"nsfw":"sfw"),w=await t({storageKey:T,timeOut:p,userId:x,scenario:y,num:602,nsfwToggle:j,blockedUsers:u,selectedTags:m,applicationId:h});d(w==null?void 0:w.recommId),n(w==null?void 0:w.recomms),i(!1)};navigator.onLine||b(za(Ic)),x&&y&&!c&&v()},[x,j,y,c,p,u,m,h,b,t]),o)return e.jsx(Se,{});if(!s||!s.length>0)return null;const g=s.reduce((v,T)=>[...v,T.id],[]);return e.jsxs(e.Fragment,{children:[e.jsx(Ue,{index:"RecommendedBotsPage"}),e.jsx(l,{h1:!0,className:"m-0 px-4 max-mob:px-2",variant:"xxl",children:"Recommended Bots"}),e.jsx(Pn,{charactersList:g,recommId:a})]})},pm="/Assets/alternateArrowChats.svg",mm="/Assets/alternateArrowChatsDark.svg";function oo(){const{theme:t}=wn(),s=t==="dark",{getUserPersonaById:n}=Va(),{blurNSFW:a}=fs(),[d,o]=r.useState([]),[i,c]=r.useState(!1),{jsonApiService:u,callApi:m,isLoading:j}=Ee(),{callApi:f,isLoading:h}=Ee(),{isLoading:x}=Qe(),[y,p]=r.useState(null),[b,g]=r.useState(null),v=r.useCallback(async({limit:A=25,last_id:D}={})=>{await m(u.fetchResource,"conversations",null,{limit:A,last_id:D},jt).then(O=>{var P;if(o(E=>E.concat(O)),O&&O.length>0){const E=(P=O.find(N=>N.is_last_id))==null?void 0:P.character_id;p(E||null)}else p(null)})},[m,u.fetchResource,o,p]);r.useEffect(()=>{!i&&!x&&(c(!0),v())},[i,v,x]);const T=async()=>{await v({last_id:y})},w=async A=>{g(A);const D=d.filter(O=>(O==null?void 0:O.id)!==A);await f(u.deleteResource,"conversations",A),o(D),g(null)},I=A=>{try{return ec(new Date(A),{addSuffix:!0})}catch(D){return""}};return j&&!d.length?e.jsx(Se,{}):e.jsxs(na,{size:"medium",children:[e.jsx(Ue,{index:"ChatsPage"}),e.jsx(l,{h4:!0,children:"Your Previous Conversations"}),e.jsx(_s,{gap:0,children:e.jsxs("div",{children:[d.length===0&&e.jsx(l,{children:"No Conversations"}),(d||[]).map(A=>{var D,O,P,E,N,R,k,G,F;return(A==null?void 0:A.id)&&e.jsxs("div",{className:"mb-10",children:[e.jsxs(ps,{className:"w-full bg-cardColor drop-shadow-2xl hover:-translate-y-0.5 data-[hover=true]:bg-cardColor dark:data-[hover=true]:bg-cardColor",isPressable:!0,isHoverable:!0,children:[e.jsx(Sn,{className:"whitespace-nowrap p-3",children:e.jsxs(C,{children:[e.jsxs(_,{className:"items-center justify-between gap-1 text-start",children:[e.jsx(C,{className:"w-max",children:e.jsxs(_,{className:"grid grid-cols-[min-content_min-content_1fr]",align:"center",gap:.5,children:[e.jsx(l,{variant:"lg",type:"truncate ".concat(Xo(new Date,new Date((D=A==null?void 0:A.last_message)==null?void 0:D.createdAt))>24?"max-w-[40vw]":"max-w-[30vw]"),children:(O=A==null?void 0:A.character)==null?void 0:O.name}),e.jsx("img",{src:s?mm:pm,alt:"arrow logo"}),e.jsx(l,{variant:"lg",type:"truncate",children:(P=n(A==null?void 0:A.user_persona_id))==null?void 0:P.name})]})}),e.jsx(C,{className:"w-max",children:e.jsx(_,{justify:"end",align:"center",children:e.jsx(l,{variant:"xs",children:I((E=A==null?void 0:A.last_message)==null?void 0:E.createdAt)})})})]}),e.jsx(_,{className:"text-start",children:e.jsx(l,{variant:"xs",children:(N=A==null?void 0:A.character)==null?void 0:N.title})})]})}),e.jsx(Qs,{}),e.jsxs(ds,{className:"px-3 py-5",children:[e.jsxs(_,{justify:"start",children:[e.jsx(C,{className:"w-[220px] pr-1 max-sm:w-[120px] ".concat(a&&((R=A.character)!=null&&R.avatar_is_nsfw)?"blur":"blur-none"),children:e.jsx(Bt,{src:gs((k=A==null?void 0:A.character)==null?void 0:k.avatar_url,{preset:"avatar256x256"}),className:"h-[17vmin] max-h-[156px] w-[17vmin] max-w-[156px] rounded-[30%] bg-white dark:bg-black"})}),e.jsx(C,{className:"text-[16px] leading-6",children:e.jsx(Qt,{children:dl((G=A==null?void 0:A.last_message)==null?void 0:G.content,{characterName:(F=A==null?void 0:A.character)==null?void 0:F.name})})})]}),e.jsxs(_,{justify:"start",children:[e.jsx(C,{align:"center",className:"w-[220px]",children:e.jsxs(Zt,{children:[e.jsx(ea,{children:e.jsx(U,{variant:"secondary",color:"primary_light",endContent:e.jsx(Zo,{className:"mt-0.5 text-lg text-blue-600",size:14}),isLoading:h&&b===A.id,children:"Delete"})}),e.jsx(sa,{classNames:{base:"w-[250px]"},"aria-label":"Static Actions",onAction:()=>w(A==null?void 0:A.id),children:e.jsx(Et,{className:"text-danger data-[hover=true]:bg-danger-50 data-[hover=true]:text-danger",children:e.jsx(l,{variant:"md",type:"error",children:"Delete Conversation"})},"delete")})]})}),e.jsx(C,{children:e.jsx(_,{justify:"end",children:e.jsx(U,{as:K,color:"primary_light",startContent:e.jsx(el,{className:"text-primaryLightContrast"}),radius:"full",to:"/chat/".concat(A==null?void 0:A.character_id,"/").concat(A==null?void 0:A.id),children:e.jsx(l,{variant:"xs",type:"primaryLightContrast medium",children:"Continue to Chat"})})})})]})]}),e.jsx(Qs,{})]}),e.jsx(S,{y:2})]},A==null?void 0:A.id)}),y&&e.jsx(_,{justify:"center",className:"pb-[5px]",children:e.jsx(U,{variant:"secondary",color:Gx,onPress:T,children:j?e.jsx(Se,{size:"sm"}):e.jsx(l,{variant:"xs",children:"Load More"})})})]})})]})}const gm="/Assets/alternateArrowChats.svg",fm="/Assets/alternateArrowChatsDark.svg";function co(){const{theme:t}=wn(),s=t==="dark",{getUserPersonaById:n}=Va(),{blurNSFW:a}=fs(),{characterId:d}=Ps();let[o,i]=r.useState([]);const{jsonApiService:c,data:u,callApi:m}=Ee(),{callApi:j,isLoading:f}=Ee(),{callApi:h,isLoading:x}=Ee(),[y,p]=r.useState(null);r.useEffect(()=>{m(c.fetchResource,"characters",d,{},jt)},[d,m,c.fetchResource]),r.useEffect(()=>{(async()=>{await h(c.fetchResource,"characters/".concat(d),"conversations",{},jt).then(T=>{i(T)})})()},[h,c.fetchResource,d]);const b=async v=>{p(v);let T=o.filter(w=>w.id!==v);await j(c.deleteResource,"conversations",v),i(T),p(null)},g=v=>{try{return ec(new Date(v),{addSuffix:!0})}catch(T){return""}};return x?e.jsx(Se,{}):e.jsxs(na,{size:"medium",children:[e.jsx(Ue,{index:"CharacterChatsPage",properties:{character:u}}),e.jsx(_,{children:e.jsx(C,{children:e.jsx(Gt,{})})}),e.jsxs(l,{h4:!0,children:["Last Conversations with ",u==null?void 0:u.name]}),e.jsxs(_s,{gap:0,children:[(o||[]).length===0&&e.jsx(l,{children:"There's no conversations in your history."}),e.jsx("div",{children:(o||[]).map(v=>{var T,w;return e.jsxs("div",{children:[e.jsxs(ps,{className:"w-full bg-cardColor data-[hover=true]:bg-cardColor dark:data-[hover=true]:bg-cardColor hover:-translate-y-0.5 drop-shadow-2xl",isPressable:!0,isHoverable:!0,children:[e.jsx(Sn,{className:"whitespace-nowrap",children:e.jsxs(C,{children:[e.jsxs(_,{className:"text-start justify-between gap-1 items-center",children:[e.jsx(C,{className:"w-max",children:e.jsxs(_,{className:"grid grid-cols-[min-content_min-content_1fr]",align:"center",gap:.5,children:[e.jsx(l,{variant:"lg",type:"truncate ".concat(Xo(new Date,new Date((T=v==null?void 0:v.last_message)==null?void 0:T.createdAt))>24?"max-w-[40vw]":"max-w-[30vw]"),children:(v==null?void 0:v.label)||(u==null?void 0:u.name)}),e.jsx("img",{src:s?fm:gm,alt:"arrow logo"}),e.jsx(l,{variant:"lg",type:"truncate",children:(w=n(v==null?void 0:v.user_persona_id))==null?void 0:w.name})]})}),e.jsx(C,{className:"w-max",children:e.jsx(_,{justify:"end",align:"center",children:e.jsx(l,{variant:"xs",children:g(v.last_message.createdAt)})})})]}),e.jsx(_,{children:e.jsx(l,{variant:"xs",weight:"bold",children:u==null?void 0:u.title})})]})}),e.jsx(Qs,{}),e.jsxs(ds,{children:[e.jsxs(_,{className:"py-5 px-3",children:[e.jsx(C,{className:"w-[220px] max-sm:w-[120px] pr-1 ".concat(a&&(u!=null&&u.avatar_is_nsfw)?"blur":"blur-none"),children:e.jsx(Bt,{src:gs(u==null?void 0:u.avatar_url,{preset:"avatar256x256"}),className:"bg-white dark:bg-black h-[17vmin] rounded-[30%] w-[17vmin] max-w-[156px] max-h-[156px]"})}),e.jsx(C,{className:"text-[16px] leading-6",children:e.jsx(Qt,{children:v.last_message.content})})]}),e.jsxs(_,{justify:"start",children:[e.jsx(C,{align:"center",className:"w-[220px] max-xs:w-[120px]",children:e.jsxs(Zt,{children:[e.jsx(ea,{children:e.jsx(U,{variant:"secondary",color:"primary_light",endContent:e.jsx(Zo,{className:"text-blue-600 text-lg mt-0.5",size:14}),isLoading:f&&y===v.id,children:"Delete"})}),e.jsx(sa,{classNames:{base:"w-[250px]"},"aria-label":"Static Actions",onAction:()=>b(v==null?void 0:v.id),children:e.jsx(Et,{className:"text-danger data-[hover=true]:text-danger data-[hover=true]:bg-danger-50",children:e.jsx(l,{variant:"md",type:"error",children:"Delete Conversation"})},"delete")})]})}),e.jsx(C,{children:e.jsx(_,{justify:"end",children:e.jsx(U,{as:K,color:"primary_light",startContent:e.jsx(el,{className:"text-primaryLightContrast"}),radius:"full",to:"/chat/".concat(v.character_id,"/").concat(v.id),children:e.jsx(l,{variant:"xs",type:"primaryLightContrast medium",children:"CONTINUE TO CHAT"})})})})]})]}),e.jsx(Qs,{})]}),e.jsx(S,{y:2})]},v.id)})})]})]})}const qi=["Terrible","Bad","Great","Fantastic"],jm={Terrible:["Out of Character","Repetitive","Empty Response","Incomplete","Respond as User","Repeat Context"],Bad:["Bad Memory","Too Formal","Too Short","Too Long"],Great:["Interesting","Good Memory","Funny","Spicy","Unique"],Fantastic:["Interesting","Good Memory","Funny","Spicy","Unique"]},bm={Terrible:["Irrelevant","Malformed","Offensive","Scary"],Bad:["Irrelevant","Out of Character","Malformed","Scary"],Great:["Relevant","Surprising","Interesting","Spicy"],Fantastic:["Relevant","Surprising","Interesting","Funny","Spicy"]},ym=t=>t==="image"?bm:jm,_m=t=>qi.indexOf(t)+1;function Bd({messageId:t,rating:s,sendRating:n,messageType:a}){const[d,o]=r.useState(),[i,c]=r.useState(),[u,m]=r.useState(null),[j,f]=r.useState(!1),[h,x]=r.useState(!1),{isMobile:y}=Ie(),p=w=>{o(w);let I=qi[w-1];c(I),f(!0),n(t,I).then(()=>f(!1))},b=w=>{m(w),f(!0),n(t,w).then(()=>{f(!1),x(!0)})};if(r.useEffect(()=>{h&&setTimeout(()=>{x(!1)},7e3)},[h]),r.useEffect(()=>{o(0),c(null),m(null),f(!1),x(!1)},[t]),r.useEffect(()=>{s&&(o(_m(s)),qi.includes(s)?c(s):m(s))},[s]),u&&!j&&!h)return null;let v=ym(a)[i]||[],T="Thanks for your feedback!";return(i=="Terrible"||i=="Bad")&&(T="What response did you expect from the bot? Correcting poor responses helps us train a better AI."),h?e.jsxs(e.Fragment,{children:[y&&e.jsx("br",{}),e.jsx(q,{className:"relative pl-2.5 justify-self-end "+(y?"col-span-2 mt-2":"mt-[3px]"),children:e.jsx(l,{variant:"xs",type:"text-gray-600 medium",i:!0,children:T})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(_,{className:"w-full flex justify-end  max-sm:justify-start gap-[".concat(j?"10px":"0px","] items-center pr-0.5 max-sm:col-span-2"),children:[j&&e.jsx(Se,{size:"sm"}),e.jsx(l,{variant:"sm",b:!0,children:i}),e.jsx(Yu,{emptyColor:"#918888",fillColor:!0,iconsCount:4,size:16,onClick:p,initialValue:d,emptyIcon:e.jsx(Ol,{className:"ml-0.5"}),fillIcon:e.jsx(Ol,{className:"ml-0.5"})})]}),(v==null?void 0:v.length)>0&&e.jsx(_,{className:"flex gap-[10px] flex-wrap relative mt-1.5 justify-end col-span-2 max-sm:justify-start ",children:v==null?void 0:v.map((w,I)=>e.jsx("div",{size:"sm",className:"rounded-[10px] cursor-pointer text-xs font-bold border-none py-0.5 px-1.5 text-white ".concat(u==w?"bg-blue-600":"bg-gray-600"),onClick:()=>b(w),children:w},I))})]})}Bd.propTypes={messageId:L.string,rating:L.string,sendRating:L.func,messageType:L.string};const Gd=({name:t,src:s,resize:n={},blurred:a})=>{const[d,o]=r.useState(!1);return r.useEffect(()=>{const i=c=>{c.code==="Escape"&&d&&o(!1)};return window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}},[d]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:a?"blur":"blur-none",children:e.jsx(Bt,{src:gs(s,n),radius:"lg",onClick:()=>o(!0),classNames:{base:"w-16 h-16 bg-white dark:bg-black"}})}),d&&e.jsxs(es,{backdrop:"blur",hideCloseButton:!0,open:d,onOpenChange:o,className:"!p-0",classNames:{content:"!p-0"},children:[e.jsx(q,{className:"absolute z-[99] top-[5px] right-[8px] p-0 bg-black py-0 px-4 rounded-[10px] leading-6",children:e.jsx(l,{variant:"md",type:"white",children:t})}),e.jsx(te,{removeWrapper:!0,className:"object-scale-down max-w-full",src:gs(s,{preset:"avatar500x600"})})]})]})};Gd.propTypes={name:L.string,src:L.string,resize:L.object,blurred:L.bool};const Vd=({initialValue:t,onSubmit:s,onCancel:n})=>{var m;const[a,d]=r.useState(t),o=r.useRef(null);r.useEffect(()=>{o.current.focus()},[]);const i=()=>{s(a)},c=j=>{var f;d((f=j==null?void 0:j.target)==null?void 0:f.value)},u=((m=a==null?void 0:a.trim())==null?void 0:m.length)>0&&a!==t;return e.jsxs(e.Fragment,{children:[e.jsx(pa,{variant:"primary_noEffect",color:"secondary",name:"editTextarea",value:a,minRows:1,maxRows:15,ref:o,"aria-labelledby":"editTextarea",onChange:c}),e.jsxs(_,{className:"mt-[-15px] gap-2 px-2 py-1",justify:"end",children:[u&&e.jsx(U,{variant:"primary_smallest",color:"transparent",type:"submit",onPress:i,children:e.jsx(l,{variant:"xs",type:"secondary",children:"Save"})}),e.jsx(U,{variant:"primary_smallest",color:"transparent",onPress:n,children:e.jsx(l,{variant:"xs",type:"secondary",children:"Cancel"})})]})]})};Vd.propTypes={initialValue:L.string.isRequired,onSubmit:L.func.isRequired,onCancel:L.func.isRequired};function Hd({isOpen:t,image_prompt:s,onRegenerate:n,setIsOpen:a}){const{isMobile:d}=Ie(),o=d?10:20,[i,c]=r.useState(s),[u,m]=r.useState(!1),{permissions:j}=Qe(),f=()=>{n({regenerate:!0,image_prompt:i}),a(!1)};let h=j.includes(xs.generation_settings);return e.jsxs(e.Fragment,{children:[e.jsxs(es,{title:"Edit Conversation Image",open:t,onOpenChange:a,classNames:{title:"text-center pl-[28px]"},children:[e.jsx(pa,{className:"p-0",classNames:{input:"m-0"},variant:"secondary_noEffect",color:"tertiary",defaultValue:s,onChange:x=>c(x.target.value),minRows:5,maxRows:o,"aria-label":"Image Prompt"}),e.jsxs(_,{justify:"center",children:[e.jsx(U,{variant:"secondary_large",color:"primary_strong",onPressStart:f,children:"Generate New Image"}),h&&e.jsx(U,{className:"ml-2",onClick:()=>m(!0),variant:"tertiary_small",isDisabled:u,children:e.jsx(sl,{size:20})})]})]}),e.jsx(Uc,{isOpen:u,setIsOpen:m})]})}Hd.propTypes={isOpen:L.bool,image_prompt:L.string,onRegenerate:L.func,setIsOpen:L.func};const $d=({image_url:t,image_prompt:s,allowRegenerate:n,onRegenerate:a,handleScrollBottomOnGenerateImage:d})=>{const[o,i]=r.useState(!1);return t?e.jsxs(e.Fragment,{children:[e.jsx(Hd,{isOpen:o,image_prompt:s,onRegenerate:a,setIsOpen:i}),e.jsxs("div",{className:"relative flex justify-center py-2 ".concat(n?"pr-0":"pr-12"),children:[e.jsx(Fc,{src:gs(t,{preset:"image500x650"}),maxWidth:"500px",onLoad:d}),e.jsx("div",{className:"relative",children:n&&s&&e.jsx("div",{className:"absolute bottom-2 right-2",children:e.jsx(U,{onClick:()=>i(!0),variant:"tertiary_small",color:"primary_strong",isDisabled:o,children:e.jsx(Ku,{size:20})})})})]})]}):null};$d.propTypes={image_url:L.string,allowRegenerate:L.bool,handleScrollBottomOnGenerateImage:L.func,image_prompt:L.string,onRegenerate:L.func};const vm=({isTyping:t,messageEditMode:s,message:n,saveMessage:a,onCancel:d,allowRegenerate:o,onRegenerate:i,handleScrollBottomOnGenerateImage:c,userName:u,characterName:m})=>{if(t)return e.jsx("div",{children:e.jsx(Bc,{})});if(s)return e.jsx(Vd,{initialValue:(n==null?void 0:n.content)||"",onSubmit:a,onCancel:d});if(n)return e.jsxs(e.Fragment,{children:[e.jsx(Qt,{children:dl(n==null?void 0:n.content,{characterName:m,userName:u})}),e.jsx($d,{image_url:n.image_url,image_prompt:n.image_prompt,handleScrollBottomOnGenerateImage:c,allowRegenerate:o,onRegenerate:i})]})},br=({character:t,message:s,user_name:n,user_avatar_url:a,isTyping:d=!1,allowRegenerate:o=!1,onRegenerate:i,typingInProcess:c,onNext:u=()=>null,onPrev:m=()=>null,currentIndex:j=0,isSelectedForRemoval:f,onRemovalSelected:h,scrollReference:x,setConversation:y,currentConversationId:p,createConversation:b,removalMode:g,loadMessages:v,altMsgs:T,chatIndex:w,sendRating:I,isClonePartial:A,isSelectedForClone:D,onCloneSelected:O,setErrorCode:P,conversationLength:E,isRemoveMessageLoading:N,isThisAltMessage:R=!1,handleFlagModalOpen:k,isAudioLoading:G,voiceId:F,defaultPersonaId:H,currentAudioMessageId:V,infoMessage:z,handlePreferredVoiceActions:ne})=>{const J=ta(),{callApi:$,jsonApiService:xe,code:de}=Ee(),{isMobile:W}=Ie(),[ge,X]=r.useState(!1),{checkIfPermissionExists:ae}=he(),{blurNSFW:Pe}=fs(),{hasAccessToTTS:Ce}=Ft(),{status:ve,bypass:Z}=Ks(Xe=>Xe==null?void 0:Xe.waitingQueue)||{},{characterId:me}=Ps(),Ge=ve!=="waiting"||Z==me||E===1,Y=Pe&&(t==null?void 0:t.avatar_is_nsfw)&&(s==null?void 0:s.role)==="bot",[fe,Le]=r.useState(!1),Fe=o&&!ge&&!c&&Ge&&!A&&!g,We=Fe&&(s==null?void 0:s.id)&&Ge,Be=!g&&!A&&!d&&!ge&&!(s!=null&&s.image_url),Ye=!!c,Ke=ae(tl.TTS),ze=Fe||Be,B=(s==null?void 0:s.role)===Gi.BOT,ce=!d&&!ge&&B&&!(s!=null&&s.image_url)&&Ce&&Gc(s==null?void 0:s.content),Ne=(s==null?void 0:s.id)&&B&&F&&!(s!=null&&s.image_url)&&Ce&&Ke,je=(z==null?void 0:z.messageId)===(s==null?void 0:s.id),js=ul(Vx),bs=async Xe=>{let dt,et;try{X(!1),y(st=>st.map((ys,tt)=>(ys==null?void 0:ys.id)===(s==null?void 0:s.id)?(dt=ys.content,et=tt,{...ys,content:Xe}):ys)),s!=null&&s.id?await $(xe.updateResource,"messages",s==null?void 0:s.id,{content:Xe}):!p&&w==0&&await b([{role:"bot",content:Xe}])}catch(st){y(ys=>(ys[et].content=dt,ys))}};r.useEffect(()=>{de&&P(de)},[de,P]);const ns=r.useCallback(()=>{let Xe=x.current;Xe&&(Xe.scrollTop=Xe.scrollHeight)},[x]),M=async()=>{X(!0),p&&!(s!=null&&s.id)&&await v()},ee=r.useCallback(()=>{u()},[u]);let re=(s==null?void 0:s.role)==="user"?a:t==null?void 0:t.avatar_url,De=(s==null?void 0:s.role)==="user"?n:t==null?void 0:t.name;const qe=async()=>{ne({action:cs.Stop}),Le(!0),await i({regenerate:!0,image_prompt:s==null?void 0:s.image_prompt,continue_chat:(s==null?void 0:s.role)==="bot"}),Le(!1)},Ve=async()=>{ne({action:cs.Stop}),Le(!0),await i({type:"text",continue_chat:!0}),Le(!1)},ls=async()=>{try{await navigator.clipboard.writeText(s==null?void 0:s.content),J(za(js))}catch(Xe){console.error(Xe)}},we=Xe=>{switch(document.body.style.overflow="",ne({action:cs.Stop}),Xe){case Os.COPY:return ls();case Os.EDIT:return M();case Os.RATE_VOICE:return ne({action:cs.Rate_Modal,messageId:s==null?void 0:s.id});case Os.REPORT:return k(s==null?void 0:s.id,R)}},Es=[{label:"Copy message",icon:"Copy",size:"small",onPress:()=>we(Os.COPY),isHidden:!Be},{label:"Edit message",icon:"Pencil",size:"small",onPress:()=>we(Os.EDIT),isHidden:!Be},{label:"Rate voice quality",icon:"AudioLines",size:"small",onPress:()=>we(Os.RATE_VOICE),isHidden:!Ne},{label:"Report message",icon:"Flag",size:"small",onPress:()=>we(Os.REPORT),isHidden:!Fe}];return e.jsx(e.Fragment,{children:e.jsx(ps,{className:"bg-cardColor overflow-visible max-w-[800px] w-full self-center mb-1 shadow-[0_12px_24px_rgb(104,112,118,0.15),0_12px_14px_rgb(104,112,118,0.1)] dark:shadow-md border-1 border-solid pr-2 "+(f?"border-red-600":D?"border-blue-600":"border-transparent"),children:e.jsx(ds,{className:"pb-[8px] pt-[8px] pl-[0px] pr-[2px] w-full overflow-y-visible",children:e.jsxs(_,{children:[!ge&&e.jsx(C,{className:"w-max ml-[4px] mt-[5px]",children:e.jsxs(_,{children:[re&&e.jsx(Gd,{name:De,src:re,resize:{preset:"avatar64x64"},blurred:Y}),!re&&e.jsx(Bt,{className:"rounded-full w-16 h-16 bg-gradient-to-r from-purple-700 to-blue-600 text-white cursor-default",classNames:{name:"font-medium"},name:De,size:"xlg"})]})}),e.jsxs(C,{className:"pl-[6px] [overflow-wrap:anywhere] grow",children:[e.jsxs(_,{className:"w-full justify-between",children:[e.jsx(l,{b:!0,children:De}),g&&e.jsx(Ui,{isDisabled:N,className:"absolute right-2",isSelected:f,onChange:()=>h(f?null:R?E:w),"aria-labelledby":"remove-message"}),A&&e.jsx(Ui,{className:"absolute right-2",isSelected:D,onChange:()=>O(D?-1:w),"aria-labelledby":"remove-message"}),ze&&e.jsx(_,{align:"center",className:"gap-2.5",children:e.jsx(Fr,{listItems:Es,placement:"bottom-end",children:e.jsx(Cs,{icon:"MoreVertical","aria-label":"actions-dropdown",variant:$e.TRANSPARENT,disabled:Ye})})})]}),e.jsx(vm,{isTyping:d,messageEditMode:ge,message:s,saveMessage:bs,onCancel:()=>X(!1),handleScrollBottomOnGenerateImage:ns,allowRegenerate:o,onRegenerate:i,userName:De,characterName:t==null?void 0:t.name}),e.jsxs(q,{className:"grid grid-cols-[min-content_2fr]",children:[e.jsxs(_,{gap:.5,className:"h-min items-center",children:[Fe&&e.jsxs(_,{align:"center",className:"tracking-wider select-none whitespace-nowrap",children:[e.jsx(qu,{size:12,className:"cursor-pointer mr-0.5 stroke-[50px] "+((j===0||!(T!=null&&T.length))&&"opacity-40 !cursor-default"),onClick:m}),e.jsxs(l,{type:"mb-0.5",children:[j+1,"/",(T==null?void 0:T.length)||1]}),e.jsx(Ju,{size:12,className:"cursor-pointer ml-0.5 stroke-[50px] "+((j+1===(T==null?void 0:T.length)||!(T!=null&&T.length))&&"opacity-40 !cursor-default"),onClick:ee})]}),ce&&e.jsx(Vc,{currentAudioMessageId:V,messageId:s==null?void 0:s.id,voiceId:F,conversationId:p,characterId:me,defaultPersonaId:H,isAudioLoading:G,handlePreferredVoiceActions:ne,loadMessages:v}),Fe&&e.jsxs(e.Fragment,{children:[e.jsx(gt,{content:"Regenerate Message",placement:"bottom",className:"dark:bg-black",delay:300,closeDelay:0,children:e.jsx(U,{isIconOnly:!0,isDisabled:fe,startContent:e.jsx(Qu,{size:20,className:"opacity-70 hover:opacity-100"}),variant:"primary_smallest",onPress:qe})}),e.jsx(gt,{content:"Continue Message",placement:"bottom",className:"dark:bg-black",delay:300,closeDelay:0,children:e.jsx(U,{isIconOnly:!0,isDisabled:fe,startContent:e.jsx(Xu,{size:20,className:"opacity-70 hover:opacity-100"}),variant:"primary_smallest",onPress:Ve})})]})]}),W&&e.jsx("br",{}),We&&e.jsx(Bd,{messageId:s==null?void 0:s.id,rating:s==null?void 0:s.rating,sendRating:I,messageType:s!=null&&s.image_url?"image":"text"})]}),je?e.jsx(l,{variant:"sm",type:"neutral",children:z==null?void 0:z.message}):""]})]})})})})};br.propTypes={character:L.object,currentConversationId:L.string,message:L.object,user_name:L.string,user_avatar_url:L.string,isTyping:L.oneOfType([L.bool,L.string]),currentIndex:L.number,chatIndex:L.number,allowRegenerate:L.bool,sendRating:L.func,onNext:L.func,onPrev:L.func,onRegenerate:L.func,createConversation:L.func,typingInProcess:L.oneOfType([L.bool,L.string]),setConversation:L.func,onRemovalSelected:L.func,loadMessages:L.func,selected:L.arrayOf(L.string),allowRemove:L.bool,isSelectedForRemoval:L.bool,messageId:L.string,removalMode:L.bool,altMsgs:L.array,scrollReference:L.object,isClonePartial:L.bool,isSelectedForClone:L.bool,onCloneSelected:L.func,conversationLength:L.number,isRemoveMessageLoading:L.bool,isThisAltMessage:L.bool,setErrorCode:L.func,requestAudioPlay:L.func,voiceId:L.string,infoMessage:L.object,currentAudioMessageId:L.string,isAudioLoading:L.bool,handleFlagModalOpen:L.func,defaultPersonaId:L.string};function zd({onClose:t,isOpen:s}){const n=Je();return e.jsx(es,{title:"True Supporter Plan Required",classNames:{title:"text-center pl-[28px]"},open:s,onOpenChange:t,actions:e.jsxs(C,{className:"items-center gap-lg",children:[e.jsx(U,{variant:"secondary",color:"primary_strong",onPress:()=>n(Ae.subscribe),children:"Upgrade"}),e.jsxs(l,{variant:"xs",children:["Find out more details about",e.jsx(K,{className:"text-xs text-link ml-0.5",to:"https://docs.spicychat.ai/premium-features/conversation-images",target:"_blank","aria-label":"conversation-images",children:"Conversation Images"})]})]}),children:e.jsxs("div",{className:"leading-6",children:[e.jsxs("div",{className:"text-center",children:["Our ",e.jsx("span",{className:"font-semibold",children:"Conversation Image"})," feature is currently only available for True Supporters and I'm All In tiers.",e.jsx(S,{y:6}),"To train your private chatbots to send images in conversations, you must upgrade to the ",e.jsx("b",{children:"I'm All In"})," tier."]}),e.jsx(S,{y:5}),e.jsx(C,{className:"items-center",children:e.jsx(te,{width:220,src:"https://ndsc.b-cdn.net/avatars/ec394899b4a44260005a6120cf31fe77.webp?width=220"})}),e.jsx(q,{className:"w-full justify-center"})]})})}zd.propTypes={onClose:L.func,isOpen:L.bool};function Wd({onClose:t,isOpen:s}){return e.jsxs(es,{title:"I'm All In Plan Required",classNames:{title:"text-center pl-[28px]"},open:s,onOpenChange:t,children:[e.jsxs("div",{className:"text-center",children:["To train an untrained public chatbot or your private chatbots to send images in conversations, you must upgrade to the ",e.jsx("b",{children:"I'm All In"})," tier. ",e.jsx("br",{}),e.jsx("br",{})]}),e.jsx("div",{className:"[&>*:first-child]:flex-wrap [&>*:first-child]:justify-center text-center",children:e.jsxs(l,{children:["Find out more details about",e.jsx(K,{className:"ml-1 text-blue-600",to:"https://docs.spicychat.ai/premium-features/conversation-images",target:"_blank","aria-label":"conversation-images",children:"Conversation Images"})]})})]})}Wd.propTypes={onClose:L.func,isOpen:L.bool};function Yd({onClose:t,isOpen:s,character:n}){const{jsonApiService:a,callApi:d,data:o,isLoading:i,error:c}=Ee(),u=()=>{d(a.createResource,"characters/train",{character_id:n.id}).then(j=>{console.log(j)})},m=()=>c?e.jsxs(e.Fragment,{children:["There was an error submitting the training request.",e.jsx("br",{}),e.jsx("br",{}),e.jsx(l,{type:"error",children:c}),e.jsx("br",{})]}):o?e.jsxs(e.Fragment,{children:[e.jsx(l,{children:"Training request submitted successfully."}),e.jsx(S,{y:1}),e.jsxs(l,{children:["There's currently ",o==null?void 0:o.count," requests in the queue."]}),e.jsx(S,{y:1})]}):i?e.jsxs(e.Fragment,{children:[e.jsx(l,{children:"Submitting training request..."}),e.jsx(Se,{}),e.jsx(S,{y:1})]}):(n==null?void 0:n.lora_status)==="pending"?e.jsxs("div",{className:"flex items-center flex-col",children:["This bot is currently in the training queue, and will be trained as soon as possible.",e.jsx("br",{}),e.jsx("br",{}),"Check back in a few hours.",e.jsx(te,{className:"",src:"/Assets/Training.gif",width:150,height:150})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{children:"Conversation Images are made possible by training an AI model on the character's image. That process takes time, so we have to limit the number of training requests."}),e.jsx(S,{y:3}),e.jsx(_,{justify:"center",children:e.jsxs(U,{variant:"secondary",color:"primary_strong",onPress:u,children:["Train ",n==null?void 0:n.name]})}),e.jsx(S,{y:5}),e.jsxs("p",{children:["You can make ",e.jsx("b",{children:"up to 4 training requests per day"}),". Your training request will place this bot in the training queue."]}),e.jsx(S,{y:5})]});return e.jsxs(es,{title:"Chatbot Image Training",classNames:{title:"text-center pl-[28px]"},open:s,onOpenChange:t,className:"text-center",children:[e.jsx(m,{}),e.jsx(l,{variant:"xs",children:"Training individual bots takes up to 10 minutes, depending on the number of bots in the queue, processing can take up to a few days."})]})}Yd.propTypes={onClose:L.func,isOpen:L.bool,character:L.object};const Kd=({generate:t,character:s,isTyping:n,chatContainerRef:a,isCloneLoading:d,isLastMessageImage:o,errorCode:i,handlePreferredVoiceActions:c})=>{let{permissions:u}=he();const m=/iPad|iPhone|iPod/.test(navigator.userAgent),[j,f]=r.useState(""),[h,x]=r.useState(!1),y=r.useRef(null),p=r.useRef(null),[b,g]=r.useState(null),v=j.trim()!=="",[T,w]=r.useState(!1),I=Zu.useMediaQuery({maxWidth:310}),[A,D]=r.useState(24),[O,P]=r.useState(!1),[E,N]=r.useState(!1),R=10,k=i===lt.CODE,G=JSON.parse(Q.getItem(Is))||!1,F=async()=>{if(h)y.current.stop(),x(!1);else try{const{state:W}=await navigator.permissions.query({name:"microphone"});W!=="granted"&&P(!0);const ge=window.SpeechRecognition||window.webkitSpeechRecognition;y.current=new ge,y.current.interimResults=!1,y.current.lang="en-US",y.current.onresult=X=>{X.results[X.results.length-1].isFinal&&f(X.results[X.results.length-1][0].transcript)},y.current.onspeechend=()=>{x(!1)},y.current.onerror=X=>{$c(X.error),x(!1)},y.current.start(),x(!0)}catch(W){console.error("Error while getting permissions : ",W)}},H=async()=>{let W=j;f(""),p.current.value="",await t({type:"text",content:W}),T&&w(!1)},{isDesktop:V}=Ie();r.useEffect(()=>{V&&p.current.focus()},[n,d]),r.useLayoutEffect(()=>{let W=a.current;W&&(W.scrollTop=W.scrollHeight)},[j]);const z=W=>{v&&W.key==="Enter"&&!W.shiftKey&&!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(W.preventDefault(),t({type:"text",content:j}),p.current.value="",f(""))},ne=async()=>{N(!0);const W=await t({type:"text",autopilot:!0});p.current.value="",W&&(f(W),w(!0),p.current.value=W),N(!1)},J=async()=>{N(!0),u!=null&&u.includes(xs.conversation_images)?(s==null?void 0:s.lora_status)==="ready"||u!=null&&u.includes(xs.conversation_images_v2)?await t({type:"image",regenerate:o}):u!=null&&u.includes(xs.image_training)?g("Training"):g("PremiumTraining"):g("PremiumAccess"),N(!1)},$=W=>{if(W)switch(c({action:cs.Stop}),W){case Ea.TOGGLE_RECORDING:{F();break}case Ea.GENERATE_IMAGE:{J();break}case Ea.AUTO_PILOT:{ne();break}}};r.useEffect(()=>{window.innerWidth>1080&&p.current.focus()},[n]);const xe=((s==null?void 0:s.lora_status)=="ready"||(u==null?void 0:u.includes(xs.conversation_images))||(u==null?void 0:u.includes(xs.image_training))||(u==null?void 0:u.includes(xs.conversation_images_v2)))&&!G,de=!(u!=null&&u.includes(xs.conversation_images))||(s==null?void 0:s.lora_status)!=="ready"&&!1;return e.jsxs(e.Fragment,{children:[e.jsxs(_,{className:"w-full gap-3",align:"end",children:[e.jsx(ps,{justify:"start",className:"bg-cardColor grow",children:e.jsx(ds,{className:"overflow-hidden py-0 pb-0",children:e.jsxs(_,{children:[e.jsxs(C,{justify:"center",className:"relative w-full",children:[e.jsx("textarea",{ref:p,disabled:n||d||k,className:"w-full h-[calc(100%-16px)] top-2 left-0 text-[16px] px-3 resize-none bg-transparent absolute leading-6 overflow-hidden ".concat(V&&"custom-scroll"," ").concat(A>=R*24&&"!overflow-auto"),placeholder:"Type your message...",value:j,"aria-label":"Input message",onChange:W=>f(W.target.value),onKeyDown:W=>z(W)}),e.jsx(pa,{variant:"primary_noEffect",color:"secondary",isDisabled:!0,className:"invisible",minRows:1,maxRows:I?1:R,value:j,onHeightChange:W=>D(W)})]}),e.jsx(C,{className:"w-min justify-center",children:n!==Cr.autoPilot?e.jsxs(_,{className:"flex gap-1",children:[j===""&&!m&&e.jsx(U,{isDisabled:k,isIconOnly:!0,disableAnimation:!0,color:h?"primary":"error",onPress:()=>$(Ea.TOGGLE_RECORDING),startContent:h?e.jsx(eh,{size:20,className:"text-blue-600"}):e.jsx(sh,{size:20,className:"text-red-600"}),alt:"Autopilot"}),(j===""||T)&&e.jsxs(e.Fragment,{children:[xe&&j===""&&e.jsx(U,{isIconOnly:!0,onPress:()=>$(Ea.GENERATE_IMAGE),isDisabled:!!n||E,children:e.jsx(th,{opacity:de?.3:1,size:20})}),e.jsx(U,{isIconOnly:!0,onPress:()=>$(Ea.AUTO_PILOT),isDisabled:!!n||k||E,children:e.jsx(ah,{size:20})})]})]}):e.jsx(C,{className:"w-[50px] pb-1",children:e.jsx(Bc,{})})})]})})}),e.jsx(U,{isIconOnly:!1,color:"primary_strong",variant:"tertiary_small",type:"send",onPressStart:v&&H,isDisabled:k||!(n!==Cr.autoPilot&&(j!==""||!nh)),children:e.jsx(el,{className:"rotate-[10deg] relative right-0.5",size:18,color:"#fff"})})]}),e.jsx(zd,{isOpen:b==="PremiumAccess",onClose:()=>g(!1)}),e.jsx(Wd,{isOpen:b==="PremiumTraining",onClose:()=>g(!1)}),b==="Training"&&e.jsx(Yd,{isOpen:b==="Training",onClose:()=>g(!1),character:s}),e.jsx(Hc,{isOpen:O,setIsPermissionsModal:P,permission:"microphone"})]})};Kd.propTypes={initialMessage:ue.PropTypes.string,character:ue.PropTypes.object,generate:ue.PropTypes.func,isTyping:ue.PropTypes.oneOfType([ue.PropTypes.bool,ue.PropTypes.string]),chatContainerRef:ue.PropTypes.object,setChatInputHeight:ue.PropTypes.func,isLastMessageImage:ue.PropTypes.bool,errorCode:ue.PropTypes.string,handlePreferredVoiceActions:ue.PropTypes.func};const Nm=({isVisible:t,setIsUpdateCloneTitleModal:s,handleCloneTitleUpdate:n,conversationLabel:a,characterName:d})=>{const[o,i]=r.useState(a||d),c=()=>{s(!1)},u=()=>{n(o),c()};return e.jsxs(es,{title:"Update title of this conversation",classNames:{title:"text-center pl-[28px]"},open:t,backdrop:"blur",onOpenChange:c,children:[e.jsx(C,{align:"center",children:e.jsx(q,{className:"w-[260px] mt-2",children:e.jsx(ms,{variant:"secondary_bordered",color:"transparent",placeholder:"enter title here...",value:o,onValueChange:i,maxLength:50})})}),e.jsxs(_,{justify:"center",className:"*:w-[150px]",gap:1,children:[e.jsx(U,{variant:"bordered",onPress:c,children:e.jsx(l,{type:"medium",children:"Cancel"})}),e.jsx(U,{color:"primary_strong",onPress:u,isDisabled:!o,children:e.jsx(l,{type:"medium white",children:"Update"})})]})]})};function qd({isOpen:t,setIsOpen:s,permissions:n=[],inferenceModel:a,updateInferenceModel:d}){const{inferenceModels:o}=vs();let i=[];const c=(o||[]).filter(m=>!(m.permission&&!n.includes(m.permission)&&m.hide_unauthorized));c.forEach(m=>{m.permission&&!n.includes(m.permission)&&i.push(m.id)});const u=m=>{d(m.currentKey),s(!1)};return c?e.jsx(es,{title:"Choose Model",classNames:{title:"text-center pl-[28px]"},open:t,onOpenChange:s,actions:e.jsx(C,{align:"end",children:e.jsx(U,{variant:"secondary_short",color:"gray_light",onPress:()=>s(!1),children:"Close"})}),children:e.jsx(Dr,{"aria-label":"Select a model",variant:"flat",disallowEmptySelection:!0,selectionMode:"single",disabledKeys:i,selectedKeys:[a],onSelectionChange:u,color:"primary",children:c.map(m=>e.jsx(Ua,{textValue:m==null?void 0:m.name,shouldHighlightOnFocus:!0,children:e.jsx(zc,{model:m,onClick:()=>s(!1)})},m==null?void 0:m.id))})}):null}qd.propTypes={isOpen:L.bool,setIsOpen:L.func,permissions:L.array,inferenceModel:L.string,updateInferenceModel:L.func};function Jd({onClose:t,isOpen:s}){var N;const[n,a]=r.useState(Q.getItem(Ra)||"default"),[d,o]=r.useState(Q.getItem(Sr)||ks.maxNewTokens),[i,c]=r.useState(Q.getItem(wr)||ks.temperature),[u,m]=r.useState(Q.getItem(Er)||ks.topP),[j,f]=r.useState(Q.getItem(Ar)||ks.topK),{permissions:h}=Qe(),[x,y]=r.useState(!1),[p,b]=r.useState(!1),{inferenceModels:g}=vs();r.useEffect(()=>{g&&g.length>0&&((g||[]).find(R=>(R==null?void 0:R.id)===n)||(a("default"),Q.setItem(Ra,"default")))},[g,n,a]);const v=R=>{a(R),Q.setItem(Ra,R)},T=R=>{o(R),Q.setItem(Sr,R)},w=R=>{c(R),Q.setItem(wr,R)},I=R=>{m(R),Q.setItem(Er,R)},A=R=>{f(R),Q.setItem(Ar,R)},D=()=>{v("default"),T(ks.maxNewTokens),w(ks.temperature),I(ks.topP),A(ks.topK)};let O=h.includes(xs.generation_settings),P=2048,E=(N=(g||[]).find(R=>R.id===n))==null?void 0:N.tokens;return h.includes(xs["3k_context"])&&(P=3072),h.includes(xs["4k_context"])&&(P=4096),h.includes(xs["8k_context"])&&E==="8K"&&(P=8192),h.includes(xs["8k_context"])&&E==="16K"&&(P=16384),e.jsxs(e.Fragment,{children:[e.jsxs(es,{title:"Generation Settings",backdrop:"blur",open:s&&!p,onOpenChange:t,className:"ml-0 mr-0".concat(x?" opacity-0":""),classNames:{title:"text-center pl-[28px]"},actions:e.jsxs(_,{children:[O&&e.jsx(C,{children:e.jsx(U,{variant:"primary_small_short",color:"transparent",startContent:e.jsx(sl,{}),onClick:()=>y(!0),children:"Images Settings"})}),e.jsx(C,{align:"end",children:e.jsx(U,{variant:"secondary_short",color:"gray_light",onClick:D,children:"Reset to Default"})})]}),children:[e.jsxs(_s,{children:[e.jsxs(_,{children:["Context Memory:"," ",e.jsxs(ct,{radius:"sm",size:"sm",className:"ml-2",children:[P/1024,"K"]})]}),e.jsx(_,{children:e.jsxs(l,{variant:"xs",children:["Your current tier and model choice gives you access to"," ",P," tokens of memory."]})}),e.jsx(S,{y:3}),e.jsx(_,{className:"leading-5",children:e.jsx(l,{h4:!0,mNone:!0,children:"Inference Model"})}),e.jsx(S,{y:.5}),e.jsx(zc,{model:(g||[]).find(R=>R.id===n),className:"pt-2",onClick:()=>b(!0),hideTags:!0}),e.jsx(_,{children:e.jsx(C,{align:"start",children:e.jsx(U,{variant:"secondary_short",color:"primary_light",onClick:()=>b(!0),children:"Change Model"})})})]}),e.jsxs(_s,{className:"gap-[3px]",children:[e.jsxs(_,{children:[e.jsxs(C,{children:[e.jsx(_,{className:"leading-5",children:e.jsx(l,{h4:!0,mNone:!0,children:"Inference Settings"})}),e.jsx(_,{children:e.jsx(l,{variant:"smallest",children:"Experiment with different generation settings."})})]}),e.jsx(C,{className:"w-32",children:e.jsx(_,{className:"text-[10.4px] whitespace-nowrap bg-secondary h-min font-bold leading-[18px] px-[4px] rounded-full text-white mt-1 ml-6",children:"True Supporters+"})})]}),e.jsxs(_,{className:"pt-1",children:[e.jsx(C,{justify:"start pr-3",children:e.jsx(l,{variant:"sm",children:"Response Max Tokens"})}),e.jsx(C,{className:"w-6",justify:"end",align:"end",children:e.jsx(l,{type:"primary",children:d})}),e.jsx(C,{className:"w-6",align:"end",children:e.jsx(K,{className:"relative bottom-1.5",target:"_blank",to:"https://docs.spicychat.ai/advanced/model-settings#response-max-tokens","aria-label":"max-max-tokens-info",children:e.jsx(Mt,{size:12,className:"cursor-pointer text-link"})})})]}),O&&e.jsx(_,{className:"pb-1",children:e.jsx(Kt,{size:"sm",minValue:180,maxValue:300,step:1,value:d,onChange:T,"aria-labelledby":"max_new_tokens"})}),e.jsxs(_,{className:"pt-1",children:[e.jsx(C,{justify:"start [&>*:first-child]:mr-3",children:e.jsx(l,{variant:"sm",children:"Temperature"})}),e.jsx(C,{justify:"end",align:"end",children:e.jsx(l,{type:"primary",children:i})}),e.jsx(C,{className:"w-10",align:"end",children:e.jsx(K,{className:"relative bottom-1.5",target:"_blank",to:"https://docs.spicychat.ai/advanced/model-settings#temperature","aria-label":"temperature-info",children:e.jsx(Mt,{size:12,className:"cursor-pointer text-link"})})})]}),O&&e.jsx(_,{className:"pb-1",children:e.jsx(Kt,{size:"sm",minValue:0,maxValue:1.5,step:.01,value:i,onChange:w,"aria-labelledby":"temperature"})}),e.jsxs(_,{className:"pt-2",children:[e.jsx(C,{justify:"start pr-3",children:e.jsx(l,{variant:"sm",children:"Top-P"})}),e.jsx(C,{justify:"end",align:"end",children:e.jsx(l,{type:"primary",children:u})}),e.jsx(C,{className:"w-10",align:"end",children:e.jsx(K,{className:"relative bottom-1.5",target:"_blank",to:"https://docs.spicychat.ai/advanced/model-settings#top-p-nucleus-sampling","aria-label":"top-p-info",children:e.jsx(Mt,{size:12,className:"cursor-pointer text-link"})})})]}),O&&e.jsx(_,{className:"pb-1",children:e.jsx(Kt,{size:"sm",minValue:.01,maxValue:1,step:.01,value:u,onChange:I,"aria-labelledby":"top-p"})}),e.jsxs(_,{className:"pt-2",children:[e.jsx(C,{justify:"start [&>*:first-child]:mr-3",children:e.jsx(l,{variant:"sm",children:"Top-K "})}),e.jsx(C,{justify:"end",align:"end",children:e.jsx(l,{type:"primary",children:j})}),e.jsx(C,{className:"w-10",align:"end",children:e.jsx(K,{className:"relative bottom-1.5",target:"_blank",to:"https://docs.spicychat.ai/advanced/model-settings#top-k","aria-label":"top-k-info",children:e.jsx(Mt,{size:12,className:"cursor-pointer text-link"})})})]}),O&&e.jsx(_,{className:"pb-1",children:e.jsx(Kt,{size:"sm",minValue:1,maxValue:100,step:1,value:j,onChange:A,"aria-labelledby":"top-k"})})]})]}),e.jsx(Uc,{isOpen:x,setIsOpen:y}),e.jsx(qd,{inferenceModel:n,isOpen:p,setIsOpen:b,permissions:h,updateInferenceModel:v})]})}Jd.propTypes={onClose:L.func,isOpen:L.bool};const Qd=({characterId:t,conversationLength:s,onOpenChange:n})=>{const{sendUserInteractionRating:a}=Rn(),[d,o]=r.useState(!1),{userId:i}=he(),{onUserSetCharacterRating:c,characterRatings:u}=fs(),{callApi:m,jsonApiService:j}=Ee(),f=(u==null?void 0:u[t])||null,[h,x]=r.useState(f),y=async w=>{let I=[];if(h!==w){I.push(m(j.createResource,"event",{event_name:"characterRating",character_id:t,rating:w,conversation_length:s}));let D;w===1?D=-1:w===3?D=.5:w===5&&(D=1),I.push(a(i,t,D))}c({characterId:t,rating:w}),x(w),o(!1),await Promise.all(I)},p=h===null?"opacity-95":"opacity-30",b=h&&h!==1?"gray_light":"error",g=h&&h!==3?"gray_light":"success",v=h&&h!==5?"gray_light":"gradient",T=w=>{o(w),n==null||n(w)};return e.jsxs(rh,{placement:"bottom-left",isOpen:d,onOpenChange:T,children:[e.jsx(ih,{children:e.jsx(U,{isIconOnly:!0,startContent:e.jsx(lh,{size:20,className:"".concat(p)})})}),e.jsxs(oh,{className:"px-1 pl-2 max-w-[250px]",children:[e.jsx(_,{children:e.jsx("p",{className:"m-2",children:e.jsx(l,{variant:"sm",children:"Rating chatbots helps personalize recommendations..."})})}),e.jsx(_s,{children:e.jsxs(_,{className:"gap-2 mx-auto",children:[e.jsx(q,{className:"hover:scale-110 transition-transform",children:e.jsx(U,{variant:"secondary_small",color:b,onPress:()=>y(1),children:e.jsx(ch,{size:16})})}),e.jsx(q,{className:"hover:scale-110 transition-transform",children:e.jsx(U,{variant:"secondary_small",color:g,onPress:()=>y(3),children:e.jsx(li,{size:16})})}),e.jsx(q,{className:"hover:scale-110 transition-transform",children:e.jsxs(U,{variant:"secondary_small",color:v,onPress:()=>y(5),children:[e.jsx(li,{size:16}),e.jsx(li,{size:16})]})})]})})]})]})};Qd.propTypes={characterId:L.string,conversationLength:L.number};const Xd=({onNewConversation:t,character:s,onRemoveChat:n,isShowRemove:a,conversationLength:d,setErrorModalVisible:o,setErrorModalMessage:i,isBotAccessAllowed:c,conversation:u,altMsgs:m,conversationId:j,handleCloneTitleUpdate:f,conversationLabel:h,setIsChangePersona:x,setIsNewConversation:y,isDoNotShowChoosePersonaChecked:p,setSelectedPersonaIds:b,selectedPersonaId:g,onUserStartCloning:v,voiceId:T,handlePreferredVoiceActions:w,showVoiceSelectionModal:I,showShare:A,showModelSettings:D,showBlockModal:O,isUpdateCloneTitleModal:P,isShowConversationMemoryModal:E,isShowChangePersonaConfirmationModal:N,handleModalVisibility:R})=>{const k=Je(),{characterId:G}=Ps(),{logEvent:F}=bt(),H=Ds().pathname,V=aa(H),{errorCode:z,errorExtras:ne}=Ee(),{permissions:J,onlyUserId:$,checkIfPermissionExists:xe,userId:de}=he(),W=xe(tl.TTS),{hasAccessToTTS:ge}=Ft(),{likedBots:X,blockedUsers:ae,onUserBlockCreator:Pe,isLoading:Ce,onUserLikebot:ve}=fs(),[Z,me]=r.useState(!1),{status:Ge,bypass:Y}=Ks(re=>re==null?void 0:re.waitingQueue)||{},fe=Ge!=="waiting"||Y===G,Le=(s==null?void 0:s.creator_user_id)===$,Fe=(s==null?void 0:s.visibility)===ot.PUBLIC||(s==null?void 0:s.visibility)===ot.HIDDEN,We=window.location.origin,{isAuthenticated:Be}=Qe(),Ye=ae==null?void 0:ae.includes(s==null?void 0:s.creator_user_id),Ke=JSON.parse(Q.getItem(Is))||!1;let ze=$&&$===s.creator_user_id,B=s.visibility==="public"&&$,ce=u==null?void 0:u.some(re=>re.conversation_id),Ne=!Ke&&ce&&(J==null?void 0:J.some(re=>["memory_manager","conversation_memory_auto"].includes(re)));r.useEffect(()=>{var re;X&&s&&me((re=X||[])==null?void 0:re.includes(s.id))},[X,s]),r.useEffect(()=>{Wc({errorCode:z,errorExtras:ne,setErrorModalMessage:i,setErrorModalVisible:o,setLiked:me})},[z,ne,i,o,me]);const je=async re=>{switch(document.body.style.overflow="",w({action:cs.Stop}),re){case be.START_NEW_CHAT:{!Be||p?t():(b([g]),y(!0),x(!0));break}case be.VIEW_SAVED_CHAT:{k("/chats/".concat(G));break}case be.REMOVE_MESSAGES:{n(!0);break}case be.CHANGE_PERSONA:{j?R(rs.CHANGE_PERSONA_CONFIRMATION_MODAL,!0):x(!0);break}case be.CLONE_CONVERSATION:{v(u.concat(m)),R(rs.CLONE_CONVERSATION_MODAL,!0);break}case be.CHANGE_TITLE:{R(rs.UPDATE_CLONE_TITLE_MODAL,!0);break}case be.CHANGE_VOICE:{R(rs.SHOW_VOICE_SELECION_MODAL,!0),w({action:cs.Get_Voices,errorCB:()=>R(rs.SHOW_VOICE_SELECION_MODAL,!1)});break}case be.LIKE_UNLIKE_BOT:{const De=s==null?void 0:s.id;await ve(De,V);break}case be.VIEW_BOT_PROFILE:{k("/chatbot/".concat(G));break}case be.EDIT_CHATBOT:{k("/chatbot/edit/".concat(G),{replace:!0});break}case be.BLOCK_CREATOR:{R(rs.SHOW_BLOCK_MODAL,!0);break}case be.MANAGE_MEMORIES:{R(rs.CONVERSATION_MEMORY_MODAL,!0);break}case be.GENERATION_SETTINGS:{R(rs.SHOW_MODEL_SETTINGS,!0);break}}},js=async()=>{await Pe(s==null?void 0:s.creator_user_id),k("/")},bs=r.useCallback(()=>{R(rs.SHOW_BLOCK_MODAL,!1)},[R]),ns=()=>{b([g]),x(!0)},M=[{label:"Start New Chat",description:"Current chat will be saved",onPress:()=>je(be.START_NEW_CHAT),isHidden:!fe},{label:"View Saved Chats",onPress:()=>je(be.VIEW_SAVED_CHAT),replace:!0},{label:"Remove Messages",onPress:()=>je(be.REMOVE_MESSAGES),isHidden:!a||!fe||!j},{label:"Change Persona",onPress:()=>je(be.CHANGE_PERSONA),isHidden:!Be},{label:"Clone Conversation",onPress:()=>je(be.CLONE_CONVERSATION),isHidden:!a},{label:"Change Title",onPress:()=>je(be.CHANGE_TITLE),isHidden:!ce},{label:T?"Change Voice Model":"Set Voice Model",onPress:()=>je(be.CHANGE_VOICE),isHidden:!j||!ge||!W},{label:Z?"Remove Bot From Favorite":"Add Bots to Favorite",onPress:()=>je(be.LIKE_UNLIKE_BOT),isHidden:!Be||ze},{label:"View Bot Profile",onPress:()=>{je(be.VIEW_BOT_PROFILE),F(Ss.CHATBOT_DESCRIPTION,{user_id:de,character_id:G,page_name:V})},isHidden:s.definition_visible!==!0},{label:"Edit Chatbot",onPress:()=>je(be.EDIT_CHATBOT),isHidden:!Le,isDivider:!0},{label:"Block Creator",description:"Creator's bot will all be blocked",onPress:()=>je(be.BLOCK_CREATOR),isHidden:Le||!Be},{label:"Manage Memories",onPress:()=>je(be.MANAGE_MEMORIES),isHidden:!Ne,isDivider:!0},{label:"Generation Settings",onPress:()=>je(be.GENERATION_SETTINGS),isHidden:Ke}],ee=()=>{w({action:cs.Stop}),R(rs.SHOW_SHARE,!0),F(Ss.CHATBOT_SHARE,{user_id:de,character_id:G,page_name:V})};return e.jsxs(_,{className:"self-center max-w-[800px] w-full min-h-[40px]",children:[e.jsx(C,{justify:"center",children:e.jsx(Gt,{})}),e.jsx(C,{justify:"center",children:e.jsxs(_,{justify:"end",align:"center",children:[B&&!Ye&&e.jsx(Qd,{characterId:G,conversationLength:d,onOpenChange:()=>w({action:cs.Stop})}),Fe&&!Ye&&!Ke&&e.jsx(U,{isIconOnly:!0,variant:"light",onClick:ee,startContent:e.jsx(dh,{size:18})}),!Ye&&c&&e.jsx(Fr,{listItems:M,placement:"bottom-end",setIsOpen:function(){},children:e.jsx(Cs,{variant:$e.TEXT,icon:oe.MORE_HORIZONTAL,size:as.MEDIUM,"aria-label":"chat-dropdown"})})]})}),e.jsx($r,{visible:A,title:"Share this Chatbot",shareUrl:"".concat(We,"/chat/").concat(G),instructions:"This URL points to this chatbot. Your chats remain private.",shareMessage:"Chatting with ".concat(s.name," on SpicyChat.AI! ").concat(We,"/chat/").concat(G),setShowShare:re=>R(rs.SHOW_SHARE,re)}),e.jsx(Jd,{isOpen:D,onClose:()=>R(rs.SHOW_MODEL_SETTINGS,!1)}),e.jsx(Xs,{heading:"Block Creator",actionButtonColor:"error",actionButtonText:"Block",discardButtonText:"Cancel",onUserConfirmation:js,isVisible:O,isLoading:Ce,handleClose:bs,confirmationMessage:ol+(s==null?void 0:s.creator_username)}),P&&e.jsx(Nm,{isVisible:P,setIsUpdateCloneTitleModal:re=>R(rs.UPDATE_CLONE_TITLE_MODAL,re),handleCloneTitleUpdate:f,conversationLabel:h,characterName:s==null?void 0:s.name}),E&&e.jsx(Yc,{conversationId:j,isOpen:E,setIsOpen:re=>R(rs.CONVERSATION_MEMORY_MODAL,re)}),N&&e.jsx(Xs,{heading:"Change Persona",confirmationMessage:e.jsxs(e.Fragment,{children:[e.jsx(l,{children:"Changing persona in the middle of a conversation will not update references to previous persona name from messages or memories."}),e.jsx(S,{y:2}),e.jsx(l,{children:"Are you sure you want to proceed?"})]}),isVisible:N,onUserConfirmation:ns,handleClose:()=>R(rs.CHANGE_PERSONA_CONFIRMATION_MODAL,!1)}),I&&e.jsx(Vc,{voiceId:T,conversationId:j,showVoiceSelectionModal:I,setShowVoiceSelectionModal:re=>R(rs.SHOW_VOICE_SELECION_MODAL,re),voiceSelectionMode:!0,handlePreferredVoiceActions:w})]})};Xd.propTypes={onNewConversation:ue.PropTypes.func,character:ue.PropTypes.object,onRemoveChat:ue.PropTypes.func,isShowRemove:ue.PropTypes.bool,conversationLength:ue.PropTypes.number,setErrorModalVisible:ue.PropTypes.func,setErrorModalMessage:ue.PropTypes.func,isBotAccessAllowed:ue.PropTypes.bool,onCloneConversation:ue.PropTypes.func,conversation:ue.PropTypes.array,conversationId:ue.PropTypes.string,onClonePartial:ue.PropTypes.func,isClonePartialSuccess:ue.PropTypes.bool,setIsClonePartialSuccess:ue.PropTypes.func,cloneTitle:ue.PropTypes.string,setCloneTitle:ue.PropTypes.func,handleCloneTitleUpdate:ue.PropTypes.func,setIsCloneAllLoading:ue.PropTypes.func,conversationLabel:ue.PropTypes.string,altMsgs:ue.PropTypes.array,voiceId:ue.PropTypes.string,handlePreferredVoiceActions:ue.PropTypes.func,setIsChangePersona:ue.PropTypes.func,setIsNewConversation:ue.PropTypes.func,isDoNotShowChoosePersonaChecked:ue.PropTypes.bool,setSelectedPersonaIds:ue.PropTypes.func,selectedPersonaId:ue.PropTypes.string,onUserStartCloning:ue.PropTypes.func,showVoiceSelectionModal:ue.PropTypes.bool,showShare:ue.PropTypes.bool,showModelSettings:ue.PropTypes.bool,showBlockModal:ue.PropTypes.bool,isUpdateCloneTitleModal:ue.PropTypes.bool,isShowConversationMemoryModal:ue.PropTypes.bool,isShowChangePersonaConfirmationModal:ue.PropTypes.bool,handleModalVisibility:ue.PropTypes.func};const pt={INVALID_ACCESS:{ERROR:"invalidAccess",MESSAGE:"You are not allowed to chat with this character. It's either private or deleted."},BLOCKED_BOT_CREATOR:{ERROR:"blockedBotCreator",MESSAGE:"You have blocked the creator of this character. Please unblock creator to use this character."},IMAGE_PROMPT_UNDERAGE:{ERROR:"imagePromptUnderage",MESSAGE:"The image prompt might contain references to underage context, please consider making changes and try again."},IMAGE_CONTENT_GUIDELINES:{ERROR:"imageContentGuidelines",MESSAGE:"Sorry, we cannot display this image as it may violate our content guidelines."},SOCKET_ERROR:{ERROR:uh.ERROR},DEFAULT:{MESSAGE:"There was an error processing the last request."}},Cm=100,Sm=10,yr=({error:t,errorCode:s,errorWait:n,errorWaitDelay:a,errorResubmitMessage:d,resetError:o,invalidUrlError:i,character:c,errorMessage:u})=>{const{isAuthenticated:m,register:j}=Qe(),[f,h]=r.useState(!1),[x,y]=r.useState(!1),p=JSON.parse(Q.getItem(Is))||!1,{applicationName:b,branding:g}=vs(),v=p?g==null?void 0:g.siteIcon:g==null?void 0:g.logo,[T,w]=r.useState(b),[I,A]=r.useState(""),[D,O]=r.useState(!1),[P,E]=r.useState(!0),{onUserUnblockCreator:N,isLoading:R}=fs(),{status:k}=he(),G=k===ma.ACTIVE,{isMobile:F}=Ie(),H=async()=>{await N(c==null?void 0:c.creator_user_id)},V=()=>{O(!1)},z=()=>{o(),d()};return r.useEffect(()=>{if(console.log("Error code is : ",s),Tr[s])A(Tr[s]),E(!0);else if(s===lt.CODE)w(lt.TITLE),m?A(G?lt.CHAT.SUBSCRIBERS:lt.CHAT.FREE):(A(lt.CHAT.GUEST),y(!0));else if(t)if(i)A((i==null?void 0:i.message)||i),h(!1);else switch(console.log("Error si asdsad : ",t),t){case pt.INVALID_ACCESS.ERROR:A(pt.INVALID_ACCESS.MESSAGE),h(!1),E(!1);break;case pt.BLOCKED_BOT_CREATOR.ERROR:A(pt.BLOCKED_BOT_CREATOR.MESSAGE),h(!1),E(!1);break;case pt.IMAGE_CONTENT_GUIDELINES.ERROR:A(pt.IMAGE_CONTENT_GUIDELINES.MESSAGE),h(!1),E(!0);break;case pt.IMAGE_PROMPT_UNDERAGE.ERROR:A(pt.IMAGE_PROMPT_UNDERAGE.MESSAGE),h(!1),E(!0);break;case pt.SOCKET_ERROR.ERROR:A(u),h(!1),E(!0);break;default:A("".concat(pt.DEFAULT.MESSAGE," (").concat(t,")")),h(!0),E(!1);break}},[t,i,s]),e.jsxs(e.Fragment,{children:[e.jsx(S,{y:.2}),e.jsx(ps,{className:"sticky bottom-0 bg-[#2c1f2122] dark:bg-[#2c1f21] max-w-[800px] w-full self-center mb-1 shadow-[0_12px_24px_rgb(104,112,118,0.15),0_12px_14px_rgb(104,112,118,0.1)] dark:shadow-md border-1 border-solid pr-2 border-[#FC6666]",children:e.jsxs(ds,{className:"pb-[8px] pt-[8px] pl-[0px] pr-[2px] w-full",children:[e.jsxs(_,{children:[e.jsx(C,{className:"w-max ml-[4px] mt-[5px]",children:e.jsx(_,{children:e.jsx(Bt,{src:v,radius:"lg",classNames:{base:"w-16 h-16 ".concat(p?"p-2 bg-black":"invert p-3.5 bg-white")}})})}),e.jsx(C,{className:"pl-[6px] [overflow-wrap:anywhere] grow",children:e.jsxs("div",{className:"w-full  justify-between flex ".concat(F?"flex-col":"flex-row items-center"),children:[e.jsxs("div",{className:"w-full justify-between",children:[e.jsx(_,{className:"w-full justify-between",children:e.jsx(C,{children:e.jsx(_,{children:e.jsx(l,{b:!0,children:T})})})}),e.jsx(_,{className:"[&>*:first-child]:block [&>*:first-child]:text-base mt-2",children:e.jsx(l,{children:I})}),t===pt.BLOCKED_BOT_CREATOR.ERROR&&e.jsx(_,{justify:"center",children:e.jsx(U,{size:"sm",color:"primary_light",variant:"secondary",className:"mt-2",onClick:()=>O(!0),children:"Unblock Creator"})}),f&&n>0&&e.jsxs(e.Fragment,{children:[e.jsx(_,{justify:"center",children:e.jsxs(l,{variant:"xs",children:["You can try again in ",Math.round(n)," seconds."]})}),e.jsx(S,{y:.2}),e.jsx(_,{justify:"center",children:e.jsx(sc,{size:"sm",value:(a-n)*(Cm/a)+Sm,max:a})})]}),f?e.jsx(_,{justify:"center",className:"pt-[10px]",children:e.jsx(U,{variant:"secondary_short",onClick:z,isDisabled:n>0,children:"Resubmit"})}):e.jsx(e.Fragment,{})]}),e.jsx("div",{children:x?e.jsx(e.Fragment,{children:e.jsx(C,{justify:"center",className:"pt-[10px] max-w-40",children:e.jsx(U,{variant:"primary",color:"primary_strong",onClick:j,children:"Sign Up Free"})})}):e.jsx(e.Fragment,{})})]})})]}),P&&e.jsx(Da,{size:24,className:"cursor-pointer absolute right-0",onClick:o})]})}),e.jsx(Xs,{heading:"Unblock Creator",isVisible:D,confirmationMessage:hl+(c==null?void 0:c.creator_username),handleClose:V,onUserConfirmation:H,isLoading:R})]})};yr.propTypes={error:L.string,errorCode:L.string,errorWait:L.number,errorWaitDelay:L.number,errorResubmitMessage:L.func,invalidUrlError:L.object,character:L.object,resetError:L.func};var Zd={VITE_MEGABRAIN_TOKEN:"spicychat-93j0wse7sef",VITE_MEGABRAIN_MIN_CONV_LENGTH:"10"};const wm=Zd.VITE_MEGABRAIN_TOKEN,Em=Zd.VITE_MEGABRAIN_MIN_CONV_LENGTH,fl=({character:t,conversation_id:s,messages:n,isLoading:a,children:d})=>{const{userId:o,permissions:i}=he(),{callApi:c,jsonApiService:u}=Ee(),[m,j]=Yt.useState(""),f=async p=>{const g=new TextEncoder().encode(p),v=await crypto.subtle.digest("SHA-1",g);return Array.from(new Uint8Array(v)).map(I=>I.toString(16).padStart(2,"0")).join("")},h=(p,b)=>{let g={event_name:p,character_id:t==null?void 0:t.id,conversation_id:s,...b};c(u.createResource,"event",g)};let x=!1;i&&(x=i.includes("display_ads")&&n.length>Em);const y=n==null?void 0:n.slice(-10).map(p=>({role:p.role==="bot"?"assistant":"user",content:p.content,createdAt:p.createdAt,id:p.id}));return r.useEffect(()=>{o&&f(o).then(p=>{j(p)})},[o]),o?e.jsx(e.Fragment,{children:e.jsx(tc,{visitorId:m,userId:o,publisherToken:wm,isLoading:a,messages:y,isDisabled:!x,conversationId:s,character:{name:t==null?void 0:t.name,persona:t==null?void 0:t.persona,greeting:t==null?void 0:t.greeting,tags:t==null?void 0:t.tags,is_nsfw:t==null?void 0:t.is_nsfw,title:t==null?void 0:t.title},onAdView:({id:p,code:b,messageId:g,content:v})=>h("ads_megabrain_view",{ad_id:p,code:b,message_id:g,content:v}),onAdClick:({id:p,code:b,messageId:g,content:v})=>h("ads_megabrain_click",{ad_id:p,code:b,message_id:g,content:v}),children:d})}):e.jsx(e.Fragment,{children:d})};fl.defaultProps={messages:[],isLoading:!1};fl.propTypes={messages:L.array,isLoading:L.bool,character:L.object.isRequired,conversation_id:L.string.isRequired};function Am(t){const{isOpen:s,handleFlagMessage:n,onClose:a,isLoading:d,progressStep:o,setProgressStep:i}=t,[c,u]=r.useState(""),[m,j]=r.useState(""),f=o===Re.SELECT_OPTION,h=()=>o===Re.ADD_COMMENT&&!(m!=null&&m.trim())?"Skip":o===Re.DONE?"Done":o===Re.ERROR?"Close":"Next",x=v=>{i(Re.OPTION_SELECTED),u(v)},y=()=>{j(""),i(Re.SELECT_OPTION),u(""),a()},p=v=>{j(v.target.value)},b=()=>{switch(o){case Re.OPTION_SELECTED:return i(Re.ADD_COMMENT);case Re.ADD_COMMENT:return n({comment:m,reason:c});case Re.DONE:case Re.ERROR:return y()}},g=()=>{switch(o){case Re.SELECT_OPTION:case Re.OPTION_SELECTED:return e.jsxs(e.Fragment,{children:[e.jsx(l,{b:!0,children:"Why are you reporting this message?"}),e.jsx(l,{type:"opacity-40",children:"This won't be shared with anyone."}),e.jsx(S,{y:6}),e.jsx(En,{value:c,onValueChange:x,classNames:{base:"grow",wrapper:"gap-5 grow justify-between py-2",description:"!border-white"},children:ac.map((v,T)=>e.jsx(ua,{value:v==null?void 0:v.value,classNames:{labelWrapper:"w-full",base:"flex-row-reverse min-w-full px-0",wrapper:"border-2 border-white border-opacity-20"},children:v==null?void 0:v.label},T))})]});case Re.ADD_COMMENT:return e.jsxs(e.Fragment,{children:[e.jsx(l,{b:!0,children:"Can you add more context?"}),e.jsx(l,{type:"opacity-40",children:"This is included in the report to help solve this issue"}),e.jsx(S,{y:6}),e.jsx(pa,{variant:"primary_noEffect",color:"transparent",value:m,onChange:p,minRows:6})]});case Re.DONE:return e.jsx(e.Fragment,{children:e.jsx(l,{type:"opacity-40",children:"Thanks for submitting your report and feedback! The reported message will be removed promptly."})});case Re.ERROR:return e.jsxs(C,{className:"grow items-center justify-center",children:[e.jsx(hh,{size:70,className:"text-blue-600"}),e.jsx(l,{b:!0,variant:"regular",children:"Something went wrong"}),e.jsx(l,{type:"opacity-40",variant:"regular",children:"Please try again"})]});default:return null}};return e.jsxs(es,{title:"Report",open:s,onOpenChange:y,className:"min-h-[365px]",children:[e.jsx(C,{className:"flex-grow",children:g()}),e.jsx("div",{className:"flex *:grow",children:e.jsx(U,{isLoading:d,color:"primary_strong",variant:"primary_large",isDisabled:f,onClick:b,children:e.jsx(l,{type:"white medium",variant:"md",children:h()})})})]})}const Tm=({children:t})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs opacity-60 pl-[4px] pt-[8px] pb-[12px]",children:"Advertisement"}),e.jsx(ps,{className:"bg-cardColor max-w-[800px] w-full self-center mb-1 shadow-[0_12px_24px_rgb(104,112,118,0.15),0_12px_14px_rgb(104,112,118,0.1)] dark:shadow-md border-1 border-solid pr-2 border-transparent",children:e.jsx(ds,{className:"pb-[8px] pt-[8px] pl-[8px] pr-[8px] w-full",children:t})})]}),Im=({children:t})=>e.jsx(e.Fragment,{children:e.jsx(ps,{className:"bg-cardColor max-w-[800px] w-full self-center mb-1 shadow-[0_12px_24px_rgb(104,112,118,0.15),0_12px_14px_rgb(104,112,118,0.1)] dark:shadow-md border-1 border-solid pr-2 border-transparent",children:e.jsx(ds,{className:"pb-[8px] pt-[8px] pl-[0px] pr-[2px] w-full",children:e.jsxs(_,{children:[e.jsx(C,{className:"w-max ml-[4px] mt-[5px]",children:e.jsx(Bt,{radius:"lg",fallback:e.jsx(xh,{size:48,className:""}),classNames:{base:"w-16 h-16 bg-white dark:bg-black",name:"font-medium"}})}),e.jsx(C,{className:"pl-[6px] [overflow-wrap:anywhere] grow",children:t})]})})})}),Pm=({messageId:t,scrollReference:s})=>{const[n,a]=r.useState(),[d,o]=r.useState("adbot"),i=r.useRef(null),[{width:c,height:u},m]=r.useState({width:void 0,height:void 0}),j=nc(m,200);rc({ref:i,onResize:j}),r.useEffect(()=>{if(u&&s){let h=s.current;h&&(h.scrollTop=h.scrollHeight-h.clientHeight)}},[u,s]),r.useEffect(()=>{},[t]);const f=d==="banner"?Tm:Im;return e.jsx("div",{ref:i,children:e.jsx(ic,{code:"spicyChatInlineAd",messageId:t,wrapper:h=>e.jsx(f,{children:h})})})},cn={cloneAll:"Clone Fully",clonePartial:"Clone Partially",btnClone:"Clone",btnCancel:"Cancel",cloneChatTitle:"Title your Conversation"},Rm=({display:t,onClose:s,onUserConfirmCloneChoice:n})=>{const[a,d]=r.useState(""),[o,i]=r.useState(qt.PARTIAL),c=()=>{s()},u=()=>{n(qt.CANCEL,a),c()},m=()=>{n(o,a)};return e.jsxs(es,{title:"Clone Conversation",classNames:{title:"text-center pl-[28px]"},backdrop:"blur",open:t,onOpenChange:c,children:[e.jsx(_,{justify:"center",className:"text-center",children:e.jsxs(En,{orientation:"horizontal",value:o,onValueChange:i,className:"flex *:gap-8",children:[e.jsx(ua,{value:qt.PARTIAL,children:cn.clonePartial}),e.jsx(ua,{value:qt.FULL,children:cn.cloneAll})]})}),e.jsxs(C,{justify:"center",align:"center",className:"p-[10px] max-w-[440px] mx-[10px] text-center gap-6",children:[e.jsxs(q,{className:"flex justify-center",children:[e.jsx("span",{className:"text-red-600",children:"*"}),e.jsx(l,{b:!0,type:"nutreal",variant:"regular",mNone:void 0,children:cn.cloneChatTitle})]}),e.jsx(q,{className:"w-[300px] max-w-full self-center",children:e.jsx(ms,{variant:"secondary_bordered",color:"primary",placeholder:"Add a title for your cloned conversation",classNames:{input:"text-center"},value:a,onValueChange:d,maxLength:50})})]}),e.jsx(_,{justify:"center",children:e.jsxs(q,{className:"*:max-w-[150px] *:grow w-full justify-center",gap:1,children:[e.jsx(U,{variant:"bordered",onPress:u,children:cn.btnCancel}),e.jsx(U,{variant:"primary",color:"primary_strong",onPress:m,isDisabled:!(a!=null&&a.trim()),children:cn.btnClone})]})})]})},Om=()=>{const{applicationName:t}=vs(),{isMobile:s}=Ie(),n="".concat(t," is powered by AI for creative storytelling and roleplay. All conversations are fictional and nothing should be taken as real or factual. Enjoy responsibly!"),d=s?"This is an AI chatbot. All conversations are fictional and for entertainment purposes only!":n;return e.jsx(_,{className:"py-2.5 max-mob:px-2.5 max my-4 w-[580px] justify-center max-w-full mx-auto",children:e.jsx(l,{type:"chatDisclaimer",variant:"xs",children:d})})},km=()=>{const{permissions:t}=he(),s=t==null?void 0:t.includes("skip_waiting_room");return e.jsx(_,{justify:"center",className:"text-center rounded-lg border-white",children:e.jsx("div",{className:"text-wrap p-2 mb-2 border-2",children:e.jsxs(l,{variant:"xs",type:"neutral",children:["Messages before this point are no longer factored into text generation.",!s&&e.jsxs(e.Fragment,{children:[" Consider ",e.jsx(K,{to:Ae.subscribe,className:"underline",children:"subscribing"})," to upgrade your chatbots memory."]})]})})})},uo=5,Lm=()=>{var Qn,ri,Xn;const{characterId:t,conversationId:s}=Ps(),{personas:n,selectedPersona:a,setSelectedPersonaIds:d,onUserConfirmChangePersonaInConversation:o,setPersonaToChat:i,loading:c,onUserConfirmSelectedPersonaToChat:u,getDefaultPersona:m,resetSelectedPersonaIds:j,resetSelectedPersonaToChat:f,personaError:h,defaultPersonaId:x,selectedPersonaIds:y}=Va(),{isAuthenticated:p}=Qe(),{name:b="Honey",avatar_url:g}=a||m()||{},v=Q.getItem(Kc)==="true",{status:T,bypass:w,position:I,time_left:A}=Ks(ye=>{const Te=ye;return Te==null?void 0:Te.waitingQueue})||{},[D,O]=r.useState(!1),{character:P,conversation:E,currentConversationId:N,createConversation:R,isTyping:k,generate:G,altMsgs:F,altMsgPosition:H,changeAltMsgPosition:V,onNewConversation:z,error:ne,errorCode:J,resetError:$,removeMesages:xe,isRemoveMessageLoading:de,removeMessageIdx:W,setRemoveMessageIdx:ge,removalMode:X,setRemovalMode:ae,setConversation:Pe,setAltMsgs:Ce,loadMessages:ve,lastMessageId:Z,isLastMessageIdDeleted:me,cappedMessageId:Ge,loadMoreMessages:Y,isLoadingMessages:fe,sendRating:Le,invalidUrlError:Fe,handleCloneTitleUpdate:We,isCloneUpdateTitleLoading:Be,conversationLabel:Ye,setConversationLabel:Ke,isChoosePersona:ze,setIsChoosePersona:B,messagesLoading:ce,displayError:Ne,displaySuccess:je,handleLoadedMessages:js,voiceId:bs,setVoiceId:ns}=qc({characterId:t,conversationId:s,name:b,selectedPersona:a,personas:n,setPersonaToChat:i,isDoNotShowChoosePersonaChecked:v,getDefaultPersona:m,defaultPersonaId:x,setSelectedPersonaIds:d,setIsNewConversation:O}),{handlePreferredVoiceActions:M,rateVoiceQuality:ee,currentAudioMessageId:re,isAudioLoading:De,rateVoiceModal:qe,handleRateVoiceQualityModalClose:Ve,setInfoMessageForRatingVoice:ls,infoMessage:we,loadingFromPreferredVoice:Es,errorEvent:Xe,errorMessage:dt,resetSocketErrors:et}=Jc({voiceId:bs,setVoiceId:ns,conversationId:N,handleLoadedMessages:js,displaySuccess:je,displayError:Ne}),st=Je(),ys=ta(),[tt,qs]=r.useState(-1),[us,Gs]=r.useState(""),Vs=r.useRef(null),[ut,Vt]=r.useState(),[Ht,yt]=r.useState(!0),[At,Tt]=r.useState(!1),[_t,It]=r.useState(!1),[Pt,Rt]=r.useState(!1),[at,nt]=r.useState(!1),[vt,hs]=r.useState(!1),[Ot,ie]=r.useState(!1),[pe,os]=r.useState(!1),[Hs,ht]=r.useState(!0),[Js,ss]=r.useState(!1),Us=ne||us||Xe,xt=Hs&&E,$s=Js&&E,ra=Hr(window.location.hostname),[Mn,ga]=r.useState(!1),[Dn,bl]=r.useState(""),{blockedUsers:Ya}=fs(),{isDesktop:Jr}=Ie(),Un=JSON.parse(Q.getItem(Is))||!1,[ia,Ka]=r.useState(!1),{onFlagMessageHandler:Fn,success:Bn,isLoading:Qr,error:fa,resetErrorAndSuccess:Xr,progressStep:Gn,setProgressStep:kt}=lc(),[Vn,Hn]=r.useState(!1),[Rs,qa]=r.useState({}),{onUserCancelCloning:Zr,onUserStartCloning:$n,onUserSelectedCloningType:ei,isCloningConversationInProgress:ja,onResetCloneForNextUse:si,clonedConversationInfo:zn,cloningConversationError:Ja,isUserChoiceLastMessageRequired:ba,onUserConfirmPartialCloning:Wn,shouldCurrentMessageBeSelectedForCloning:Fs,setLastMsgIndexForPartialCloning:ya,selectedMessageIndex:ti}=oc(),[Qa,Yn]=r.useState(!1);r.useEffect(()=>{h!=null&&h.error_type&&Ne(xl[h==null?void 0:h.error_type])},[h,ys]),r.useLayoutEffect(()=>{let ye=Vs.current;ye&&(ye.scrollTop=ye.scrollHeight,Vt($s?ye.scrollTop:ye.scrollHeight-ye.clientHeight)),(E==null?void 0:E.length)>0&&setTimeout(()=>{ht(!1)},1e3)},[xt,k,Js]),r.useLayoutEffect(()=>{let ye=Vs.current;ye&&(ye.scrollTop=ye.scrollHeight-ye.clientHeight-ut),Js&&setTimeout(()=>{ss(!1)},1e3)},[$s]),r.useEffect(()=>{let ye;return ne&&tt===-1?qs(uo):ne&&tt>0&&(ye=setTimeout(()=>{qs(Te=>Te-.5)},500)),ne||qs(-1),()=>{clearTimeout(ye)}},[ne,tt]),r.useEffect(()=>()=>{D&&O(!1),j(),f()},[]),r.useEffect(()=>(Bn&&(je(),Rs!=null&&Rs.isAltMsg?(Ce(ye=>ye.filter(Te=>Te.id!==(Rs==null?void 0:Rs.id))),V(-1)):Pe(ye=>ye.filter(Te=>Te.id!==(Rs==null?void 0:Rs.id)))),fa&&Ne(),()=>Xr()),[Bn,fa]),r.useEffect(()=>{const{character_id:ye,id:Te}=zn||{};(Te||Ja)&&(Te&&(je(),st("/chat/".concat(ye,"/").concat(Te))),Ja&&Ne(),si(),ya(-1))},[Ja,zn]);const _a=T!=="waiting"||w===t||ra.isPartner||t===Ir,va=P&&((Qn=Object.keys(P))==null?void 0:Qn.length)>0&&!Fe,Xa=Ya==null?void 0:Ya.includes(P==null?void 0:P.creator_user_id),$t=ye=>{M({action:cs.Stop}),V(ye)},zt=()=>{X?(ae(!1),ge(null)):Zr()},ai=()=>{Wn()},Za=()=>{et(),$(),Gs("")},en=()=>{Za(),xe()},ni=ye=>{const{comment:Te,reason:nn}=ye;let ii={message_id:Rs==null?void 0:Rs.id,conversation_id:N,character_id:t,label:nn,comment:Te};Fn(ii)},Na=(ye,Te)=>{qa({id:ye,isAltMsg:Te}),Hn(!0)},Kn=()=>{qa({}),Hn(!1)},sn=!!(F!=null&&F.length&&((ri=F[0])!=null&&ri.image_url)||E!=null&&E.length&&((Xn=E[(E==null?void 0:E.length)-1])!=null&&Xn.image_url)),tn=()=>{Yn(!1)},qn=(ye,Te)=>{ei(ye,Te),tn()},Ca=(ye,Te)=>{switch(ye){case rs.SHOW_VOICE_SELECION_MODAL:Tt(Te);break;case rs.SHOW_SHARE:It(Te);break;case rs.SHOW_MODEL_SETTINGS:Rt(Te);break;case rs.SHOW_BLOCK_MODAL:nt(Te);break;case rs.UPDATE_CLONE_TITLE_MODAL:hs(Te);break;case rs.CONVERSATION_MEMORY_MODAL:ie(Te);break;case rs.CHANGE_PERSONA_CONFIRMATION_MODAL:os(Te);break;case rs.CLONE_CONVERSATION_MODAL:Yn(Te);break}},an=()=>X||Mn||Vn||ia||D||Qa||vt||Ot||pe||At||_t||Pt||at||qe.isVisible,Jn=ye=>{an()||document.activeElement.tagName==="TEXTAREA"||document.activeElement.tagName==="INPUT"||(ye.key==="ArrowLeft"?$t(-1):ye.key==="ArrowRight"&&$t(1))};r.useEffect(()=>(window.addEventListener("keydown",Jn),()=>{window.removeEventListener("keydown",Jn)}),[F.length,an]);const la=(E==null?void 0:E.length)>2&&!(F!=null&&F.length)&&!ra.isPartner&&k!=="bot";return ce||!P||p&&!(n!=null&&n.length)?e.jsx(Se,{className:"absolute top-1/2 left-1/2 scale-[1.5]"}):p&&(ze||ia)?e.jsx(Qc,{personas:n,selectedPersona:a,character:P,setIsChoosePersona:B,setIsChangePersona:Ka,isDoNotShow:v,setSelectedPersonaIds:d,onUserConfirmChangePersonaInConversation:o,conversationId:N,loading:c,isChangePersona:ia,onUserConfirmSelectedPersonaToChat:u,onNewConversation:z,setIsNewConversation:O,isNewConversation:D,resetSelectedPersonaIds:j,defaultPersonaId:x,selectedPersonaIds:y,handlePreferredVoiceActions:M}):e.jsxs(fl,{character:P,conversation_id:N,isLoading:k==="bot",messages:E,children:[e.jsxs("div",{className:"flex flex-col top-0 left-0 w-full h-full grow",children:[!va&&e.jsx(cc,{children:e.jsx("meta",{name:"prerender-status-code",content:"404"})}),e.jsx(Ue,{index:"ChatPage",properties:{character:P},ogImage:gs(P==null?void 0:P.avatar_url,{preset:"avatar500x600"})}),e.jsx(_,{className:"w-full bg-background py-0 px-2 top-0 z-[2] items-center flex-col",children:e.jsxs(C,{className:"max-w-[800px] w-full",children:[P.id===Ir&&T==="waiting"&&e.jsx(Xc,{}),e.jsx(Xd,{onNewConversation:z,character:P,onRemoveChat:()=>ae(!0),isShowRemove:(E==null?void 0:E.length)>1,conversationLength:E==null?void 0:E.length,setErrorModalVisible:ga,setErrorModalMessage:bl,isBotAccessAllowed:va,conversation:E,altMsgs:F,conversationId:N,handleCloneTitleUpdate:We,conversationLabel:Ye,setConversationLabel:Ke,setIsChangePersona:Ka,setIsNewConversation:O,selectedPersonaId:a==null?void 0:a.id,setSelectedPersonaIds:d,isDoNotShowChoosePersonaChecked:v,onUserStartCloning:$n,voiceId:bs,handlePreferredVoiceActions:M,isShowChangePersonaConfirmationModal:pe,isShowConversationMemoryModal:Ot,isUpdateCloneTitleModal:vt,showBlockModal:at,showModelSettings:Pt,showShare:_t,showVoiceSelectionModal:At,handleModalVisibility:Ca})]})}),e.jsx(C,{className:"grow relative",children:e.jsxs("div",{className:"grow flex flex-col w-full left-0 items-center absolute h-full overflow-auto "+(Jr&&"custom-scroll"),ref:Vs,children:[e.jsxs("div",{className:"flex-shrink-0 max-w-[800px] py-0 px-2 w-full",children:[(Z||me)&&e.jsxs(_,{justify:"center",className:"pb-0",children:[!fe&&e.jsx(U,{variant:"secondary_short",color:"neutral",onPress:Y,onClick:()=>{ss(!0)},children:e.jsx(l,{variant:"xs",children:"Load Previous Messages"})}),fe&&e.jsx(Se,{size:"sm"})]}),e.jsx(Om,{}),E==null?void 0:E.map((ye,Te)=>e.jsxs("div",{children:[!Un&&(E==null?void 0:E.length)>Zc&&Ge===(ye==null?void 0:ye.id)&&e.jsx(km,{}),e.jsx(_,{children:e.jsxs(C,{children:[e.jsx(br,{character:P,setErrorCode:Gs,message:ye,scrollReference:Vs,user_name:b,user_avatar_url:g,sendRating:Le,allowRegenerate:Te>0&&(E==null?void 0:E.length)-1===Te&&(ye==null?void 0:ye.role)==="bot"&&!(F!=null&&F.length),generateMessage:G,onRegenerate:G,typingInProcess:k,onRemovalSelected:ge,isSelectedForRemoval:Te>=W&&W!==null,setConversation:Pe,removalMode:X,isRemoveMessageLoading:de,loadMessages:ve,conversationLength:E==null?void 0:E.length,currentConversationId:N,createConversation:R,chatIndex:Te,isClonePartial:ba,isSelectedForClone:Fs(Te),onCloneSelected:ya,handleFlagModalOpen:Na,isAudioLoading:De,currentAudioMessageId:re,showAds:la&&Te===(E==null?void 0:E.length)-1&&(ye==null?void 0:ye.role)==="bot",voiceId:bs,infoMessage:we,defaultPersonaId:(a==null?void 0:a.id)||x,handlePreferredVoiceActions:M}),la&&Te===(E==null?void 0:E.length)-1&&ye.role==="bot"&&e.jsx(Pm,{messageId:ye.id,scrollReference:Vs})]})}),e.jsx(S,{y:.2})]},Te)),(F==null?void 0:F.length)>0&&!k&&e.jsxs(e.Fragment,{children:[e.jsx(br,{character:P,message:F[H],setErrorCode:Gs,user_name:b,scrollReference:Vs,user_avatar_url:g,sendRating:Le,isSelectedForRemoval:W!=null,allowRegenerate:!0,onRegenerate:G,typingInProcess:k,onNext:()=>$t(1),onPrev:()=>$t(-1),currentIndex:H,disableNext:H===(F==null?void 0:F.length)-1,setConversation:Ce,currentConversationId:N,onRemovalSelected:ge,conversationLength:E==null?void 0:E.length,removalMode:X,isRemoveMessageLoading:de,isThisAltMessage:!0,altMsgs:F,isAudioLoading:De,currentAudioMessageId:re,chatIndex:(E==null?void 0:E.length)+(F==null?void 0:F.length)-1,isClonePartial:ba,isSelectedForClone:Fs((E==null?void 0:E.length)+(F==null?void 0:F.length)-1),onCloneSelected:ya,handleFlagModalOpen:Na,voiceId:bs,infoMessage:we,handlePreferredVoiceActions:M,isCloneLoading:ja||Be}),e.jsx(S,{y:.2})]}),k&&!ne&&k!==Cr.autoPilot&&e.jsx(_,{children:e.jsx(br,{message:{role:k},character:P,user_name:b,scrollReference:Vs,user_avatar_url:g,isTyping:k})}),Us&&e.jsx(e.Fragment,{children:e.jsx(yr,{error:ne||Xe,errorCode:J||us||Xe,errorWait:tt,errorMessage:dt,errorWaitDelay:uo,errorResubmitMessage:()=>G({resubmit:!0}),resetError:Za})}),!va&&e.jsx(yr,{error:"invalidAccess",invalidUrlError:Fe}),Xa&&e.jsx(yr,{error:"blockedBotCreator",character:P}),e.jsx(S,{y:.5})]}),!_a&&e.jsx(q,{onClick:()=>yt(!0),className:"justify-center fixed bottom-0 left-0 right-0 z-[2] gap-6 bg-colorWaitingBanner text-center px-3 pt-2 pb-2",children:e.jsxs(C,{children:[e.jsxs(_,{justify:"center",className:"flex-wrap gap-5",children:[e.jsx(q,{children:e.jsxs(l,{variant:"lg",type:"!black",children:["Waiting Room Position : ",I]})}),e.jsx(q,{align:"center",className:"self-center object-cover mt-1 cursor-pointer",children:e.jsx(te,{src:"/Assets/minimize.png",className:"rounded-none",height:20,width:20})})]}),e.jsx(_,{justify:"center",children:e.jsx(l,{type:"!black",variant:"sm",children:A>=60&&"Estimated Time Left is "+Math.floor(A/60)+" Minutes"})})]})})]})}),e.jsx(S,{y:3}),e.jsx(_,{className:"bg-transparent right-0 pb-[10px] z-[1] w-full max-w-[800px] px-2 flex justify-center m-auto",gap:0,children:e.jsx(C,{className:"gap-[2px]",children:X?e.jsxs(q,{className:"flex-wrap py-3 text-center",justify:"center",gap:1,children:[e.jsx(q,{align:"center",className:"self-center",children:e.jsx(l,{children:"Select the start message to remove. All following messages will be removed."})}),e.jsx(q,{className:"self-center",children:e.jsx(U,{variant:"secondary",color:"primary_strong",onPress:zt,isDisabled:de,children:"Cancel"})}),e.jsx(q,{className:"self-center",children:e.jsx(U,{onPress:en,isLoading:de,variant:"secondary",color:"error",isDisabled:W==null,children:"Remove"})})]}):ba?e.jsxs(_,{className:"w-full flex-wrap p-3",gap:2,align:"center",children:[e.jsx(C,{gap:.5,className:"w-max",children:e.jsx(l,{i:!0,variant:"sm",children:"*Select the last message that you want to clone"})}),e.jsxs(_,{align:"end",gap:1,className:"*:min-w-[150px]",children:[e.jsx(U,{variant:"bordered",color:"transparent",onPress:zt,children:"Cancel"}),e.jsx(U,{onPress:ai,variant:"secondary",color:"primary_strong",isDisabled:ti<0,children:"Clone"})]})]}):_a&&va&&!Xa&&e.jsx(Kd,{errorCode:J,isLastMessageImage:sn,generate:G,isTyping:k,character:P,chatContainerRef:Vs,isCloneLoading:ja||Be,handlePreferredVoiceActions:M})})}),(()=>{if(!ra.isPartner)return e.jsx(ed,{showWaitingQueueModal:Ht,setShowWaitingQueueModal:yt})})(),e.jsx(sd,{setErrorModalVisible:ga,errorModalMessage:Dn,errorModalVisible:Mn})]}),ja&&e.jsx(td,{}),e.jsx(Am,{handleFlagMessage:ni,isOpen:Vn,onClose:Kn,isLoading:Qr,progressStep:Gn,setProgressStep:kt}),Qa&&e.jsx(Rm,{display:Qa,onClose:tn,onUserConfirmCloneChoice:qn}),(qe==null?void 0:qe.isVisible)&&e.jsx(ad,{messageId:qe.messageId,voiceId:qe.voiceId,showRateVoiceModal:qe.isVisible,onCloseRateModal:Ve,rateVoiceQuality:ee,setInfoMessageForRatingVoice:ls,loadingFromPreferredVoice:Es})]})},Mm=({value:t="",onChange:s,onCancel:n,onSettings:a,onSave:d,isSaving:o=!1,isImageEditMode:i=!1})=>{const c=r.useRef(null),u=()=>{c.current&&(c.current.style.height="auto",c.current.style.height="".concat(c.current.scrollHeight,"px"))};return r.useLayoutEffect(()=>{u()},[]),e.jsxs(C,{className:"gap-md",children:[e.jsx("textarea",{ref:c,onChange:m=>{s(m.target.value),u()},value:t,className:"bg-gray-4 rounded-lg p-md border-1 border-solid border-gray-8 resize-none text-medium overflow-hidden w-full",rows:1}),e.jsxs(_,{className:"justify-end gap-sm",children:[e.jsx(wt,{onClick:n,disabled:o,variant:$e.TEXT,size:as.MEDIUM,"aria-label":"cancel",children:"Cancel"}),i&&e.jsx(wt,{onClick:a,variant:$e.SECONDARY,size:as.MEDIUM,"aria-label":"settings",children:"Settings"}),e.jsx(wt,{onClick:d,disabled:!t,loading:o,variant:$e.TRANSPARENT,size:as.MEDIUM,className:"!bg-green-5","aria-label":"save",children:i?"Generate":"Save"})]})]})};function Dm({isSubmitting:t,setIsSubmitting:s,setLabelSentMessage:n,messageRating:a,setShowRatingBox:d,setIsRatingSent:o}){var T;const[i,c]=r.useState(-1),[u,m]=r.useState(""),j=u?Wx[u]:"",[f,h]=r.useState(null),{messageId:x,sendRating:y,messageType:p=Vi.TEXT}=a||{},b=(T=Hx(p))==null?void 0:T[u],g=$x(j)||"",v=async({ratingIndex:w,label:I,ratingValue:A=""})=>{w!==void 0&&w>=0&&(m(A),c(w)),I&&d(!1),s(!0);try{await(y==null?void 0:y(x,j||I||""))}catch(D){console.error(D)}finally{s(!1),I&&(n==null||n(g)),o(!0)}};return e.jsxs(C,{className:"p-lg rounded-md border border-solid border-gray-6 gap-md",children:[e.jsxs(_,{justify:"between",align:"center",children:[e.jsx(is,{variant:Ts.LABEL_MEDIUM_REGULAR,className:"text-gray-11",children:"How do you feel about this response?"}),e.jsx("div",{className:"cursor-pointer",onClick:()=>d(!1),children:e.jsx(hn,{icon:oe.CLOSE,className:"text-gray-11"})})]}),e.jsxs(_,{className:"max-mob:flex-col mob:items-center",children:[e.jsx(_,{className:"-ml-md ",children:Object.values(zx).map((w,I)=>e.jsx("div",{onMouseEnter:()=>h(I),onMouseLeave:()=>h(null),children:e.jsx(Cs,{icon:oe.STAR,variant:$e.TRANSPARENT,size:as.LARGE,onClick:()=>v({ratingIndex:I,ratingValue:w}),className:"text-gray-12 ".concat(I<=(f!=null?f:i)?"*:fill-gray-12":""),"aria-label":"rate-".concat(I,"-star")})},I))}),!t&&e.jsx(is,{variant:Ts.LABEL_MEDIUM_MEDIUM,className:"text-gray-12",children:j})]}),!t&&!!(b!=null&&b.length)&&e.jsx(_,{className:"gap-md flex-wrap",children:b==null?void 0:b.map((w,I)=>e.jsx(wt,{variant:$e.OUTLINED,size:as.SMALL,className:"!text-gray-11 active:bg-white active:!text-black",onClick:()=>v({label:w}),"aria-label":"rate-".concat(I,"-star"),children:w},I))}),t&&e.jsx(ph,{className:"!size-5"})]})}const Um=({onClickPrevious:t,onClickNext:s,count:n,totalCount:a,actions:d=[],messageRating:o,showRatingBox:i,setShowRatingBox:c,setIsRatingSent:u,isRatingSubmitting:m,setIsRatingSubmitting:j})=>{const[f,h]=r.useState(""),x=!!t&&n>1,y=!!s&&n<a,p=a&&a>1;return r.useEffect(()=>{let b;return f&&(b=setTimeout(()=>{h("")},5e3)),()=>clearTimeout(b)},[f]),e.jsxs(C,{className:"gap-md",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center gap-2",children:d==null?void 0:d.map((b,g)=>{var v;return b!=null&&b.isHidden?null:e.jsx(Fi,{title:b==null?void 0:b.title,offset:0,children:e.jsx(Cs,{icon:b==null?void 0:b.icon,onClick:b==null?void 0:b.onPress,disabled:b==null?void 0:b.isDisabled,shape:fn.PILL,variant:$e.TEXT,size:as.MEDIUM,className:ws("!text-gray-9 dark:!text-gray-11",b==null?void 0:b.className),loading:b==null?void 0:b.isLoading,classNames:{icon:ws(b!=null&&b.isFilled?"!fill-gray-9 dark:!fill-gray-11":"",(v=b==null?void 0:b.classNames)==null?void 0:v.icon)}})},g)})}),e.jsx("div",{className:"flex items-center",children:p&&e.jsxs(e.Fragment,{children:[e.jsx(Cs,{icon:oe.CHEVRON_LEFT,onClick:t,disabled:!x,size:as.SMALL,variant:$e.TEXT,"aria-label":"previous"}),n&&a&&e.jsxs(is,{variant:Ts.LABEL_MEDIUM_REGULAR,className:"text-gray-10",children:[n,"/",a]}),e.jsx(Cs,{icon:oe.CHEVRON_RIGHT,onClick:s,disabled:!y,size:as.SMALL,variant:$e.TEXT,"aria-label":"next"})]})})]}),i&&e.jsx(Dm,{isSubmitting:m,setIsSubmitting:j,setLabelSentMessage:h,messageRating:o,setShowRatingBox:c,setIsRatingSent:u}),f&&e.jsx(is,{variant:Ts.LABEL_MEDIUM_REGULAR,className:"text-gray-9 dark:text-gray-11",children:f})]})},Ci=({x:t,y:s,radius:n})=>e.jsx("div",{className:"absolute bg-blue-12 rounded-full",style:{left:t,top:s,width:n*2,height:n*2}}),Fm=({dotMargin:t=8,dotAmplitude:s=5,dotSpeed:n=.15,show:a=!0,dotRadius:d=3,dotY:o=6,dotX:i=12,className:c=""})=>{const u=r.useRef(),[m,j]=r.useState(o),[f,h]=r.useState(o),[x,y]=r.useState(o),p=r.useRef(0);return r.useEffect(()=>{const b=()=>{p.current+=n,j(o+s*Math.sin(p.current)),h(o+s*Math.sin(p.current-1)),y(o+s*Math.sin(p.current-2)),u.current=requestAnimationFrame(b)};return a&&(u.current=requestAnimationFrame(b)),()=>{u.current&&cancelAnimationFrame(u.current)}},[a,o,s,n]),a?e.jsxs("div",{className:"relative flex items-center ".concat(c),style:{height:(o+s)*2+d},children:[e.jsx(Ci,{x:i-d-t,y:m,radius:d}),e.jsx(Ci,{x:i,y:f,radius:d}),e.jsx(Ci,{x:i+d+t,y:x,radius:d})]}):null},Bm=({isTyping:t,message:s,userName:n,characterName:a,isAvatarImageBlurred:d})=>{if(t)return e.jsx("div",{children:e.jsx(Fm,{})});if(s){const[o,i]=r.useState(!1),c=s==null?void 0:s.image_url;return e.jsxs(e.Fragment,{children:[e.jsx(Qt,{children:dl(s==null?void 0:s.content,{characterName:a,userName:n})}),c&&e.jsx(zr,{src:c,isOpen:o,onOpenChange:i,blurred:d,children:e.jsx(Ur,{src:gs(c,{preset:"image400x400"}),height:404,width:404,alt:a,className:"aspect-square max-w-full rounded-lg cursor-pointer ".concat(d?"blur-md":""),onClick:()=>i(!0)})})]})}};let ca=new Audio;const Gm=({currentAudioMessageId:t,messageId:s,voiceId:n,conversationId:a,voiceSelectionMode:d=!1,showVoiceSelectionModal:o,setShowVoiceSelectionModal:i,isAudioLoading:c,characterId:u,defaultPersonaId:m,loadMessages:j,handlePreferredVoiceActions:f,handleModalVisibility:h})=>{const x=Je(),{isAuthenticated:y,register:p}=Qe(),[b,g]=r.useState(Ze.ALL),[v,T]=r.useState([]),[w,I]=r.useState(n),[A,D]=r.useState(!1),[O,P]=r.useState(!1),{role:E}=he(),N=Ks(Y=>{var fe;return(fe=Y==null?void 0:Y.voices)==null?void 0:fe.allVoices}),[R,k]=r.useState([]),G=E?E!==Xt.PREMIUM:!0,F=y?vr.Member:vr.Guest,H=!G&&n?mt.PLAY:mt.IDLE,[V,z]=r.useState(H),ne=c&&t===s,J=()=>{const Y=t===s;let fe;G||!n?fe=mt.IDLE:Y&&!ne?fe=mt.STOP:fe=mt.PLAY,z(fe)},$=Y=>{switch(Y){case Ws.SAVE_CONVERSATION_VOICE_ID:z(mt.PLAY),de(),D(!1),I(n)}},xe=Y=>{switch(Y){case Ws.GET_ALL_VOICES:de();case Ws.SAVE_CONVERSATION_VOICE_ID:I(n),D(!1)}};r.useEffect(()=>{J()},[E,n,t,ne]),r.useEffect(()=>{o&&d&&f({action:cs.Get_Voices,errorCB:()=>xe(Ws.GET_ALL_VOICES)})},[o,d]);const de=()=>{P==null||P(!1),i==null||i(!1)};r.useEffect(()=>()=>{ae()},[]);const W=Y=>R.filter(fe=>fe.gender===Y),ge=()=>{let Y;return b===Ze.MALE?Y=W(Pr.MALE):b===Ze.FEMALE?Y=W(Pr.FEMALE):Y=R,Y=rd(Y,n),Y};r.useEffect(()=>{N!=null&&N.length&&k(nd(N,ve))},[N==null?void 0:N.length]),r.useEffect(()=>{T(ge())},[R==null?void 0:R.length,b,a]);const X=async()=>{if(G||ne)return h(Ns.SHOW_VOICE_UPGRADE_MODAL,!0);switch(V){case mt.IDLE:f({action:cs.Get_Voices,errorCB:()=>xe(Ws.GET_ALL_VOICES)}),g(Ze.ALL),h(Ns.SHOW_VOICE_SELECION_MODAL,!0);break;case mt.PLAY:a&&!s&&await j(),f({action:cs.Play,messageId:s});break;case mt.STOP:f({action:cs.Stop});break}},ae=()=>{ca.src=""},Pe=()=>{if(y)return x(id);p()},Ce=async Y=>{Y&&(I(Y),ae==null||ae(),D(!0),f({action:cs.Set_Conversation_Voice_Id,selectedVoiceId:Y,characterId:u,defaultPersonaId:m,errorCB:()=>xe(Ws.SAVE_CONVERSATION_VOICE_ID),successCB:()=>$(Ws.SAVE_CONVERSATION_VOICE_ID)}))},ve=(Y,fe,Le)=>{if(!Y){ae();return}Le&&(ca||(ca=new Audio),f({action:cs.Stop}),ca.src=Le,ca.play(),ca.removeEventListener("ended",fe),ca.addEventListener("ended",fe))},Z=Y=>{g(Y),ae()},me=Y=>{P(Y),ae==null||ae()},Ge=[{active:b===Ze.ALL,label:Ze.ALL,onPress:()=>Z(Ze.ALL)},{active:b===Ze.MALE,label:Ze.MALE,onPress:()=>Z(Ze.MALE)},{active:b===Ze.FEMALE,label:Ze.FEMALE,onPress:()=>Z(Ze.FEMALE)}];return{handleOnPress:X,chatVoiceButtonVariant:V,isAudioLoadingForCurrentMessage:ne,showVoiceSelectionInVoiceButton:O,handleOnOpenChangeVoiceSelectionModal:me,allVoices:N,actions:Ge,voices:v,onSelectVoiceId:Ce,transformedAllVoices:R,stopAudioPlay:ae,defaultVoiceId:w,voiceSelectionLoading:A,voiceUpgradeVariant:F,onPressUpgrade:Pe}},Si=({character:t,message:s,user_name:n,user_avatar_url:a,isTyping:d=!1,allowRegenerate:o=!1,onRegenerate:i,onNext:c=()=>null,onPrev:u=()=>null,currentIndex:m=0,isSelectedForRemoval:j,onRemovalSelected:f,scrollReference:h,setConversation:x,currentConversationId:y,createConversation:p,removalMode:b,loadMessages:g,altMsgs:v,chatIndex:T,sendRating:w,isClonePartial:I,isSelectedForClone:A,onCloneSelected:D,setErrorCode:O,conversationLength:P,isRemoveMessageLoading:E,isThisAltMessage:N=!1,handleFlagModalOpen:R,isAudioLoading:k,voiceId:G,defaultPersonaId:F,currentAudioMessageId:H,infoMessage:V,handlePreferredVoiceActions:z,showCheckbox:ne,requestErrorHandler:J,handleModalVisibility:$,typingInProcess:xe,isMessageEditMode:de,setIsMessageEditMode:W})=>{const ge=ta(),[X,ae]=r.useState(!1),[Pe,Ce]=r.useState(!1),[ve,Z]=r.useState(!1),[me,Ge]=r.useState(!1),{callApi:Y,jsonApiService:fe,code:Le,isLoading:Fe}=Ee(),[We,Be]=r.useState(null),Ye=We==="image",[Ke,ze]=r.useState(s==null?void 0:s.content),{blurNSFW:B}=fs(),{hasAccessToTTS:ce}=Ft(),{status:Ne,bypass:je}=Ks(ss=>ss==null?void 0:ss.waitingQueue)||{},{characterId:js}=Ps(),bs=Ne!=="waiting"||je==js||P===1,ns=B&&(t==null?void 0:t.avatar_is_nsfw)&&((s==null?void 0:s.role)==="bot"||!(s!=null&&s.role)),[M,ee]=r.useState(!1),re=o&&!We&&!xe&&bs&&!I&&!b,De=re&&X,qe=re&&(s==null?void 0:s.id)&&bs,Ve=!b&&!I&&!d&&!We&&!(s!=null&&s.image_url),ls=de||!!xe,we=re||Ve,{isUserPremium:Es}=ld(),Xe=(s==null?void 0:s.role)===Gi.BOT,dt=(s==null?void 0:s.role)===Gi.USER,et=!d&&!We&&Xe&&!(s!=null&&s.image_url)&&ce&&Gc(s==null?void 0:s.content)&&!I&&!b,st=(s==null?void 0:s.id)&&Xe&&G&&Es&&!(s!=null&&s.image_url)&&ce,ys=(V==null?void 0:V.messageId)===(s==null?void 0:s.id),qs=!!(s!=null&&s.image_url)&&!!(s!=null&&s.image_prompt),us=(s==null?void 0:s.role)==="user"?a:t==null?void 0:t.avatar_url,Gs=(s==null?void 0:s.role)==="user"?n:t==null?void 0:t.name;gs(us,{preset:"avatar64x64"});const Vs=ul(Yx),ut={messageId:s==null?void 0:s.id,rating:s==null?void 0:s.rating,sendRating:w,messageType:s!=null&&s.image_url?Vi.IMAGE:Vi.TEXT},Vt=async()=>{let ss,Us;try{x(xt=>xt.map(($s,ra)=>($s==null?void 0:$s.id)===(s==null?void 0:s.id)?(ss=$s.content,Us=ra,{...$s,content:Ke}):$s)),s!=null&&s.id?await Y(fe.updateResource,"messages",s==null?void 0:s.id,{content:Ke}):!y&&T==0&&await p([{role:"bot",content:Ke}])}catch(xt){x($s=>($s[Us].content=ss,$s))}},{handleOnPress:Ht,chatVoiceButtonVariant:yt,isAudioLoadingForCurrentMessage:At}=Gm({currentAudioMessageId:H,messageId:s==null?void 0:s.id,voiceId:G,conversationId:y,characterId:js,defaultPersonaId:F,isAudioLoading:k,handlePreferredVoiceActions:z,loadMessages:g,handleModalVisibility:$});r.useEffect(()=>{Le&&O(Le)},[Le,O]);const Tt=r.useCallback(()=>{let ss=h.current;ss&&(ss.scrollTop=ss.scrollHeight)},[h]),_t=async()=>{Be("text"),ze(s==null?void 0:s.content),W(!0),y&&!(s!=null&&s.id)&&await g()},It=async()=>{z({action:St.Stop}),ee(!0),await i({regenerate:!0,image_prompt:s==null?void 0:s.image_prompt,continue_chat:(s==null?void 0:s.role)==="bot"}),ee(!1)},Pt=async()=>{z({action:St.Stop}),ee(!0),await i({type:"text",continue_chat:!0}),ee(!1)},Rt=async()=>{try{await navigator.clipboard.writeText(s==null?void 0:s.content),ge(za(Vs))}catch(ss){console.error(ss)}},at=ss=>{switch(document.body.style.overflow="",z({action:St.Stop}),ss){case Os.COPY:return Rt();case Os.EDIT:return _t();case Os.RATE_VOICE:return z({action:St.Rate_Modal,messageId:s==null?void 0:s.id});case Os.REPORT:return R(s==null?void 0:s.id,N)}},nt=[{label:"Copy",icon:oe.COPY,onPress:()=>at(Os.COPY),isHidden:!Ve},{label:"Edit",icon:oe.EDIT,onPress:()=>at(Os.EDIT),isHidden:!Ve},{label:"Rate voice quality",icon:"AudioLines",onPress:()=>at(Os.RATE_VOICE),isHidden:!st},{label:"Report",icon:oe.FLAG,onPress:()=>at(Os.REPORT),isHidden:!re}],vt=ss=>{if(ss)return b&&j?ar.DELETE:I&&A?ar.CLONE:void 0;if(!(b||I))return(s==null?void 0:s.role)==="user"?ar.USER:ar.BOT},hs={name:Gs,blurred:ns},Ot=()=>{I?D(A?-1:T):f(j?null:N?P:T)},ie=()=>{Be("image"),ze(s==null?void 0:s.image_prompt),W(!0)},pe=()=>{Ye?i({regenerate:!0,image_prompt:Ke}):Vt(),Be(null),W(!1)},os=[{icon:oe.REFRESH,isHidden:!re,onPress:()=>It(),isDisabled:M,key:rn.REGENERATE,title:"Regenerate"},{icon:oe.MESSAGE_PLUS,isHidden:!re,onPress:()=>Pt(),isDisabled:M,key:rn.CONTINUE_CHAT,title:"Continue"},{icon:oe.EDIT,onPress:ie,isHidden:!qs||!o,key:rn.REGENERATE,isDisabled:M,title:"Edit"},{icon:oe.STAR,isDisabled:!!(s!=null&&s.rating)||Pe||M,isHidden:!qe,isFilled:!!(s!=null&&s.rating)||De||Pe,isLoading:ve&&!De,onPress:()=>ae(!0),key:rn.RATE_MESSAGE,className:"!opacity-100",title:"Rate"},{icon:yt===mt.STOP?oe.STOP_CIRCLE:oe.VOLUME_2,isHidden:!et,onPress:Ht,isLoading:At,key:rn.VOICE,classNames:{icon:yt===mt.STOP?"fill-backgroundInvert stroke-backgroundInvert [&_rect]:!fill-background [&_rect]:!stroke-background":""},title:"Listen"}],Hs=()=>{Be(null),W(!1),ze(s==null?void 0:s.content)},ht=!et&&!re&&!qe||(J==null?void 0:J.isError),Js=()=>{J&&(J.resetError(),J.onRetry())};return r.useEffect(()=>{Tt()},[De,ve,Ye]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:ws("w-full flex flex-col items-center py-lg",Fl(vt(!0)),(b||I)&&T!==0&&"border-0 border-t border-solid border-gray-5"),children:e.jsxs(C,{className:ws("gap-md mob:rounded-lg w-full",Fl(vt()),dt?"py-lg px-md":"max-desktop:px-md"),style:{maxWidth:On},children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center gap-md",children:[e.jsx(zr,{id:js,src:us||"",name:hs==null?void 0:hs.name,blurred:hs==null?void 0:hs.blurred,role:s==null?void 0:s.role}),(hs==null?void 0:hs.name)&&e.jsx(is,{variant:Ts.LABEL_LARGE_MEDIUM,className:"text-gray-12",children:hs==null?void 0:hs.name})]}),!(J!=null&&J.isError)&&e.jsxs(e.Fragment,{children:[ne&&e.jsx("div",{className:Xe?"my-2 mx-2.5 max-desktop:!m-0":"",children:e.jsx(mh,{checked:j||A,onChange:Ot,disabled:E})}),we&&!ne&&!!(nt!=null&&nt.length)&&e.jsx(Fr,{listItems:nt,placement:"bottom-end",children:e.jsx(Cs,{variant:$e.TRANSPARENT,icon:oe.MORE_VERTICAL,className:"text-blue-12",disabled:ls,"aria-label":"message-dropdown"})})]})]}),e.jsxs("div",{className:"flex flex-col gap-md",children:[!(J!=null&&J.isError)&&e.jsxs(e.Fragment,{children:[(!We||(s==null?void 0:s.image_url))&&e.jsx("div",{className:"flex flex-col w-full break-words",children:e.jsx(Bm,{isTyping:d,message:s,userName:Gs,characterName:t==null?void 0:t.name,isAvatarImageBlurred:hs.blurred})}),We&&e.jsx(Mm,{value:Ke,onChange:ze,onCancel:Hs,onSettings:()=>Ge(!0),onSave:pe,isSaving:Fe,isImageEditMode:Ye})]}),J!=null&&J.isError?e.jsx(dc,{visible:J.isError,title:J.errorMessage,actionHandler:Js,actionTitle:"Resubmit",variant:gh.ERROR,isDismissable:!1}):null]}),!ht&&e.jsx(Um,{actions:os,onClickPrevious:u,onClickNext:c,count:m+1,totalCount:v==null?void 0:v.length,messageRating:ut,showRatingBox:De,setShowRatingBox:ae,setIsRatingSent:Ce,isRatingSubmitting:ve,setIsRatingSubmitting:Z}),ys&&e.jsx(is,{variant:Ts.LABEL_MEDIUM_REGULAR,className:"text-gray-9 dark:text-gray-11",children:V==null?void 0:V.message})]})}),me&&e.jsx(od,{isOpen:!0,setIsOpen:Ge})]})};function eu({onClose:t,isOpen:s}){const n=Je();return e.jsx(es,{title:"True Supporter Plan Required",classNames:{title:"text-center pl-[28px]"},open:s,onOpenChange:t,actions:e.jsxs(C,{className:"items-center gap-lg",children:[e.jsx(U,{variant:"secondary",color:"primary_strong",onPress:()=>n(Ae.subscribe),children:"Upgrade"}),e.jsxs(l,{variant:"xs",children:["Find out more details about",e.jsx(K,{className:"text-xs text-link ml-0.5",to:"https://docs.spicychat.ai/premium-features/conversation-images",target:"_blank","aria-label":"conversation-images",children:"Conversation Images"})]})]}),children:e.jsxs("div",{className:"leading-6",children:[e.jsxs("div",{className:"text-center",children:["Our ",e.jsx("span",{className:"font-semibold",children:"Conversation Image"})," feature is currently only available for True Supporters and I'm All In tiers.",e.jsx(S,{y:6}),"To train your private chatbots to send images in conversations, you must upgrade to the ",e.jsx("b",{children:"I'm All In"})," tier."]}),e.jsx(S,{y:5}),e.jsx(C,{className:"items-center",children:e.jsx(te,{width:220,src:"https://ndsc.b-cdn.net/avatars/ec394899b4a44260005a6120cf31fe77.webp?width=220"})}),e.jsx(q,{className:"w-full justify-center"})]})})}eu.propTypes={onClose:L.func,isOpen:L.bool};function su({onClose:t,isOpen:s}){return e.jsxs(es,{title:"I'm All In Plan Required",classNames:{title:"text-center pl-[28px]"},open:s,onOpenChange:t,children:[e.jsxs("div",{className:"text-center",children:["To train an untrained public chatbot or your private chatbots to send images in conversations, you must upgrade to the ",e.jsx("b",{children:"I'm All In"})," tier. ",e.jsx("br",{}),e.jsx("br",{})]}),e.jsx("div",{className:"[&>*:first-child]:flex-wrap [&>*:first-child]:justify-center text-center",children:e.jsxs(l,{children:["Find out more details about",e.jsx(K,{className:"ml-1 text-blue-600",to:"https://docs.spicychat.ai/premium-features/conversation-images",target:"_blank","aria-label":"conversation-images",children:"Conversation Images"})]})})]})}su.propTypes={onClose:L.func,isOpen:L.bool};function tu({onClose:t,isOpen:s,character:n}){const{jsonApiService:a,callApi:d,data:o,isLoading:i,error:c}=Ee(),u=()=>{d(a.createResource,"characters/train",{character_id:n.id}).then(j=>{console.log(j)})},m=()=>c?e.jsxs(e.Fragment,{children:["There was an error submitting the training request.",e.jsx("br",{}),e.jsx("br",{}),e.jsx(l,{type:"error",children:c}),e.jsx("br",{})]}):o?e.jsxs(e.Fragment,{children:[e.jsx(l,{children:"Training request submitted successfully."}),e.jsx(S,{y:1}),e.jsxs(l,{children:["There's currently ",o==null?void 0:o.count," requests in the queue."]}),e.jsx(S,{y:1})]}):i?e.jsxs(e.Fragment,{children:[e.jsx(l,{children:"Submitting training request..."}),e.jsx(Se,{}),e.jsx(S,{y:1})]}):(n==null?void 0:n.lora_status)==="pending"?e.jsxs("div",{className:"flex items-center flex-col",children:["This bot is currently in the training queue, and will be trained as soon as possible.",e.jsx("br",{}),e.jsx("br",{}),"Check back in a few hours.",e.jsx(te,{className:"",src:"/Assets/Training.gif",width:150,height:150})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{children:"Conversation Images are made possible by training an AI model on the character's image. That process takes time, so we have to limit the number of training requests."}),e.jsx(S,{y:3}),e.jsx(_,{justify:"center",children:e.jsxs(U,{variant:"secondary",color:"primary_strong",onPress:u,children:["Train ",n==null?void 0:n.name]})}),e.jsx(S,{y:5}),e.jsxs("p",{children:["You can make ",e.jsx("b",{children:"up to 4 training requests per day"}),". Your training request will place this bot in the training queue."]}),e.jsx(S,{y:5})]});return e.jsxs(es,{title:"Chatbot Image Training",classNames:{title:"text-center pl-[28px]"},open:s,onOpenChange:t,className:"text-center",children:[e.jsx(m,{}),e.jsx(l,{variant:"xs",children:"Training individual bots takes up to 10 minutes, depending on the number of bots in the queue, processing can take up to a few days."})]})}tu.propTypes={onClose:L.func,isOpen:L.bool,character:L.object};const au=({generate:t,character:s,isTyping:n,chatContainerRef:a,isCloneLoading:d,errorCode:o,setIsInputActionDisabled:i,isInputActionDisabled:c,openModalType:u,setOpenModalType:m,isLastMessageImage:j,wrapperRef:f})=>{const{isDesktop:h}=Ie(),[x,y]=r.useState(""),[p,b]=r.useState(!1),g=r.useRef(null),v=r.useRef(null),{permissions:T}=he(),w=x.trim().length>0,[I,A]=r.useState(!1),[D,O]=r.useState(!1),P=o===lt.CODE,E=r.useRef(new AbortController),N=E.current,R=async()=>{if(p)g.current.stop(),b(!1);else try{const{state:$}=await navigator.permissions.query({name:"microphone"});$!=="granted"&&O(!0);const xe=window.SpeechRecognition||window.webkitSpeechRecognition;g.current=new xe,g.current.interimResults=!1,g.current.lang="en-US",g.current.onresult=de=>{de.results[de.results.length-1].isFinal&&y(de.results[de.results.length-1][0].transcript)},g.current.onspeechend=()=>{b(!1)},g.current.onerror=de=>{$c(de.error),b(!1)},g.current.start(),b(!0)}catch($){console.error("Error while getting permissions : ",$)}},k=async()=>{let $=x;y(""),v.current.value="",await t({type:"text",content:$}),I&&A(!1)};r.useEffect(()=>{var $;h&&(($=v==null?void 0:v.current)==null||$.focus())},[n,d]),r.useLayoutEffect(()=>{let $=a.current;$&&($.scrollTop=$.scrollHeight)},[x]);const G=$=>{w&&$.key==="Enter"&&!$.shiftKey&&!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&($.preventDefault(),t({type:"text",content:x}),v.current.value="",y(""))},F=async()=>{i(!0);const $=await t({type:"text",autopilot:!0,abortSignal:N.signal});$&&(y($),A(!0),v.current.value=$),v.current.value="",E.current=new AbortController,i(!1)};r.useEffect(()=>{var $;window.innerWidth>1080&&(($=v==null?void 0:v.current)==null||$.focus())},[n]);const H=async()=>{T!=null&&T.includes(xs.conversation_images)?(s==null?void 0:s.lora_status)==="ready"||T!=null&&T.includes(xs.conversation_images_v2)?await t({type:"image",regenerate:j}):T!=null&&T.includes(xs.image_training)?m("Training"):m("PremiumTraining"):m("PremiumAccess")},V=$=>{switch($){case Sa.Send:return k();case Sa.Autogenerate:return F();case Sa.Microphone:return R()}},z=()=>{v.current&&(v.current.style.height="auto",v.current.style.height="".concat(v.current.scrollHeight,"px"))};r.useLayoutEffect(()=>{z()},[x]);const ne=!!n||d||P,J=!!(x!=null&&x.image_url)||c||w;return e.jsxs("div",{className:"flex items-center gap-sm max-mob:px-md",ref:f,children:[!J&&e.jsx(Fi,{title:"Image",offset:0,children:e.jsx(Cs,{icon:oe.IMAGE,size:as.MEDIUM,variant:$e.TRANSPARENT,disabled:ne,onClick:H,"aria-label":"generate-image"})}),e.jsxs("div",{className:"w-full flex justify-between items-end border-1 border-solid border-gray-5 focus-within:border-blue-9 rounded-[13px] py-sm px-2 gap-1 bg-gray-3",children:[e.jsx(Fi,{title:"Suggest",offset:0,visible:!c,children:e.jsx(Cs,{icon:oe.LIGHT,size:as.MEDIUM,variant:c?$e.SECONDARY:$e.TRANSPARENT,onClick:()=>V(Sa.Autogenerate),loading:c,loaderSize:fh.SMALL,disabled:ne,"aria-label":"autogenerate"})}),e.jsx("textarea",{type:"text",className:"flex-grow max-h-[188px] resize-none text-paragraph-md bg-transparent focus:outline-none my-auto",ref:v,value:x,onChange:$=>{y($.target.value),z()},placeholder:p?"Say something...":"Message...",disabled:ne,onKeyDown:$=>G($),rows:1}),c&&e.jsx(Cs,{classNames:{icon:"fill-background !size-[14px]"},icon:oe.SQUARE,onClick:()=>{N==null||N.abort()},size:as.MEDIUM,variant:$e.INVERSE,"aria-label":"cancel-generation"}),w&&!c&&e.jsx(Cs,{icon:oe.ARROW_UP,size:as.MEDIUM,variant:$e.INVERSE,onClick:()=>V(Sa.Send),disabled:ne,"aria-label":"send-message"}),!w&&!c&&e.jsx(Cs,{icon:p?oe.CHECK:oe.MIC,size:as.MEDIUM,variant:$e.INVERSE,onClick:()=>V(Sa.Microphone),disabled:ne,"aria-label":"record-voice"})]}),e.jsx(eu,{isOpen:u==="PremiumAccess",onClose:()=>m(!1)}),e.jsx(su,{isOpen:u==="PremiumTraining",onClose:()=>m(!1)}),u==="Training"&&e.jsx(tu,{isOpen:u==="Training",onClose:()=>m(!1),character:s}),e.jsx(Hc,{isOpen:D,setIsPermissionsModal:O,permission:"microphone"})]})};au.propTypes={initialMessage:ue.PropTypes.string,character:ue.PropTypes.object,generate:ue.PropTypes.func,isTyping:ue.PropTypes.oneOfType([ue.PropTypes.bool,ue.PropTypes.string]),chatContainerRef:ue.PropTypes.object,setChatInputHeight:ue.PropTypes.func,isLastMessageImage:ue.PropTypes.bool,errorCode:ue.PropTypes.string,handlePreferredVoiceActions:ue.PropTypes.func};const Vm=({isVisible:t,setIsUpdateCloneTitleModal:s,handleCloneTitleUpdate:n,conversationLabel:a,characterName:d})=>{const[o,i]=r.useState(a||d),c=()=>{s(!1)},u=()=>{n(o),c()};return e.jsxs(es,{title:"Update title of this conversation",classNames:{title:"text-center pl-[28px]"},open:t,backdrop:"blur",onOpenChange:c,children:[e.jsx(C,{align:"center",children:e.jsx(q,{className:"w-[260px] mt-2",children:e.jsx(ms,{variant:"secondary_bordered",color:"transparent",placeholder:"enter title here...",value:o,onValueChange:i,maxLength:50})})}),e.jsxs(_,{justify:"center",className:"*:w-[150px]",gap:1,children:[e.jsx(U,{variant:"bordered",onPress:c,children:e.jsx(l,{type:"medium",children:"Cancel"})}),e.jsx(U,{color:"primary_strong",onPress:u,isDisabled:!o,children:e.jsx(l,{type:"medium white",children:"Update"})})]})]})};function nu({isOpen:t,setIsOpen:s,permissions:n=[],inferenceModel:a,updateInferenceModel:d}){const{inferenceModels:o}=vs();let i=[];const c=(o||[]).filter(m=>!(m.permission&&!n.includes(m.permission)&&m.hide_unauthorized));c.forEach(m=>{m.permission&&!n.includes(m.permission)&&i.push(m.id)});const u=m=>{d(m.currentKey),s(!1)};return c?e.jsx(es,{title:"Choose Model",classNames:{title:"text-center pl-[28px]"},open:t,onOpenChange:s,actions:e.jsx(C,{align:"end",children:e.jsx(U,{variant:"secondary_short",color:"gray_light",onPress:()=>s(!1),children:"Close"})}),children:e.jsx(Dr,{"aria-label":"Select a model",variant:"flat",disallowEmptySelection:!0,selectionMode:"single",disabledKeys:i,selectedKeys:[a],onSelectionChange:u,color:"primary",children:c.map(m=>e.jsx(Ua,{textValue:m==null?void 0:m.name,shouldHighlightOnFocus:!0,children:e.jsx(cd,{model:m,onClick:()=>s(!1)})},m==null?void 0:m.id))})}):null}nu.propTypes={isOpen:L.bool,setIsOpen:L.func,permissions:L.array,inferenceModel:L.string,updateInferenceModel:L.func};function ru({onClose:t,isOpen:s}){var N;const[n,a]=r.useState(Q.getItem(Ra)||"default"),[d,o]=r.useState(Q.getItem(Sr)||ks.maxNewTokens),[i,c]=r.useState(Q.getItem(wr)||ks.temperature),[u,m]=r.useState(Q.getItem(Er)||ks.topP),[j,f]=r.useState(Q.getItem(Ar)||ks.topK),{permissions:h}=Qe(),[x,y]=r.useState(!1),[p,b]=r.useState(!1),{inferenceModels:g}=vs();r.useEffect(()=>{g&&g.length>0&&((g||[]).find(R=>(R==null?void 0:R.id)===n)||(a("default"),Q.setItem(Ra,"default")))},[g,n,a]);const v=R=>{a(R),Q.setItem(Ra,R)},T=R=>{o(R),Q.setItem(Sr,R)},w=R=>{c(R),Q.setItem(wr,R)},I=R=>{m(R),Q.setItem(Er,R)},A=R=>{f(R),Q.setItem(Ar,R)},D=()=>{v("default"),T(ks.maxNewTokens),w(ks.temperature),I(ks.topP),A(ks.topK)};let O=h.includes(xs.generation_settings),P=2048,E=(N=(g||[]).find(R=>R.id===n))==null?void 0:N.tokens;return h.includes(xs["3k_context"])&&(P=3072),h.includes(xs["4k_context"])&&(P=4096),h.includes(xs["8k_context"])&&E==="8K"&&(P=8192),h.includes(xs["8k_context"])&&E==="16K"&&(P=16384),e.jsxs(e.Fragment,{children:[e.jsxs(es,{title:"Generation Settings",backdrop:"blur",open:s&&!p,onOpenChange:t,className:"ml-0 mr-0".concat(x?" opacity-0":""),classNames:{title:"text-center pl-[28px]"},actions:e.jsxs(_,{children:[O&&e.jsx(C,{children:e.jsx(U,{variant:"primary_small_short",color:"transparent",startContent:e.jsx(sl,{}),onClick:()=>y(!0),children:"Images Settings"})}),e.jsx(C,{align:"end",children:e.jsx(U,{variant:"secondary_short",color:"gray_light",onClick:D,children:"Reset to Default"})})]}),children:[e.jsxs(_s,{children:[e.jsxs(_,{children:["Context Memory:"," ",e.jsxs(ct,{radius:"sm",size:"sm",className:"ml-2",children:[P/1024,"K"]})]}),e.jsx(_,{children:e.jsxs(l,{variant:"xs",children:["Your current tier and model choice gives you access to"," ",P," tokens of memory."]})}),e.jsx(S,{y:3}),e.jsx(_,{className:"leading-5",children:e.jsx(l,{h4:!0,mNone:!0,children:"Inference Model"})}),e.jsx(S,{y:.5}),e.jsx(cd,{model:(g||[]).find(R=>R.id===n),className:"pt-2",onClick:()=>b(!0),hideTags:!0}),e.jsx(_,{children:e.jsx(C,{align:"start",children:e.jsx(U,{variant:"secondary_short",color:"primary_light",onClick:()=>b(!0),children:"Change Model"})})})]}),e.jsxs(_s,{className:"gap-[3px]",children:[e.jsxs(_,{children:[e.jsxs(C,{children:[e.jsx(_,{className:"leading-5",children:e.jsx(l,{h4:!0,mNone:!0,children:"Inference Settings"})}),e.jsx(_,{children:e.jsx(l,{variant:"smallest",children:"Experiment with different generation settings."})})]}),e.jsx(C,{className:"w-32",children:e.jsx(_,{className:"text-[10.4px] whitespace-nowrap bg-secondary h-min font-bold leading-[18px] px-[4px] rounded-full text-white mt-1 ml-6",children:"True Supporters+"})})]}),e.jsxs(_,{className:"pt-1",children:[e.jsx(C,{justify:"start pr-3",children:e.jsx(l,{variant:"sm",children:"Response Max Tokens"})}),e.jsx(C,{className:"w-6",justify:"end",align:"end",children:e.jsx(l,{type:"primary",children:d})}),e.jsx(C,{className:"w-6",align:"end",children:e.jsx(K,{className:"relative bottom-1.5",target:"_blank",to:"https://docs.spicychat.ai/advanced/model-settings#response-max-tokens","aria-label":"reponse-max-tokens-info",children:e.jsx(Mt,{size:12,className:"cursor-pointer text-link"})})})]}),O&&e.jsx(_,{className:"pb-1",children:e.jsx(Kt,{size:"sm",minValue:180,maxValue:300,step:1,value:d,onChange:T,"aria-labelledby":"max_new_tokens"})}),e.jsxs(_,{className:"pt-1",children:[e.jsx(C,{justify:"start [&>*:first-child]:mr-3",children:e.jsx(l,{variant:"sm",children:"Temperature"})}),e.jsx(C,{justify:"end",align:"end",children:e.jsx(l,{type:"primary",children:i})}),e.jsx(C,{className:"w-10",align:"end",children:e.jsx(K,{className:"relative bottom-1.5",target:"_blank",to:"https://docs.spicychat.ai/advanced/model-settings#temperature","aria-label":"temperature-info",children:e.jsx(Mt,{size:12,className:"cursor-pointer text-link"})})})]}),O&&e.jsx(_,{className:"pb-1",children:e.jsx(Kt,{size:"sm",minValue:0,maxValue:1.5,step:.01,value:i,onChange:w,"aria-labelledby":"temperature"})}),e.jsxs(_,{className:"pt-2",children:[e.jsx(C,{justify:"start pr-3",children:e.jsx(l,{variant:"sm",children:"Top-P"})}),e.jsx(C,{justify:"end",align:"end",children:e.jsx(l,{type:"primary",children:u})}),e.jsx(C,{className:"w-10",align:"end",children:e.jsx(K,{className:"relative bottom-1.5",target:"_blank",to:"https://docs.spicychat.ai/advanced/model-settings#top-p-nucleus-sampling","aria-label":"top-p-info",children:e.jsx(Mt,{size:12,className:"cursor-pointer text-link"})})})]}),O&&e.jsx(_,{className:"pb-1",children:e.jsx(Kt,{size:"sm",minValue:.01,maxValue:1,step:.01,value:u,onChange:I,"aria-labelledby":"top-p"})}),e.jsxs(_,{className:"pt-2",children:[e.jsx(C,{justify:"start [&>*:first-child]:mr-3",children:e.jsx(l,{variant:"sm",children:"Top-K "})}),e.jsx(C,{justify:"end",align:"end",children:e.jsx(l,{type:"primary",children:j})}),e.jsx(C,{className:"w-10",align:"end",children:e.jsx(K,{className:"relative bottom-1.5",target:"_blank",to:"https://docs.spicychat.ai/advanced/model-settings#top-k","aria-label":"top-k-info",children:e.jsx(Mt,{size:12,className:"cursor-pointer text-link"})})})]}),O&&e.jsx(_,{className:"pb-1",children:e.jsx(Kt,{size:"sm",minValue:1,maxValue:100,step:1,value:j,onChange:A,"aria-labelledby":"top-k"})})]})]}),e.jsx(od,{isOpen:x,setIsOpen:y}),e.jsx(nu,{inferenceModel:n,isOpen:p,setIsOpen:b,permissions:h,updateInferenceModel:v})]})}ru.propTypes={onClose:L.func,isOpen:L.bool};let da=new Audio;const Hm=({voiceId:t,conversationId:s,voiceSelectionMode:n=!1,showVoiceSelectionModal:a,setShowVoiceSelectionModal:d,currentAudioMessageId:o,messageId:i,isAudioLoading:c,characterId:u,defaultPersonaId:m,loadMessages:j,handlePreferredVoiceActions:f})=>{const h=Je(),{isAuthenticated:x,register:y}=Qe(),[p,b]=r.useState(Ze.ALL),[g,v]=r.useState([]),[T,w]=r.useState(t),[I,A]=r.useState(!1),[D,O]=r.useState(!1),{checkIfPermissionExists:P}=he(),E=P(tl.TTS),N=Ks(Y=>{var fe;return(fe=Y==null?void 0:Y.voices)==null?void 0:fe.allVoices}),[R,k]=r.useState([]),G=x?vr.Member:vr.Guest,F=E&&t?Lt.Play:Lt.Idle,[H,V]=r.useState(F),z=c&&o===i,ne=()=>{const Y=o===i;let fe;!E||!t?fe=Lt.Idle:Y&&!z?fe=Lt.Stop:fe=Lt.Play,V(fe)},J=Y=>{switch(Y){case Ws.SAVE_CONVERSATION_VOICE_ID:V(Lt.Play),xe(),A(!1),w(t)}},$=Y=>{switch(Y){case Ws.GET_ALL_VOICES:xe();case Ws.SAVE_CONVERSATION_VOICE_ID:w(t),A(!1)}};r.useEffect(()=>{ne()},[E,t,o,z]),r.useEffect(()=>{a&&n&&f({action:cs.Get_Voices,errorCB:()=>$(Ws.GET_ALL_VOICES)})},[a,n]);const xe=()=>{O==null||O(!1),d==null||d(!1)};r.useEffect(()=>()=>{X()},[]);const de=Y=>R.filter(fe=>fe.gender===Y),W=()=>{let Y;return p===Ze.MALE?Y=de(Pr.MALE):p===Ze.FEMALE?Y=de(Pr.FEMALE):Y=R,Y=rd(Y,t),Y};r.useEffect(()=>{N!=null&&N.length&&k(nd(N,Ce))},[N==null?void 0:N.length]),r.useEffect(()=>{v(W())},[R==null?void 0:R.length,p,s]);const ge=async()=>{if(!(!E||z))switch(H){case Lt.Idle:O(!0),f({action:cs.Get_Voices,errorCB:()=>$(Ws.GET_ALL_VOICES)}),b(Ze.ALL);break;case Lt.Play:s&&!i&&await j(),f({action:cs.Play,messageId:i});break;case Lt.Stop:f({action:cs.Stop});break}},X=()=>{da.src=""},ae=()=>{if(x)return h(id);y()},Pe=async Y=>{Y&&(w(Y),X==null||X(),A(!0),f({action:cs.Set_Conversation_Voice_Id,selectedVoiceId:Y,characterId:u,defaultPersonaId:m,errorCB:()=>$(Ws.SAVE_CONVERSATION_VOICE_ID),successCB:()=>J(Ws.SAVE_CONVERSATION_VOICE_ID)}))},Ce=(Y,fe,Le)=>{if(!Y){X();return}Le&&(da||(da=new Audio),f({action:cs.Stop}),da.src=Le,da.play(),da.removeEventListener("ended",fe),da.addEventListener("ended",fe))},ve=Y=>{b(Y),X()},Z=[{active:p===Ze.ALL,label:Ze.ALL,onPress:()=>ve(Ze.ALL)},{active:p===Ze.MALE,label:Ze.MALE,onPress:()=>ve(Ze.MALE)},{active:p===Ze.FEMALE,label:Ze.FEMALE,onPress:()=>ve(Ze.FEMALE)}],me=Y=>{I||(X(),Y||xe())},Ge=()=>{I||(X(),xe())};return n?e.jsx(Kx,{open:a,listItems:R,loading:!(N!=null&&N.length),actions:Z,listItemsByCategory:g,onVoiceSelection:Pe,onSearch:()=>X(),defaultSelectedVoice:T,voiceSelectionLoading:I,disableClose:I,onCancel:Ge,onOpenChange:me}):e.jsx(jh,{loading:z,onPress:ge,variant:H,disabled:!E,onPressUpgrade:ae,voiceSelection:{open:D,loading:!(N!=null&&N.length),actions:Z,listItemsByCategory:g,onVoiceSelection:Pe,listItems:R,onSearch:()=>X(),defaultSelectedVoice:T,voiceSelectionLoading:I,disableClose:I,onCancel:Ge,onOpenChange:me},voiceUpgradeVariant:G})},$m=({onNewConversation:t=()=>{},character:s={},onRemoveChat:n=()=>{},isShowRemove:a=!1,conversationLength:d=0,setErrorModalVisible:o=()=>{},setErrorModalMessage:i=()=>{},isBotAccessAllowed:c=!1,conversation:u=[],altMsgs:m=[],conversationId:j="",handleCloneTitleUpdate:f=()=>{},conversationLabel:h="",setIsChangePersona:x=()=>{},setIsNewConversation:y=()=>{},isDoNotShowChoosePersonaChecked:p=!1,setSelectedPersonaIds:b=()=>{},selectedPersonaId:g="",onUserStartCloning:v=()=>{},voiceId:T="",handlePreferredVoiceActions:w=()=>{},showVoiceSelectionModal:I=!1,showShare:A=!1,showModelSettings:D=!1,showBlockModal:O=!1,isUpdateCloneTitleModal:P=!1,isShowConversationMemoryModal:E=!1,isShowChangePersonaConfirmationModal:N=!1,showChatbotRatingModal:R=!1,handleModalVisibility:k=()=>{},defaultPersonaId:G})=>{const{logEvent:F}=bt(),H=Je(),{isDesktop:V}=Ie(),{characterId:z}=Ps(),ne=Ds().pathname,J=aa(ne),{errorCode:$,errorExtras:xe}=Ee(),{permissions:de,onlyUserId:W,userId:ge}=he(),{hasAccessToTTS:X}=Ft(),{likedBots:ae,blockedUsers:Pe,onUserBlockCreator:Ce,isLoading:ve,onUserLikebot:Z,blurNSFW:me}=fs(),[Ge,Y]=r.useState(!1),{status:fe,bypass:Le}=Ks(we=>we==null?void 0:we.waitingQueue)||{},Fe=fe!=="waiting"||Le===z,We=(s==null?void 0:s.creator_user_id)===W,Be=(s==null?void 0:s.visibility)===ot.PUBLIC||(s==null?void 0:s.visibility)===ot.HIDDEN,Ye=window.location.origin,{isAuthenticated:Ke}=Qe(),ze=Pe==null?void 0:Pe.includes(s==null?void 0:s.creator_user_id),B=JSON.parse(Q.getItem(Is))||!1,ce=W&&W===(s==null?void 0:s.creator_user_id),Ne=(s==null?void 0:s.visibility)==="public"&&W,je=u==null?void 0:u.some(we=>we==null?void 0:we.conversation_id),{isUserPremium:js}=ld(),bs=!B&&je&&(de==null?void 0:de.some(we=>["memory_manager","conversation_memory_auto"].includes(we))),ns=(s==null?void 0:s.avatar_is_nsfw)&&me;r.useEffect(()=>{var we;ae&&s&&Y((we=ae||[])==null?void 0:we.includes(s==null?void 0:s.id))},[ae,s]),r.useEffect(()=>{Wc({errorCode:$,errorExtras:xe,setErrorModalMessage:i,setErrorModalVisible:o,setLiked:Y})},[$,xe,i,o,Y]);const M=async we=>{switch(document.body.style.overflow="",w({action:St.Stop}),we){case be.START_NEW_CHAT:{!Ke||p?t():(b([g]),y(!0),x(!0));break}case be.VIEW_SAVED_CHAT:{H("/chats/".concat(z));break}case be.REMOVE_MESSAGES:{n(!0);break}case be.CHANGE_PERSONA:{j?k(Ns.CHANGE_PERSONA_CONFIRMATION_MODAL,!0):x(!0);break}case be.CLONE_CONVERSATION:{v(u.concat(m)),k(Ns.CLONE_CONVERSATION_MODAL,!0);break}case be.CHANGE_TITLE:{k(Ns.UPDATE_CLONE_TITLE_MODAL,!0);break}case be.CHANGE_VOICE:{k(Ns.SHOW_VOICE_SELECION_MODAL,!0),w({action:St.Get_Voices,errorCB:()=>k(Ns.SHOW_VOICE_SELECION_MODAL,!1)});break}case be.LIKE_UNLIKE_BOT:{const Es=s==null?void 0:s.id;await Z(Es,J);break}case be.VIEW_BOT_PROFILE:{H("/chatbot/".concat(z));break}case be.EDIT_CHATBOT:{H("/chatbot/edit/".concat(z),{replace:!0});break}case be.BLOCK_CREATOR:{k(Ns.SHOW_BLOCK_MODAL,!0);break}case be.MANAGE_MEMORIES:{k(Ns.CONVERSATION_MEMORY_MODAL,!0);break}case be.GENERATION_SETTINGS:{k(Ns.SHOW_MODEL_SETTINGS,!0);break}}},ee=async()=>{await Ce(s==null?void 0:s.creator_user_id),H("/")},re=r.useCallback(()=>{k(Ns.SHOW_BLOCK_MODAL,!1)},[k]),De=()=>{b([g]),x(!0)},qe=[{icon:oe.MESSAGE_PLUS,label:"Start New Chat",description:"Current chat will be saved",onPress:()=>M(be.START_NEW_CHAT),hidden:!Fe},{icon:oe.LOGS,label:"View Saved Chats",onPress:()=>M(be.VIEW_SAVED_CHAT),replace:!0},{icon:oe.TRASH,label:"Remove Messages",onPress:()=>M(be.REMOVE_MESSAGES),hidden:!a||!Fe},{icon:oe.VENETIAN_MASK,label:"Change Persona",onPress:()=>M(be.CHANGE_PERSONA),isHidden:!Ke},{icon:oe.COPY,label:"Clone Conversation",onPress:()=>M(be.CLONE_CONVERSATION),isHidden:!a},{icon:oe.EDIT,label:"Change Title",onPress:()=>M(be.CHANGE_TITLE),isHidden:!je},{icon:oe.FAVORITE,label:Ge?"Remove Bot From Favorite":"Add Bots to Favorite",onPress:()=>M(be.LIKE_UNLIKE_BOT),isHidden:!Ke||ce},{icon:oe.BAN,label:"Block Creator",description:"Creator's bot will all be blocked",onPress:()=>M(be.BLOCK_CREATOR),isHidden:We||!Ke},{icon:oe.EDIT,label:"Edit Chatbot",onPress:()=>M(be.EDIT_CHATBOT),isHidden:!We,isDivider:!0},{icon:oe.VOLUME_2,label:T?"Voice Change":"Set Voice",onPress:()=>M(be.CHANGE_VOICE),isHidden:!j||!js||!X},{icon:oe.BOOK_TEXT,label:"Manage Memories",onPress:()=>M(be.MANAGE_MEMORIES),isHidden:!bs,isDivider:!0,className:"border-0 border-t-1 border-solid !border-[#454648]"},{icon:oe.SLIDER_VERTICAL,label:"Generation Settings",onPress:()=>M(be.GENERATION_SETTINGS),isHidden:B}],Ve=we=>{F(we,{user_id:ge,character_id:z,page_name:J})},ls=()=>{w({action:St.Stop}),k(Ns.SHOW_SHARE,!0),Ve(Ss.CHATBOT_SHARE)};return e.jsxs(_,{className:"self-center w-full min-h-[56px] items-center",style:{maxWidth:On},children:[e.jsx(C,{children:e.jsxs(_,{className:"items-center gap-3",children:[!V&&e.jsx(Dc,{withLabel:!1}),e.jsxs(_,{className:"items-center gap-3",children:[e.jsx("div",{children:e.jsx(zr,{src:s==null?void 0:s.avatar_url,name:s==null?void 0:s.name,blurred:ns})}),e.jsxs(C,{children:[e.jsx(K,{to:"/chatbot/".concat(z),onClick:()=>Ve(Ss.CHATBOT_DESCRIPTION),"aria-label":"chatbot-profile",children:e.jsx(is,{className:"text-gray-10 dark:text-gray-12 break-all line-clamp-1",variant:Ts.HEADING_6_BOLD,children:s==null?void 0:s.name})}),e.jsx(K,{to:"/creator/".concat(s==null?void 0:s.creator_username),"aria-label":"creator-profile",children:e.jsxs(is,{className:"text-gray-9 dark:text-gray-11 break-all line-clamp-1",variant:Ts.PARAGRAPH_XSMALL_REGULAR,children:["@",s==null?void 0:s.creator_username]})})]})]})]})}),e.jsxs(_,{justify:"end",align:"center",className:"gap-sm",children:[Ne&&!ze&&e.jsx(Cs,{icon:oe.LIKE,variant:$e.OUTLINED,size:as.MEDIUM,onClick:()=>{w({action:St.Stop}),k(Ns.CHATBOT_RATING_MODAL,!0)}}),Be&&!ze&&!B&&e.jsx(Cs,{icon:oe.SHARE,variant:$e.OUTLINED,size:as.MEDIUM,onClick:ls,"aria-label":"share"}),!ze&&c&&e.jsx(Fr,{listItems:qe,placement:"bottom-end",children:e.jsx(bh,{children:e.jsx(Cs,{variant:$e.OUTLINED,icon:oe.MORE_HORIZONTAL,size:as.MEDIUM,"aria-label":"chat-dropdown"})})})]}),e.jsx($r,{visible:A,title:"Share this Chatbot",shareUrl:"".concat(Ye,"/chat/").concat(z),instructions:"This URL points to this chatbot. Your chats remain private.",shareMessage:"Chatting with ".concat(s.name," on SpicyChat.AI! ").concat(Ye,"/chat/").concat(z),setShowShare:we=>k(Ns.SHOW_SHARE,we)}),e.jsx(ru,{isOpen:D,onClose:()=>k(Ns.SHOW_MODEL_SETTINGS,!1)}),e.jsx(Xs,{heading:"Block Creator",actionButtonColor:"error",actionButtonText:"Block",discardButtonText:"Cancel",onUserConfirmation:ee,isVisible:O,isLoading:ve,handleClose:re,confirmationMessage:ol+(s==null?void 0:s.creator_username)}),P&&e.jsx(Vm,{isVisible:P,setIsUpdateCloneTitleModal:we=>k(Ns.UPDATE_CLONE_TITLE_MODAL,we),handleCloneTitleUpdate:f,conversationLabel:h,characterName:s==null?void 0:s.name}),E&&e.jsx(Yc,{conversationId:j,isOpen:E,setIsOpen:we=>k(Ns.CONVERSATION_MEMORY_MODAL,we)}),N&&e.jsx(Xs,{heading:"Change Persona",confirmationMessage:e.jsxs(e.Fragment,{children:[e.jsx(is,{children:"Changing persona in the middle of a conversation will not update references to previous persona name from messages or memories."}),e.jsx(S,{y:2}),e.jsx(is,{children:"Are you sure you want to proceed?"})]}),isVisible:N,onUserConfirmation:De,handleClose:()=>k(Ns.CHANGE_PERSONA_CONFIRMATION_MODAL,!1)}),I&&e.jsx(Hm,{voiceId:T,conversationId:j,showVoiceSelectionModal:I,setShowVoiceSelectionModal:we=>k(Ns.SHOW_VOICE_SELECION_MODAL,we),voiceSelectionMode:!0,handlePreferredVoiceActions:w,characterId:z||"",defaultPersonaId:G})]})},Nt={INVALID_ACCESS:{ERROR:"invalidAccess",MESSAGE:"You are not allowed to chat with this character. It's either private or deleted."},BLOCKED_BOT_CREATOR:{ERROR:"blockedBotCreator",MESSAGE:"You have blocked the creator of this character. Please unblock creator to use this character."},IMAGE_PROMPT_UNDERAGE:{ERROR:"imagePromptUnderage",MESSAGE:"The image prompt might contain references to underage context, please consider making changes and try again."},IMAGE_CONTENT_GUIDELINES:{ERROR:"imageContentGuidelines",MESSAGE:"Sorry, we cannot display this image as it may violate our content guidelines."},DEFAULT:{MESSAGE:"There was an error processing the last request."}},Ji=({error:t,errorCode:s,errorWait:n,errorWaitDelay:a,errorResubmitMessage:d,resetError:o,invalidUrlError:i,character:c})=>{const{isAuthenticated:u,register:m}=Qe(),[j,f]=r.useState(!1),[h,x]=r.useState(!1),y=JSON.parse(Q.getItem(Is))||!1,{applicationName:p,branding:b}=vs(),g=y?b==null?void 0:b.siteIcon:b==null?void 0:b.logo,[v,T]=r.useState(p),[w,I]=r.useState(""),[A,D]=r.useState(!1),[O,P]=r.useState(!0),{onUserUnblockCreator:E,isLoading:N}=fs(),{status:R}=he(),k=R===ma.ACTIVE,{isMobile:G}=Ie(),F=async()=>{await E(c==null?void 0:c.creator_user_id)},H=()=>{D(!1)},V=()=>{o(),d()};return r.useEffect(()=>{if(Tr[s])I(Tr[s]),P(!0);else if(s===lt.CODE)T(lt.TITLE),u?I(k?lt.CHAT.SUBSCRIBERS:lt.CHAT.FREE):(I(lt.CHAT.GUEST),x(!0));else if(t)if(i)I((i==null?void 0:i.message)||i),f(!1);else switch(t){case Nt.INVALID_ACCESS.ERROR:I(Nt.INVALID_ACCESS.MESSAGE),f(!1),P(!1);break;case Nt.BLOCKED_BOT_CREATOR.ERROR:I(Nt.BLOCKED_BOT_CREATOR.MESSAGE),f(!1),P(!1);break;case Nt.IMAGE_CONTENT_GUIDELINES.ERROR:I(Nt.IMAGE_CONTENT_GUIDELINES.MESSAGE),f(!1),P(!0);break;case Nt.IMAGE_PROMPT_UNDERAGE.ERROR:I(Nt.IMAGE_PROMPT_UNDERAGE.MESSAGE),f(!1),P(!0);break;default:I("".concat(Nt.DEFAULT.MESSAGE," (").concat(t,")")),f(!0),P(!1);break}},[t,i,s]),e.jsxs(e.Fragment,{children:[e.jsx(S,{y:.2}),e.jsx(_,{className:"sticky bottom-0 justify-center",children:e.jsx(ps,{className:"sticky bottom-0 bg-[#2c1f2122] dark:bg-[#2c1f21] w-full self-center mb-1 shadow-[0_12px_24px_rgb(104,112,118,0.15),0_12px_14px_rgb(104,112,118,0.1)] dark:shadow-md border-1 border-solid pr-2 border-[#FC6666]",style:{maxWidth:On},children:e.jsxs(ds,{className:"pb-[8px] pt-[8px] pl-[0px] pr-[2px] w-full",children:[e.jsxs(_,{children:[e.jsx(C,{className:"w-max ml-[4px] mt-[5px]",children:e.jsx(_,{children:e.jsx(Bt,{src:g,radius:"lg",classNames:{base:"w-16 h-16 ".concat(y?"p-2 bg-black":"invert p-3.5 bg-white")}})})}),e.jsx(C,{className:"pl-[6px] [overflow-wrap:anywhere] grow",children:e.jsxs("div",{className:"w-full  justify-between flex ".concat(G?"flex-col":"flex-row items-center"),children:[e.jsxs("div",{className:"w-full justify-between",children:[e.jsx(_,{className:"w-full justify-between",children:e.jsx(C,{children:e.jsx(_,{children:e.jsx(l,{b:!0,children:v})})})}),e.jsx(_,{className:"[&>*:first-child]:block [&>*:first-child]:text-base mt-2",children:e.jsx(l,{children:w})}),t===Nt.BLOCKED_BOT_CREATOR.ERROR&&e.jsx(_,{justify:"center",children:e.jsx(U,{size:"sm",color:"primary_light",variant:"secondary",className:"mt-2",onClick:()=>D(!0),children:"Unblock Creator"})}),j&&n>0&&e.jsxs(e.Fragment,{children:[e.jsx(_,{justify:"center",children:e.jsxs(l,{variant:"xs",children:["You can try again in ",Math.round(n)," seconds."]})}),e.jsx(S,{y:.2}),e.jsx(_,{justify:"center",children:e.jsx(sc,{size:"sm",value:a-n,max:a})})]}),j?e.jsx(_,{justify:"center",className:"pt-[10px]",children:e.jsx(U,{variant:"secondary_short",onClick:V,isDisabled:n>0,children:"Resubmit"})}):e.jsx(e.Fragment,{})]}),e.jsx("div",{children:h?e.jsx(e.Fragment,{children:e.jsx(C,{justify:"center",className:"pt-[10px] max-w-40",children:e.jsx(U,{variant:"primary",color:"primary_strong",onClick:m,children:"Sign Up Free"})})}):e.jsx(e.Fragment,{})})]})})]}),O&&e.jsx(Da,{size:24,className:"cursor-pointer absolute right-0",onClick:o})]})})}),e.jsx(Xs,{heading:"Unblock Creator",isVisible:A,confirmationMessage:hl+(c==null?void 0:c.creator_username),handleClose:H,onUserConfirmation:F,isLoading:N})]})};Ji.propTypes={error:L.string,errorCode:L.string,errorWait:L.number,errorWaitDelay:L.number,errorResubmitMessage:L.func,invalidUrlError:L.object,character:L.object,resetError:L.func};var iu={VITE_MEGABRAIN_TOKEN:"spicychat-93j0wse7sef",VITE_MEGABRAIN_MIN_CONV_LENGTH:"10"};const zm=iu.VITE_MEGABRAIN_TOKEN,Wm=iu.VITE_MEGABRAIN_MIN_CONV_LENGTH,jl=({character:t,conversation_id:s,messages:n,isLoading:a,children:d})=>{const{userId:o,permissions:i}=he(),{callApi:c,jsonApiService:u}=Ee(),[m,j]=Yt.useState(""),f=async p=>{const g=new TextEncoder().encode(p),v=await crypto.subtle.digest("SHA-1",g);return Array.from(new Uint8Array(v)).map(I=>I.toString(16).padStart(2,"0")).join("")},h=(p,b)=>{let g={event_name:p,character_id:t==null?void 0:t.id,conversation_id:s,...b};c(u.createResource,"event",g)};let x=!1;i&&(x=i.includes("display_ads")&&n.length>Wm);const y=n==null?void 0:n.slice(-10).map(p=>({role:p.role==="bot"?"assistant":"user",content:p.content,createdAt:p.createdAt,id:p.id}));return r.useEffect(()=>{o&&f(o).then(p=>{j(p)})},[o]),o?e.jsx(e.Fragment,{children:e.jsx(tc,{visitorId:m,userId:o,publisherToken:zm,isLoading:a,messages:y,isDisabled:!x,conversationId:s,character:{name:t==null?void 0:t.name,persona:t==null?void 0:t.persona,greeting:t==null?void 0:t.greeting,tags:t==null?void 0:t.tags,is_nsfw:t==null?void 0:t.is_nsfw,title:t==null?void 0:t.title},onAdView:({id:p,code:b,messageId:g,content:v})=>h("ads_megabrain_view",{ad_id:p,code:b,message_id:g,content:v}),onAdClick:({id:p,code:b,messageId:g,content:v})=>h("ads_megabrain_click",{ad_id:p,code:b,message_id:g,content:v}),children:d})}):e.jsx(e.Fragment,{children:d})};jl.defaultProps={messages:[],isLoading:!1};jl.propTypes={messages:L.array,isLoading:L.bool,character:L.object.isRequired,conversation_id:L.string.isRequired};function Ym(t){const{isOpen:s,handleFlagMessage:n,onClose:a,isLoading:d,progressStep:o,setProgressStep:i}=t,[c,u]=r.useState(""),[m,j]=r.useState(""),f=o===Re.SELECT_OPTION,h=()=>{var D,O,P,E;switch(o){case Re.SELECT_OPTION:case Re.OPTION_SELECTED:return(D=nr)==null?void 0:D[Re.SELECT_OPTION];case Re.ADD_COMMENT:return(O=nr)==null?void 0:O[Re.ADD_COMMENT];case Re.DONE:return(P=nr)==null?void 0:P[Re.DONE];case Re.ERROR:return(E=nr)==null?void 0:E[Re.ERROR];default:return}},{description:x,subDescription:y}=h(),b=o===Re.ADD_COMMENT&&!(m!=null&&m.trim())?"Skip":o===Re.DONE?"Done":o===Re.ERROR?"Close":"Next",g=D=>{i(Re.OPTION_SELECTED),u(D)},v=()=>{j(""),i(Re.SELECT_OPTION),u("")},T=()=>{v(),a()},w=D=>{j(D)},I=()=>{switch(o){case Re.OPTION_SELECTED:return i(Re.ADD_COMMENT);case Re.ADD_COMMENT:return n({comment:m,reason:c});case Re.DONE:case Re.ERROR:return T()}},A=()=>{switch(o){case Re.SELECT_OPTION:case Re.OPTION_SELECTED:return e.jsx("div",{className:"pt-[1px]",children:e.jsx(yh,{name:"FlagMessageReason",items:ac,value:c,onValueChange:g,size:_h.LARGE})});case Re.ADD_COMMENT:return e.jsx(e.Fragment,{children:e.jsx("textarea",{placeholder:"Reason",onChange:D=>{w(D.target.value)},value:m,className:"bg-gray-3 rounded-md p-md border-1 border-solid border-gray-8 resize-none text-medium w-full",rows:4})});default:return null}};return e.jsx(e.Fragment,{children:e.jsxs(es,{className:"min-h-[300px]",title:"Report",description:x,secondaryDescription:y,open:s,onOpenChange:D=>{D||T()},children:[A(),e.jsx("div",{className:"flex flex-1 flex-col justify-end",children:e.jsx(wt,{size:as.LARGE,onClick:I,disabled:f||d,loading:d,"aria-label":"next",children:e.jsx(is,{children:b})})})]})})}const Km=({children:t})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs opacity-60 pl-[4px] pt-[8px] pb-[12px]",children:"Advertisement"}),e.jsx(ps,{className:"bg-cardColor w-full self-center mb-1 shadow-[0_12px_24px_rgb(104,112,118,0.15),0_12px_14px_rgb(104,112,118,0.1)] dark:shadow-md border-1 border-solid pr-2 border-transparent",style:{maxWidth:On},children:e.jsx(ds,{className:"pb-[8px] pt-[8px] pl-[8px] pr-[8px] w-full",children:t})})]}),qm=({children:t})=>e.jsx(e.Fragment,{children:e.jsx(vh,{user:{src:"/Assets/spicychat_maskable_icon_x192.png",name:"SpicyChat"},chatBubbleVoice:{isHidden:!0},children:e.jsx(l,{className:"[&>div]:bg-transparent",children:t})})}),Jm=({messageId:t,scrollReference:s})=>{const[n,a]=r.useState(),[d,o]=r.useState("adbot"),i=r.useRef(null),[{width:c,height:u},m]=r.useState({width:void 0,height:void 0}),j=nc(m,200);rc({ref:i,onResize:j}),r.useEffect(()=>{if(u&&s){let h=s.current;h&&(h.scrollTop=h.scrollHeight-h.clientHeight)}},[u,s]),r.useEffect(()=>{},[t]);const f=d==="banner"?Km:qm;return e.jsx("div",{ref:i,children:e.jsx(ic,{code:"spicyChatInlineAd",messageId:t,wrapper:h=>e.jsx(f,{children:h})})})},dn={cloneAll:"Clone Fully",clonePartial:"Clone Partially",btnClone:"Clone",btnCancel:"Cancel",cloneChatTitle:"Title your Conversation"},Qm=({display:t,onClose:s,onUserConfirmCloneChoice:n})=>{const[a,d]=r.useState(""),[o,i]=r.useState(qt.PARTIAL),c=()=>{s()},u=()=>{n(qt.CANCEL,a),c()},m=()=>{n(o,a)};return e.jsxs(es,{title:"Clone Conversation",classNames:{title:"text-center pl-[28px]"},backdrop:"blur",open:t,onOpenChange:c,children:[e.jsx(_,{justify:"center",className:"text-center",children:e.jsxs(En,{orientation:"horizontal",value:o,onValueChange:i,className:"flex *:gap-8",children:[e.jsx(ua,{value:qt.PARTIAL,children:dn.clonePartial}),e.jsx(ua,{value:qt.FULL,children:dn.cloneAll})]})}),e.jsxs(C,{justify:"center",align:"center",className:"p-[10px] max-w-[440px] mx-[10px] text-center gap-6",children:[e.jsxs(q,{className:"flex justify-center",children:[e.jsx("span",{className:"text-red-600",children:"*"}),e.jsx(l,{b:!0,type:"nutreal",variant:"regular",mNone:void 0,children:dn.cloneChatTitle})]}),e.jsx(q,{className:"w-[300px] max-w-full self-center",children:e.jsx(ms,{variant:"secondary_bordered",color:"primary",placeholder:"Add a title for your cloned conversation",classNames:{input:"text-center"},value:a,onValueChange:d,maxLength:50})})]}),e.jsx(_,{justify:"center",children:e.jsxs(q,{className:"*:max-w-[150px] *:grow w-full justify-center",gap:1,children:[e.jsx(U,{variant:"bordered",onPress:u,children:dn.btnCancel}),e.jsx(U,{variant:"primary",color:"primary_strong",onPress:m,isDisabled:!(a!=null&&a.trim()),children:dn.btnClone})]})})]})},Xm=()=>{const{permissions:t}=he(),s=t==null?void 0:t.includes("skip_waiting_room");return e.jsx(_,{justify:"center",className:"text-center rounded-lg border-white",children:e.jsx("div",{className:"text-wrap p-2 mb-2 border-2",children:e.jsxs(l,{variant:"xs",type:"neutral",children:["Messages before this point are no longer factored into text generation.",!s&&e.jsxs(e.Fragment,{children:[" Consider ",e.jsx(K,{to:Ae.subscribe,className:"underline",children:"subscribing"})," to upgrade your chatbots memory."]})]})})})},Zm=({character:t={},disclaimer:s="",chatHeroAlertProps:n})=>{const{src:a,name:d,tags:o=[],title:i,blurred:c}=t,{visible:u}=n;return e.jsxs(C,{className:"items-center gap-md max-mob:px-md",children:[e.jsxs(C,{className:"py-md px-lg max-mob:px-0 gap-sm items-center",children:[e.jsxs(C,{className:"items-center gap-1",children:[a&&e.jsx(Ur,{src:a,alt:d||"Character avatar",width:80,height:80,className:"rounded-full ".concat(c?"blur-[10px]":"")}),d&&e.jsx(is,{className:"text-blue-1 dark:text-blue-12",variant:Ts.LABEL_LARGE_MEDIUM,children:d})]}),o.length>0&&e.jsx(_,{className:"gap-1 flex-wrap justify-center",children:o==null?void 0:o.map((m,j)=>e.jsx(gr,{className:"cursor-default",children:m},j))}),i&&e.jsx(is,{className:"text-gray-11",variant:Ts.LABEL_MEDIUM_REGULAR,children:i})]}),s&&e.jsx(is,{className:"text-gray-10 py-md text-center",variant:Ts.LABEL_SMALL_REGULAR,children:s}),u&&e.jsx(dc,{isDismissable:!1,...n})]})},eg=Yt.memo(Zm);var rt=(t=>(t[t.SHOW_VOICE_SELECION_MODAL=0]="SHOW_VOICE_SELECION_MODAL",t[t.SHOW_VOICE_UPGRADE_MODAL=1]="SHOW_VOICE_UPGRADE_MODAL",t[t.SHOW_SHARE=2]="SHOW_SHARE",t[t.SHOW_MODEL_SETTINGS=3]="SHOW_MODEL_SETTINGS",t[t.SHOW_BLOCK_MODAL=4]="SHOW_BLOCK_MODAL",t[t.UPDATE_CLONE_TITLE_MODAL=5]="UPDATE_CLONE_TITLE_MODAL",t[t.CONVERSATION_MEMORY_MODAL=6]="CONVERSATION_MEMORY_MODAL",t[t.CHANGE_PERSONA_CONFIRMATION_MODAL=7]="CHANGE_PERSONA_CONFIRMATION_MODAL",t[t.CLONE_CONVERSATION_MODAL=8]="CLONE_CONVERSATION_MODAL",t[t.CHATBOT_RATING_MODAL=9]="CHATBOT_RATING_MODAL",t))(rt||{});function sg({characterId:t,conversationLength:s,open:n,onClose:a}){var I;const{sendUserInteractionRating:d}=Rn(),{userId:o}=he(),{callApi:i,jsonApiService:c}=Ee(),{onUserSetCharacterRating:u,characterRatings:m}=fs(),j=m,f=(I=j==null?void 0:j[t!=null?t:""])!=null?I:null,[h,x]=r.useState(f),[y,p]=r.useState(!1),b=Zs(),g=A=>{let D=ul(A);b(za(D))},v=async A=>{p(!0);const D=[];if(f!==A){D.push(i(c.createResource,"event",{event_name:"characterRating",character_id:t,rating:A,conversation_length:s}));let O=0;switch(A){case Aa.DISLIKE:O=pi.DISLIKE;break;case Aa.LIKE:O=pi.LIKE;break;case Aa.LOVE:O=pi.LOVE;break;default:p(!1),a();return}D.push(d(o,t,O))}try{u({characterId:t,rating:A}),await Promise.all(D),a(),p(!1),g("Rating Submitted")}catch(O){a(),p(!1),g("Failed to submit rating")}},T=[{label:"Cancel",onPress:()=>a(),variant:$e.TEXT,size:as.LARGE},{label:"Done",onPress:()=>{v(h)},variant:$e.CONTAINED,size:as.LARGE,disabled:f===h||!h,loading:y}],w=[{value:Aa.DISLIKE,icon:oe.DISLIKE,selectedClassName:"bg-red-9 active:bg-red-9 active:border-red-9",classNames:"hover:bg-red-9 hover:border-red-9"},{value:Aa.LIKE,icon:oe.LIKE,selectedClassName:"bg-blue-9 active:bg-blue-9 active:border-blue-9",classNames:"hover:bg-blue-9 hover:border-blue-9"},{value:Aa.LOVE,icon:oe.LIKE,selectedClassName:"bg-purple-9 active:bg-purple-9 active:border-purple-9",classNames:"hover:bg-purple-9 hover:border-purple-9"}];return e.jsx(es,{title:"Rate Chatbot",description:"Rating chatbots helps personalize recommendations.",open:n,actions:T,onOpenChange:a,children:e.jsx("div",{className:"flex justify-between gap-md",children:w.map(A=>{const D=h===A.value;return e.jsx(wt,{className:"flex-1 hover:text-white ".concat(D?A==null?void 0:A.selectedClassName:" "," ").concat(A.classNames),iconStart:A.icon,iconEnd:A.value===qx?A.icon:void 0,onClick:()=>x(A.value),shape:fn.SQUARE,size:as.LARGE,variant:D?$e.CONTAINED:$e.OUTLINED},A==null?void 0:A.value)})})})}const tg=5,ag=()=>{var El,Al,Tl,Il,Pl;const{characterId:t,conversationId:s}=Ps(),{personas:n,selectedPersona:a,setSelectedPersonaIds:d,onUserConfirmChangePersonaInConversation:o,setPersonaToChat:i,loading:c,onUserConfirmSelectedPersonaToChat:u,getDefaultPersona:m,resetSelectedPersonaIds:j,resetSelectedPersonaToChat:f,personaError:h,defaultPersonaId:x,selectedPersonaIds:y}=Va(),{isAuthenticated:p}=Qe(),{name:b="Honey",avatar_url:g}=a||m()||{},v=Q.getItem(Kc)==="true",T=p?Bl.MEMBER:Bl.GUEST,{status:w,bypass:I,position:A,time_left:D}=Ks(_e=>_e==null?void 0:_e.waitingQueue)||{},[O,P]=r.useState(!1),{character:E,conversation:N,currentConversationId:R,createConversation:k,isTyping:G,generate:F,altMsgs:H,altMsgPosition:V,changeAltMsgPosition:z,onNewConversation:ne,error:J,errorCode:$,resetError:xe,removeMesages:de,isRemoveMessageLoading:W,removeMessageIdx:ge,setRemoveMessageIdx:X,removalMode:ae,setRemovalMode:Pe,setConversation:Ce,setAltMsgs:ve,loadMessages:Z,lastMessageId:me,isLastMessageIdDeleted:Ge,cappedMessageId:Y,loadMoreMessages:fe,isLoadingMessages:Le,sendRating:Fe,invalidUrlError:We,handleCloneTitleUpdate:Be,isCloneUpdateTitleLoading:Ye,conversationLabel:Ke,setConversationLabel:ze,isChoosePersona:B,setIsChoosePersona:ce,messagesLoading:Ne,displayError:je,displaySuccess:js,handleLoadedMessages:bs,voiceId:ns,setVoiceId:M}=qc({characterId:t,conversationId:s,name:b,selectedPersona:a,personas:n,setPersonaToChat:i,isDoNotShowChoosePersonaChecked:v,getDefaultPersona:m,defaultPersonaId:x,setSelectedPersonaIds:d,setIsNewConversation:P}),{handlePreferredVoiceActions:ee,rateVoiceQuality:re,currentAudioMessageId:De,isAudioLoading:qe,rateVoiceModal:Ve,handleRateVoiceQualityModalClose:ls,setInfoMessageForRatingVoice:we,infoMessage:Es,loadingFromPreferredVoice:Xe}=Jc({voiceId:ns,setVoiceId:M,conversationId:R,handleLoadedMessages:bs,displaySuccess:js,displayError:je}),dt=Je(),et=ta(),[st,ys]=r.useState(-1),[tt,qs]=r.useState(""),us=r.useRef(null),Gs=r.useRef(null),[Vs,ut]=r.useState(0),[Vt,Ht]=r.useState(!0),[yt,At]=r.useState(!1),[Tt,_t]=r.useState(!1),[It,Pt]=r.useState(!1),[Rt,at]=r.useState(!1),[nt,vt]=r.useState(!1),[hs,Ot]=r.useState(!1),[ie,pe]=r.useState(null),[os,Hs]=r.useState(!1),[ht,Js]=r.useState(!1),[ss,Us]=r.useState(!1),[xt,$s]=r.useState(!1),[ra,Mn]=r.useState(!0),[ga,Dn]=r.useState(!1),Ya=J&&!(J==="AbortError")||tt,Jr=ra&&N,Un=ga&&N,ia=Hr(window.location.hostname),[Ka,Fn]=r.useState(!1),[Bn,Qr]=r.useState(""),{blockedUsers:fa}=fs(),{isDesktop:Xr,hoverNone:Gn,isMobile:kt,isTablet:Vn}=Ie(),Hn=JSON.parse(Q.getItem(Is))||!1,[Rs,qa]=r.useState(!1),{onFlagMessageHandler:Zr,success:$n,isLoading:ei,error:ja,resetErrorAndSuccess:si,progressStep:zn,setProgressStep:Ja}=lc(),[ba,Wn]=r.useState(!1),[Fs,ya]=r.useState({}),{onUserCancelCloning:ti,onUserStartCloning:Qa,onUserSelectedCloningType:Yn,isCloningConversationInProgress:_a,onResetCloneForNextUse:va,clonedConversationInfo:Xa,cloningConversationError:$t,isUserChoiceLastMessageRequired:zt,onUserConfirmPartialCloning:ai,shouldCurrentMessageBeSelectedForCloning:Za,setLastMsgIndexForPartialCloning:en,selectedMessageIndex:ni}=oc(),[Na,Kn]=r.useState(!1),[sn,tn]=r.useState(!1),qn=w!==mn.WAITING||I===t||ia.isPartner||t===Ir,Ca=E&&((El=Object.keys(E))==null?void 0:El.length)>0&&!We,an=fa==null?void 0:fa.includes(E==null?void 0:E.creator_user_id),Jn=!qn||!Ca||an||kt&&sn;r.useEffect(()=>{h!=null&&h.error_type&&je(xl[h==null?void 0:h.error_type])},[h,et]),r.useLayoutEffect(()=>{let _e=us.current;_e&&(_e.scrollTop=_e.scrollHeight,ut(Un?_e.scrollTop:_e.scrollHeight-_e.clientHeight)),(N==null?void 0:N.length)>0&&setTimeout(()=>{Mn(!1)},1e3)},[Jr,G,ga]),r.useLayoutEffect(()=>{let _e=us.current;_e&&(_e.scrollTop=_e.scrollHeight-_e.clientHeight-Vs),ga&&setTimeout(()=>{Dn(!1)},1e3)},[Un]),r.useEffect(()=>{let _e;return J&&st===-1?ys(tg):J&&st>0&&(_e=setTimeout(()=>{ys(Me=>Me-.5)},500)),J||ys(-1),()=>{clearTimeout(_e)}},[J,st]),r.useEffect(()=>()=>{O&&P(!1),j(),f()},[]),r.useEffect(()=>($n&&(js(),Fs!=null&&Fs.isAltMsg?(ve(_e=>_e.filter(Me=>Me.id!==(Fs==null?void 0:Fs.id))),z(-1)):Ce(_e=>_e.filter(Me=>Me.id!==(Fs==null?void 0:Fs.id)))),ja&&je(),()=>si()),[$n,ja]),r.useEffect(()=>{const{character_id:_e,id:Me}=Xa||{};(Me||$t)&&(Me&&(js(),dt("/chat/".concat(_e,"/").concat(Me))),$t&&je(),va(),en(-1))},[$t,Xa]);const la=r.useMemo(()=>({src:gs(E==null?void 0:E.avatar_url,{preset:"avatar500x600"}),alt:E==null?void 0:E.name}),[E]),Qn=r.useMemo(()=>({src:la==null?void 0:la.src,name:E==null?void 0:E.name,tags:E==null?void 0:E.tags,title:E==null?void 0:E.title}),[E,la,kt]),Xn=kt||Vn?Jx:Qx,ye={visible:!p,title:kt?"Unregistered users have limited features; upgrade to unlock and save chats.":"You are not registered. you have limited text and image generation.",description:kt?void 0:"Register/upgrade plan for more features. Your chats will not be saved"},Te=_e=>{ee({action:St.Stop}),z(_e)},nn=()=>{ae?(Pe(!1),X(null)):ti()},ii=()=>{ai()},yl=()=>{xe(),qs("")},_u=()=>{yl(),de()},vu=_e=>{const{comment:Me,reason:Au}=_e;let Tu={message_id:Fs==null?void 0:Fs.id,conversation_id:R,character_id:t,label:Au,comment:Me};Zr(Tu)},_l=(_e,Me)=>{ya({id:_e,isAltMsg:Me}),Wn(!0)},Nu=()=>{ya({}),Wn(!1)},Cu=!!(H!=null&&H.length&&((Al=H[0])!=null&&Al.image_url)||N!=null&&N.length&&((Tl=N[(N==null?void 0:N.length)-1])!=null&&Tl.image_url)),vl=()=>{Kn(!1)},Su=(_e,Me)=>{Yn(_e,Me),vl()},Zn=(_e,Me)=>{switch(_e){case rt.SHOW_VOICE_SELECION_MODAL:At(Me);break;case rt.SHOW_VOICE_UPGRADE_MODAL:_t(Me);break;case rt.SHOW_SHARE:Pt(Me);break;case rt.SHOW_MODEL_SETTINGS:at(Me);break;case rt.SHOW_BLOCK_MODAL:vt(Me);break;case rt.UPDATE_CLONE_TITLE_MODAL:Ot(Me);break;case rt.CONVERSATION_MEMORY_MODAL:Js(Me);break;case rt.CHANGE_PERSONA_CONFIRMATION_MODAL:Us(Me);break;case rt.CLONE_CONVERSATION_MODAL:Kn(Me);break;case rt.CHATBOT_RATING_MODAL:$s(Me);break}},Nl=()=>ae||Ka||ba||Rs||O||Na||hs||ht||ss||yt||It||Rt||nt||Ve.isVisible,Cl=_e=>{Nl()||document.activeElement.tagName==="TEXTAREA"||document.activeElement.tagName==="INPUT"||(_e.key==="ArrowLeft"?Te(-1):_e.key==="ArrowRight"&&Te(1))};r.useEffect(()=>(window.addEventListener("keydown",Cl),()=>{window.removeEventListener("keydown",Cl)}),[H.length,Nl]);const wu=(N==null?void 0:N.length)>2&&!(H!=null&&H.length)&&!ia.isPartner&&G!=="bot",Sl={isError:!!Ya,errorMessage:"There was an error processing the last request",resetError:yl,onRetry:()=>F({resubmit:!0})},wl=us.current&&((Il=us.current)==null?void 0:Il.scrollHeight)>((Pl=us.current)==null?void 0:Pl.clientHeight);if(r.useLayoutEffect(()=>{if(!Gs.current)return;const _e=Gs.current;wl&&!Gn&&!kt?_e.style.marginLeft="-10px":_e.style.marginLeft="0px"},[wl,Gn,kt]),Ne||!E||p&&!(n!=null&&n.length))return e.jsx(Se,{className:"absolute top-1/2 left-1/2 scale-[1.5]"});if(p&&(B||Rs))return e.jsx(Qc,{personas:n,selectedPersona:a,character:E,setIsChoosePersona:ce,setIsChangePersona:qa,isDoNotShow:v,setSelectedPersonaIds:d,onUserConfirmChangePersonaInConversation:o,conversationId:R,loading:c,isChangePersona:Rs,onUserConfirmSelectedPersonaToChat:u,onNewConversation:ne,setIsNewConversation:P,isNewConversation:O,resetSelectedPersonaIds:j,defaultPersonaId:x,selectedPersonaIds:y,handlePreferredVoiceActions:ee});const Eu=()=>{if(p)return dt(Zx);et(Yr(!0))};return e.jsxs(jl,{character:E,conversation_id:R,isLoading:G==="bot",messages:N,children:[e.jsx(Ue,{index:"ChatPage",properties:{character:E},ogImage:gs(E==null?void 0:E.avatar_url,{preset:"avatar500x600"})}),e.jsxs("div",{className:"flex grow flex-col top-0 left-0 w-full h-full bg-gray-2",children:[!Ca&&e.jsx(cc,{children:e.jsx("meta",{name:"prerender-status-code",content:"404"})}),e.jsx(_,{className:"w-full bg-gray-2 py-0 px-2 z-[2] items-center flex-col",children:e.jsxs(C,{className:"max-w-[800px] w-full",children:[E.id===Ir&&w===mn.WAITING&&e.jsx(Xc,{}),e.jsx($m,{onNewConversation:ne,character:E,onRemoveChat:()=>Pe(!0),isShowRemove:(N==null?void 0:N.length)>1,conversationLength:N==null?void 0:N.length,setErrorModalVisible:Fn,setErrorModalMessage:Qr,isBotAccessAllowed:Ca,conversation:N,altMsgs:H,conversationId:R,handleCloneTitleUpdate:Be,conversationLabel:Ke,setConversationLabel:ze,setIsChangePersona:qa,setIsNewConversation:P,selectedPersonaId:a==null?void 0:a.id,setSelectedPersonaIds:d,isDoNotShowChoosePersonaChecked:v,onUserStartCloning:Qa,voiceId:ns,handlePreferredVoiceActions:ee,isShowChangePersonaConfirmationModal:ss,isShowConversationMemoryModal:ht,isUpdateCloneTitleModal:hs,showBlockModal:nt,showModelSettings:Rt,showShare:It,showVoiceSelectionModal:yt,showChatbotRatingModal:xt,handleModalVisibility:Zn,defaultPersonaId:(a==null?void 0:a.id)||x})]})}),e.jsx(C,{className:"grow relative",children:e.jsxs("div",{className:"grow flex flex-col w-full left-0 items-center absolute h-full overflow-auto "+(Xr&&"custom-scroll"),ref:us,children:[e.jsx(Qs,{}),e.jsx("div",{className:"max-w-[620px]",children:e.jsx(eg,{character:Qn,disclaimer:Xn,chatHeroAlertProps:ye})}),e.jsx(S,{y:2.5}),e.jsxs("div",{className:"flex-shrink-0 py-0 w-full",children:[(me||Ge)&&e.jsxs(_,{justify:"center",className:"pb-0",children:[!Le&&e.jsx(U,{variant:"secondary_short",color:"neutral",onPress:fe,onClick:()=>{Dn(!0)},children:e.jsx(l,{variant:"xs",children:"Load Previous Messages"})}),Le&&e.jsx(Se,{size:"sm"})]}),N==null?void 0:N.map((_e,Me)=>e.jsxs("div",{children:[!Hn&&(N==null?void 0:N.length)>Zc&&Y===(_e==null?void 0:_e.id)&&e.jsx(Xm,{}),e.jsx(_,{children:e.jsxs(C,{children:[e.jsx(Si,{character:E,setErrorCode:qs,message:_e,scrollReference:us,user_name:b,user_avatar_url:g,sendRating:Fe,allowRegenerate:Me>0&&(N==null?void 0:N.length)-1===Me&&(_e==null?void 0:_e.role)==="bot"&&!(H!=null&&H.length),generateMessage:F,onRegenerate:F,onRemovalSelected:X,isSelectedForRemoval:Me>=ge&&ge!==null,setConversation:Ce,removalMode:ae,isRemoveMessageLoading:W,loadMessages:Z,conversationLength:N==null?void 0:N.length,currentConversationId:R,createConversation:k,chatIndex:Me,isClonePartial:zt,isSelectedForClone:Za(Me),onCloneSelected:en,handleFlagModalOpen:_l,isAudioLoading:qe,currentAudioMessageId:De,voiceId:ns,infoMessage:Es,defaultPersonaId:(a==null?void 0:a.id)||x,handlePreferredVoiceActions:ee,showCheckbox:ae||zt,setIsInputActionDisabled:Hs,isInputActionDisabled:os,openModalType:ie,requestErrorHandler:Me===(N==null?void 0:N.length)-1&&Sl||void 0,handleModalVisibility:Zn,typingInProcess:G,isMessageEditMode:sn,setIsMessageEditMode:tn}),wu&&Me===(N==null?void 0:N.length)-1&&_e.role==="bot"&&e.jsx(Jm,{messageId:_e.id,scrollReference:us})]})})]},Me)),(H==null?void 0:H.length)>0&&!G&&e.jsxs(e.Fragment,{children:[e.jsx(Si,{character:E,message:H[V],setErrorCode:qs,user_name:b,scrollReference:us,user_avatar_url:g,sendRating:Fe,isSelectedForRemoval:ge!=null,allowRegenerate:!0,onRegenerate:F,isTyping:G,onNext:()=>Te(1),onPrev:()=>Te(-1),currentIndex:V,disableNext:V===(H==null?void 0:H.length)-1,setConversation:ve,currentConversationId:R,onRemovalSelected:X,conversationLength:N==null?void 0:N.length,removalMode:ae,isRemoveMessageLoading:W,isThisAltMessage:!0,altMsgs:H,isAudioLoading:qe,currentAudioMessageId:De,chatIndex:(N==null?void 0:N.length)+(H==null?void 0:H.length)-1,isClonePartial:zt,isSelectedForClone:Za((N==null?void 0:N.length)+(H==null?void 0:H.length)-1),onCloneSelected:en,handleFlagModalOpen:_l,voiceId:ns,infoMessage:Es,handlePreferredVoiceActions:ee,isCloneLoading:_a||Ye,showCheckbox:ae||zt,requestErrorHandler:V===(H==null?void 0:H.length)-1&&Sl||void 0,handleModalVisibility:Zn,typingInProcess:G,isMessageEditMode:sn,setIsMessageEditMode:tn}),e.jsx(S,{y:.2})]}),G&&!J&&G!==Cr.autoPilot&&e.jsx(_,{children:e.jsx(Si,{message:{role:G},character:E,user_name:b,scrollReference:us,user_avatar_url:g,isTyping:G})}),!Ca&&e.jsx(Ji,{error:"invalidAccess",invalidUrlError:We}),an&&e.jsx(Ji,{error:"blockedBotCreator",character:E}),e.jsx(S,{y:.5})]}),!qn&&e.jsx(q,{onClick:()=>Ht(!0),className:"justify-center fixed bottom-0 left-0 right-0 z-[2] gap-6 bg-colorWaitingBanner text-center px-3 pt-2 pb-2",children:e.jsxs(C,{children:[e.jsxs(_,{justify:"center",className:"flex-wrap gap-5",children:[e.jsx(q,{children:e.jsxs(l,{variant:"lg",type:"!black",children:["Waiting Room Position : ",A]})}),e.jsx(q,{align:"center",className:"self-center object-cover mt-1 cursor-pointer",children:e.jsx(te,{src:"/Assets/minimize.png",className:"rounded-none",height:20,width:20})})]}),e.jsx(_,{justify:"center",children:e.jsx(l,{type:"!black",variant:"sm",children:D>=60&&"Estimated Time Left is "+Math.floor(D/60)+" Minutes"})})]})})]})}),e.jsx(S,{y:3}),e.jsx(_,{className:"bg-transparent right-0 pb-[10px] z-[1] w-full flex justify-center m-auto",gap:0,style:{maxWidth:On},children:e.jsx(C,{className:"gap-[2px]",children:ae?e.jsxs(C,{className:"flex-wrap py-3 text-center",justify:"center",gap:1,children:[e.jsx(q,{align:"center",className:"self-center",children:e.jsx(l,{children:"Select the start message to remove. All following messages will be removed."})}),e.jsxs(_,{gap:1,justify:"center",children:[e.jsx(q,{className:"self-center",children:e.jsx(U,{variant:"secondary",color:"primary_strong",onPress:nn,isDisabled:W,children:"Cancel"})}),e.jsx(q,{className:"self-center",children:e.jsx(U,{onPress:_u,isLoading:W,variant:"secondary",color:"error",isDisabled:ge==null,children:"Remove"})})]})]}):zt?e.jsxs(_,{className:"w-full flex-wrap p-3",gap:2,align:"center",children:[e.jsx(C,{gap:.5,className:"w-max",children:e.jsx(l,{i:!0,variant:"sm",children:"*Select the last message that you want to clone"})}),e.jsxs(_,{align:"end",gap:1,className:"*:min-w-[150px]",children:[e.jsx(U,{variant:"bordered",color:"transparent",onPress:nn,children:"Cancel"}),e.jsx(U,{onPress:ii,variant:"secondary",color:"primary_strong",isDisabled:ni<0,children:"Clone"})]})]}):!Jn&&e.jsx(au,{errorCode:$,isLastMessageImage:Cu,generate:F,isTyping:G,character:E,chatContainerRef:us,isCloneLoading:_a||Ye,wrapperRef:Gs,handlePreferredVoiceActions:ee,setIsInputActionDisabled:Hs,isInputActionDisabled:os,openModalType:ie,setOpenModalType:pe})})}),(()=>{if(!ia.isPartner)return e.jsx(ed,{showWaitingQueueModal:Vt,setShowWaitingQueueModal:Ht})})(),e.jsx(sd,{setErrorModalVisible:Fn,errorModalMessage:Bn,errorModalVisible:Ka})]}),_a&&e.jsx(td,{}),e.jsx(Ym,{handleFlagMessage:vu,isOpen:ba,onClose:Nu,isLoading:ei,progressStep:zn,setProgressStep:Ja}),Na&&e.jsx(Qm,{display:Na,onClose:vl,onUserConfirmCloneChoice:Su}),(Ve==null?void 0:Ve.isVisible)&&e.jsx(ad,{messageId:Ve.messageId,voiceId:Ve.voiceId,showRateVoiceModal:Ve.isVisible,onCloseRateModal:ls,rateVoiceQuality:re,setInfoMessageForRatingVoice:we,loadingFromPreferredVoice:Xe}),Tt&&e.jsx(Xx,{open:Tt,onPressUpgrade:Eu,onOpenChange:_t,voiceUpgradeVariant:T}),xt&&e.jsx(sg,{characterId:t,conversationLength:N==null?void 0:N.length,onClose:()=>Zn(rt.CHATBOT_RATING_MODAL,!1),open:xt,onOpenChange:()=>ee({action:St.Stop})})]})};function ho(){const{hasAccessToV2:t}=Ft();return t?e.jsx(ag,{}):e.jsx(Lm,{})}function lr(){const{isAuthenticated:t}=Qe(),{username:s}=he();return t&&!s?e.jsx(dd,{centerToScreen:!0}):e.jsxs(e.Fragment,{children:[e.jsx(Ue,{index:"HomePage"}),e.jsx(Pn,{}),e.jsx(ud,{})]})}function ng(){return e.jsx(na,{size:"medium",children:e.jsxs(C,{className:"min-h-[calc(100vh-55px)]",children:[e.jsx(S,{y:4}),e.jsxs(C,{className:"grow",children:[e.jsxs(C,{className:"*:p-0",children:[e.jsx(Gt,{}),e.jsx(Ue,{index:"CreatePersonaPage"}),e.jsx("h3",{className:"tracking-tighter text-[24px] font-semibold pl-3",children:"Persona"})]}),e.jsx(S,{y:4}),e.jsx(hd,{})]})]})})}function rg(){const{name:t}=he(),{personas:s,getUserPersonaById:n}=Va(),{personaId:a}=Ps(),d=n(a);return s.length?e.jsx(na,{size:"medium",children:e.jsxs(C,{className:"min-h-[calc(100vh-55px)]",children:[e.jsx(S,{y:4}),e.jsxs(C,{className:"grow",children:[e.jsxs(C,{className:"*:p-0",children:[e.jsx(Gt,{}),e.jsx(Ue,{index:"EditPersonaPage",properties:{name:t}}),e.jsx("h3",{className:"tracking-tighter text-[24px] font-semibold pl-3",children:"Persona"})]}),e.jsx(S,{y:4}),e.jsx(hd,{initialValues:d,edit:!0})]})]})}):e.jsx(Se,{className:"absolute top-1/2 left-1/2 scale-[1.5]"})}const xo="/Assets/persona.svg";function ig(t){const{data:s,defaultPersonaId:n,loading:a,onUserStartDeletingPersona:d,onUserSelectsPersonaToDelete:o,onUserMakePersonaToDefault:i,setIsShowWarningModal:c}=t,{id:u,avatar_url:m,name:j,highlights:f}=s;let h=n==u;const[x,y]=r.useState(!1),p=x&&a.loadingType==uc.setDefaultPersona&&a.isLoading,b=r.useCallback(()=>{h?c(!0):(d(),o(u))},[h]),g=async()=>{y(!0),await i(u),y(!1)};return e.jsxs(ps,{className:"w-full max-w-[180px]",children:[p&&e.jsx(Se,{className:"absolute z-20 top-0 left-0 pb-8 bg-[#00000050] h-full w-full"}),h&&e.jsx(te,{src:xo,className:"absolute z-[99] top-1.5 left-2 size-6 rounded-none"}),e.jsxs(ds,{className:"p-0 overflow-hidden flex-none",children:[e.jsxs(Zt,{placement:"top",crossOffset:-70,classNames:{trigger:"absolute fill-black top-2 right-1 z-[99]"},children:[e.jsx(ea,{className:"py-1 -mt-1 !bg-[rgb(0,0,0,0.4)]",children:e.jsx(U,{isIconOnly:!0,variant:"primary_smallest",children:e.jsx(Nh,{size:18,className:"text-white opacity-90"})})}),e.jsxs(sa,{classNames:le.dropdown.menu,className:"w-full",children:[e.jsx(jn,{classNames:le.dropdown.section,hidden:h,children:e.jsx(Et,{classNames:le.dropdown.item_primary,onClick:g,children:e.jsxs(_,{justify:"between",style:void 0,children:[e.jsx(l,{variant:"md",children:"Make Default"})," ",e.jsx(te,{src:xo,className:"size-5"})]})})}),e.jsx(jn,{classNames:le.dropdown.section,children:e.jsx(Et,{classNames:le.dropdown.item_danger,color:"danger",onClick:b,children:e.jsxs(_,{justify:"between",style:void 0,children:[e.jsx(l,{variant:"md",type:"error",mNone:void 0,children:"Delete"})," ",e.jsx(hc,{className:"text-red-600",size:20})]})})})]})]}),e.jsx(K,{className:"h-[180px]",to:"".concat(ep,"/").concat(u),"aria-label":"edit-persona",children:m?e.jsx(te,{src:gs(m,{preset:"avatar256x256"}),alt:j,height:"100%",width:"100%",className:"object-cover opacity-100",radius:"none"}):e.jsx(zo,{className:"bg-zinc-300 text-gray-600 max-h-[180px] w-full h-full rounded-2xl rounded-br-none rounded-bl-none p-8"})})]}),e.jsx(xn,{className:"p-2 px-3",children:e.jsxs(C,{gap:.2,children:[e.jsx(l,{b:!0,variant:"xs",children:j}),e.jsx(l,{i:!0,variant:"xs",type:"[overflow-wrap:anywhere] line-clamp-3",children:f})]})})]})}function lg(t){const{isVisible:s,onClose:n,heading:a,message:d}=t;return e.jsx(es,{title:a,open:s,onOpenChange:n,className:"text-center",classNames:{title:"text-center pl-[28px]"},children:d&&e.jsx(l,{variant:"md",type:"normal",children:d})})}function og(){var V,z,ne,J;const{role:t}=he(),{personas:s,defaultPersonaId:n,loading:a,onUserStartDeletingPersona:d,isDeletingPersonaStarted:o,onUserConfirmDeletingPersona:i,onUserCancelDeletingPersona:c,onUserSelectsPersonaToDelete:u,onUserMakePersonaToDefault:m,personaError:j}=Va(),[f,h]=r.useState(""),x=s==null?void 0:s.filter($=>{var xe;return $==null?void 0:$.name.toLowerCase().startsWith((xe=f==null?void 0:f.trim())==null?void 0:xe.toLowerCase())}),y=Ds(),p=(z=(V=y.state)==null?void 0:V.path)==null?void 0:z.split("/")[1],b=(ne=y.state)==null?void 0:ne.characterName,g=Je(),[v,T]=r.useState(!1),[w,I]=r.useState(!1),A=(a==null?void 0:a.loadingType)==uc.deletePersona&&a.isLoading,D=sp(xl[j==null?void 0:j.error_type]),O=ta(),P=!1,E=JSON.parse(Q.getItem(Is))||!1;y.state,r.useEffect(()=>{j!=null&&j.error_type&&O(za(D))},[j]);const N=r.useCallback(()=>{h("")},[]),R=r.useCallback(()=>{g(-1)},[]),k=()=>{Gl(s,t,P,E)&&T(!0)},G=r.useCallback(()=>{c()},[]),F=async()=>{await i()},H=()=>{I(!1)};return s.length?e.jsxs(na,{size:"medium",children:[e.jsxs(C,{className:"min-h-[calc(100vh-55px)] custom-scroll",children:[e.jsxs(C,{className:"grow",children:[e.jsxs(C,{className:"*:p-0",children:[e.jsx(Ue,{index:"MyPersonasPage"}),e.jsx("h3",{className:"tracking-tighter text-[24px] font-semibold pl-3",children:"My Personas"})]}),e.jsx(_,{style:void 0,justify:"between",children:e.jsx(q,{className:"max-w-[700px] grow",children:e.jsx(ms,{value:f,variant:"primary",color:"primary",placeholder:"Search...",onValueChange:h,isClearable:!0,onClear:N,"aria-labelledby":"search-characters"})})}),e.jsx(S,{y:6}),x!=null&&x.length?e.jsx(q,{className:"grid grid-cols-[repeat(auto-fill,minmax(180px,1fr))] max-sm:grid-cols-2 gap-5",children:(J=x==null?void 0:x.sort(($,xe)=>$.id===n?-1:xe.id===n?1:0))==null?void 0:J.map($=>e.jsx(ig,{data:$,defaultPersonaId:n,loading:a,onUserStartDeletingPersona:d,onUserSelectsPersonaToDelete:u,onUserMakePersonaToDefault:m,setIsShowWarningModal:I},$.id))}):e.jsx(l,{children:"No Results Found !"})]}),e.jsx(Ch,{className:"flex flex-wrap justify-end gap-4 sticky bottom-0 pt-6 pb-8 z-[100]",children:p=="chat"?e.jsxs(e.Fragment,{children:[e.jsx(U,{as:K,variant:"primary_large_bordered",color:"transparent",to:Ae.createPersona,children:e.jsx(l,{b:!0,children:"Create New"})}),e.jsx(U,{as:K,variant:"primary_large",color:"primary_strong",onPress:R,children:e.jsxs(l,{b:!0,type:"white",children:["Go Back to ",b]})})]}):e.jsx(U,{as:K,variant:"primary_large",color:"primary_strong",onClick:k,to:Gl(s,t,P,E)?null:Ae.createPersona,children:e.jsx(l,{b:!0,type:"white",children:"Create New"})})})]}),e.jsx(tp,{isOpen:v,onClose:()=>T(!1)}),o&&e.jsx(Xs,{heading:"Delete Persona",handleClose:G,onUserConfirmation:F,confirmationMessage:e.jsxs(e.Fragment,{children:[e.jsx(l,{children:"Deleting this persona will update all associated chats to the default persona."}),e.jsx(S,{y:2}),e.jsx(l,{children:"Are you sure you want to delete this persona?"})]}),discardButtonText:"Cancel",isVisible:o,isLoading:A,actionButtonText:"Delete",actionButtonColor:"error"}),w&&e.jsx(lg,{heading:"Important",message:"You cannot delete the default persona, please set another persona as the default or create a new one first.",isVisible:w,onClose:H})]}):e.jsx(Se,{className:"absolute top-1/2 left-1/2 scale-[1.5]"})}function cg(){const{frequency:t=fr.MONTHLY}=Ps(),{data:s}=pl();return r.useEffect(()=>{window.scrollTo(0,0)},[]),s?e.jsx(e.Fragment,{children:e.jsx(xd,{data:s==null?void 0:s[t],frequency:t})}):e.jsx(Se,{className:le.spinner})}const dg=Kr("country");function po(t){const{coupon:s,data:n,prevFeatureLabel:a}=t,{tier:d,price:o}=ap(n),{role:i,period:c,plan_id:u}=n,m=i===Xt.FREE,j=[a,...(n==null?void 0:n.features)||[]].slice(m?1:0),f=np[c],h=i===lp,x=Je(),{isMobile:y}=Ie(),p=Ds(),{userId:b}=he(),{logEvent:g}=bt(),v=p.pathname===pd,T=Wa((n==null?void 0:n.currency)||dg),w=ta(),I=v&&!m,A=()=>{if(g(Ss.SUBSCRIPTION_PLAN_SELECT,{user_id:b,plan_id:u,plan_name:d}),g(Ss.SUBSCRIPTION_MONEY_VALUE,{user_id:b,currency:T,value:o}),!u)return w(Yr(!0));if(v)return;let O=op(u,s);x(O)},D=()=>{g(Ss.SUBSCRIPTION_PLAN_VIEW,{user_id:b,plan_id:u,plan_name:d})};return e.jsx(ps,{className:"border-solid border-1 rounded-xl overflow-hidden bg-transparent cursor-default w-[350px] max-[400px]:w-full "+(h?"border-blue-600":""),isPressable:!0,children:e.jsxs(ds,{className:"p-0 ".concat(y&&h&&"bg-blue-600 bg-opacity-10"),children:[h&&e.jsx(_,{className:"py-2 justify-center "+(y?"border-0 border-b-1 border-solid border-blue-600 *:text-blue-600":"bg-blue-600"),children:e.jsx(l,{variant:"lg",type:"medium white",children:"Most Popular"})}),e.jsxs(C,{className:y?"px-3 pt-4 pb-2":"px-5 pt-8 pb-2 min-h-[620px]",gap:y?.5:1,children:[e.jsxs(C,{gap:y?.5:1,className:y?"pl-3":void 0,children:[e.jsx(l,{variant:y?"xxl":"large",type:y?"font-medium":"font-bold",children:d}),e.jsxs(_,{align:"center",children:[e.jsxs(l,{variant:y?"xxl":"large",type:y?"font-medium":"font-bold",children:[ts()?"Try for ":null," ",T," ",o]}),e.jsxs(l,{variant:"md",type:"pt-1.5 "+(y&&"opacity-60"),children:["/",y?"per":null," ",f]})]})]}),y&&e.jsx(S,{y:.5}),e.jsx(U,{as:K,to:I?rp(n):void 0,color:h?"primary_strong":"transparent_bordered",radius:"sm",onClick:A,target:I?"_blank":void 0,children:e.jsx(l,{b:!0,type:h?"white":void 0,children:m?Vl.FREE:Vl.PAID})}),y&&e.jsx(S,{}),e.jsxs(C,{gap:1,children:[!y&&e.jsx(l,{b:!0,variant:"md",children:"Features Included:"}),e.jsx(C,{gap:y?.75:1,children:j==null?void 0:j.map((O,P)=>e.jsxs(_,{align:"center",children:[e.jsx(Zi,{size:y?18:22,className:"relative top-0.5 mr-2 "+(y&&"text-blue-600")}),e.jsx(l,{variant:y?"sm":"md",type:"capitalize "+(y?"opacity-60":void 0),children:O})]},P))})]}),!m&&e.jsxs(K,{className:"mt-auto opacity-60 underline py-2 text-white "+(y?"justify-center text-[12px]":"text-[16px]"),to:ip[i],target:"_blank","aria-label":"learn-more-about-".concat(d,"-tier"),onClick:D,children:["Learn More about ",d," Tier"]})]})]})})}function ug(){const{isMobile:t}=Ie(),s=[{question:"Does the subscription renew at the sale price?",answer:"No, the birthday sale discount applies for one month only. Subsequent renewals will be at the regular price."},{question:"Can I upgrade or downgrade my plan?",answer:e.jsxs(e.Fragment,{children:["You can upgrade or downgrade your plan whenever you like. To do so, visit your profile, select 'Manage Subscription,' and choose your new desired plan level.",e.jsx("br",{}),e.jsx("br",{}),"If you upgrade, you'll only be charged the difference on a prorated basis. If you downgrade, your future payments will reflect the lower-priced plan."]})},{question:"How do I cancel my plan?",answer:'You can cancel your subscription whenever you wish. Just log into your account, navigate to your profile, and click on "Manage Subscription." This will direct you to the payment platform, where you can proceed to cancel your subscription.'},{question:"Can I cancel my subscription and still retain plan benefits until the end of the current billing cycle?",answer:"Yes, even if you cancel your subscription, you'll still have access to your plan benefits until the end of your current billing cycle."},{question:"How do I get a refund?",answer:e.jsxs(e.Fragment,{children:["Refunds are available only under exceptional circumstances. Please\n          refer to our ",e.jsx(K,{to:"/refund",className:"underline","aria-label":"refund-policy",children:"Refund Policy"})," ","for more details."]})},{key:5,question:"I have more questions.",answer:e.jsxs(e.Fragment,{children:["Feel free to reach out to us. We’d love to hear from you."," ",e.jsx("br",{}),e.jsx("br",{}),e.jsx(U,{as:K,color:"primary_strong",variant:"secondary",to:"https://spicychat.freshdesk.com/support/tickets/new",target:"_blank",children:e.jsx(l,{variant:"md",type:"white",children:"Submit a ticket"})})]})}].slice(ts()?0:1);return e.jsxs(C,{children:[e.jsx(l,{b:!0,variant:t?"xxl":"big",children:"FAQs"}),e.jsx(S,{y:t?2:8}),e.jsxs(An,{variant:"splitted",className:"px-0 gap-6",itemClasses:{base:"data-[open=true]:!bg-blue-400",content:"pt-0 pb-5"},fullWidth:!0,children:[s.map((n,a)=>e.jsx(ft,{title:n.question,classNames:{heading:le.accordion.heading,trigger:le.accordion.trigger,title:le.accordion.title,indicator:le.accordion.indicator},children:n.answer},a)),ts()&&e.jsx(ft,{title:"Does the subscription renew at the sale price?",classNames:{heading:le.accordion.heading,trigger:le.accordion.trigger,title:le.accordion.title,indicator:le.accordion.indicator},children:"No, the birthday sale discount applies for one month only. Subsequent renewals will be at the regular price."},"q1")]})]})}const wi=Kr("country"),hg="/Assets/subscribeStarLogo.png",xg="/Assets/boostyLogo.png",mo=()=>{var v,T,w,I,A;const{isMobile:t}=Ie(),{isAuthenticated:s}=Qe(),{data:n}=pl(),d=Ds().pathname===pd,[o,i]=r.useState(ln.MONTHLY),c=o===ln.MONTHLY,{getManageSubscriptionLinks:u,setShowPreventSubscriptionModal:m,checkIsSubscriptionManagable:j}=kn(),{status:f,role:h,platform:x}=he(),y=f===ma.ACTIVE&&h===h,p=n==null?void 0:n.annual_tagline,b=({logo:D,label:O,url:P})=>e.jsxs(K,{className:"flex flex-col whitespace-nowrap items-center gap-4",to:P,target:"_blank","aria-label":O,children:[e.jsx(q,{className:"p-2 border-solid border-1 border-[#ffffff50] rounded-[20px] justify-center items-center shadow bg-[#D9D9D91A] "+(t?"size-[52px]":"size-[80px]"),children:e.jsx(te,{removeWrapper:!0,src:D,height:t?34:55})}),e.jsx(l,{variant:t?"sm":"lg",type:"medium",children:O})]});if(!n)return e.jsx(Se,{className:le.spinner});const g=j(x||"");return e.jsxs(e.Fragment,{children:[y&&e.jsxs(_,{className:"w-full justify-between bg-[linear-gradient(270deg,#00438F80_0%,#0072F590_100%)] rounded-[10px] p-4 px-6 "+(t&&" flex-col items-center !p-2"),children:[e.jsx(l,{type:"white",variant:t?"sm":"regular",children:"You already have an active subscription"}),g&&e.jsx(U,{variant:"primary_smallest",color:"transparent",onClick:u(),children:e.jsx(l,{b:!0,type:"white underline",variant:t?"sm":"regular",children:"Manage Subscription"})})]}),e.jsx(md,{}),e.jsxs(_s,{className:"items-center p-5",children:[!y&&e.jsx(S,{y:4}),e.jsx(l,{b:!0,variant:t?"xxl":"bigger",type:"text-center",children:"Pick the plan that's right for you"}),e.jsx(S,{y:4}),e.jsx(l,{variant:t?"md":"xxl",type:"text-center",children:"Upgrade your experience and unlock your imagination with premium features"}),e.jsx(S,{y:2}),((v=mi[wi])==null?void 0:v.LABEL)&&e.jsxs(e.Fragment,{children:[e.jsx(S,{y:6}),e.jsx(C,{align:"center",className:"gap-6",children:e.jsxs(l,{variant:t?"md":"lg",children:[e.jsx("b",{children:(T=mi[wi])==null?void 0:T.LABEL})," "+((w=mi[wi])==null?void 0:w.SUB_LABEL)]})}),e.jsx(S,{y:1})]}),e.jsx(S,{y:t?6:12}),e.jsxs(al,{radius:"full",selectedKey:o,onSelectionChange:i,classNames:{tabList:"bg-gray-50 ".concat(!t&&"p-1.5"," "),tabContent:"group-data-[selected=true]:font-medium ".concat(t?"text-[14px]":"text-[24px]")},size:t?"sm":"lg",children:[e.jsx(Fa,{title:e.jsxs(e.Fragment,{children:["Pay Annually"," ",e.jsx(ct,{className:"bg-blue-400 ".concat(c&&"bg-opacity-disabled"," ").concat(!t&&"py-[18px]"),size:"sm",children:e.jsx(l,{variant:t?"xs":"lg",type:c?"text-opacity-disabled":void 0,children:p})})]}),className:"bg-transparent ".concat(!t&&"py-[22px]")},ln.ANNUAL),e.jsx(Fa,{title:"Pay Monthly",className:"bg-transparent  ".concat(t?"py-2":"py-5 pb-6")},ln.MONTHLY)]}),e.jsx(S,{y:t?10:14}),e.jsxs(_,{gap:2,className:"flex-wrap justify-center items-end",children:[!s&&e.jsx(po,{data:cp((I=n==null?void 0:n[o])==null?void 0:I[0])}),(A=n==null?void 0:n[o])==null?void 0:A.map((D,O)=>{var P;if(!(d&&o===ln.MONTHLY&&D.role===Xt.MINIMAL)){const E=(P=n==null?void 0:n[o])==null?void 0:P[O-1],{tier:N}=dp(E);return e.jsx(po,{data:D,prevFeatureLabel:"Plus Benefits From ".concat(N," Tier")},O)}})]}),e.jsx(S,{y:t?7:14}),!d&&e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"max-w-[900px] w-full text-center",children:e.jsx(l,{variant:t?"sm":"regular",children:"You can also subscribe to a Premium plan through platforms like SubscribeStar or Boosty, offering flexible options to suit your needs."})}),t&&e.jsx(K,{className:"mt-6 cursor-pointer underline text-blue-600",to:up+"/"+o,"aria-label":"compare-plans",children:"Compare Plans"}),e.jsx(S,{y:t?8:14}),e.jsxs(q,{className:"grid grid-cols-2",gap:3,children:[e.jsx(b,{logo:hg,label:"Subsribe Star",url:Hl[Hi.SUBSCRIBESTAR]}),e.jsx(b,{logo:xg,label:"Boosty",url:Hl[Hi.BOOSTY]})]}),e.jsx(S,{y:6})]}),e.jsx(S,{y:8}),e.jsx(ug,{}),!t&&e.jsx(xd,{data:n==null?void 0:n[o],frequency:o})]}),e.jsx(Ln,{onClose:()=>m(!1)})]})};var pg={VITE_CHARGEBEE_DOMAIN:"nextday.chargebee.com"};const mg=Kr("country"),go=()=>{var p,b;const[t,s]=r.useState(!1),{onlyUserId:n,email:a,userProfile:d}=he(),[o]=r.useState(!1),i=(p=d==null?void 0:d.subscription)==null?void 0:p.role,c=((b=d==null?void 0:d.subscription)==null?void 0:b.status)===ma.ACTIVE,u=c&&i===Xt.MINIMAL,m=c&&i===Xt.BASIC,j=c&&i===Xt.PREMIUM,f=((ts()?$i:jr)/30).toFixed(2),h=()=>{if(!n)return s(!0)},x=()=>n?"https://patreon.com/user?u=31741035":null,y=(g,v="Monthly",T)=>{if(!n)return null;const w="".concat(g,"-USD-").concat(v);let I="https://".concat(pg.VITE_CHARGEBEE_DOMAIN,"/hosted_pages/checkout?subscription_items[item_price_id][0]=").concat(w,"&subscription_items[quantity][0]=1&layout=in_app&customer[email]=").concat(encodeURIComponent(a),"&subscription[cf_user_id]=").concat(n);return T&&(I+="&subscription[coupon]=".concat(T)),I};return e.jsxs(_s,{gap:0,className:"max-w-[1200px]",children:[e.jsx(Ln,{}),t&&e.jsx(ml,{onClose:()=>s(!1)}),e.jsx(S,{y:2}),e.jsx(l,{h3:!0,children:"Subscribe to SpicyChat"}),e.jsx(S,{y:2}),mg==="RU"&&e.jsxs(e.Fragment,{children:[e.jsx(S,{y:1}),e.jsxs(_,{align:"center",className:"gap-10",children:[e.jsx(l,{variant:"regular",children:"Subscribers from Russia can use Boosty:"}),e.jsx(U,{as:He,variant:"secondary",color:"orange",startContent:e.jsx(te,{disableSkeleton:!0,src:"/Assets/boosty.webp",height:30,width:30}),href:"https://boosty.to/spicychat",target:"_blank",rel:"noreferrer",children:"Boosty"})]}),e.jsx(S,{y:1})]}),o&&e.jsx(_,{justify:"center",children:e.jsx(C,{align:"center",className:"first: text-lg ",children:e.jsx(l,{b:!0,variant:"lg",type:"colorFestive",children:"BLACK FRIDAY & CYBER MONDAY SALE"})})}),e.jsx(_,{justify:"center",children:e.jsx(l,{variant:"xl",children:"Select a membership level"})}),e.jsx(S,{y:4}),e.jsx(_,{justify:"center",children:e.jsxs(vn,{md:3,gap:2,justify:"center",children:[e.jsx(q,{children:e.jsxs(ps,{className:"bg-white dark:bg-gray-50 w-full h-full py-5 px-3 pb-3 drop-shadow-xl",children:[e.jsxs(ds,{gap:0,className:"p-0",children:[e.jsx(_,{justify:"center",children:e.jsx(l,{b:!0,variant:"xl",type:"primary",children:"Get a Taste"})}),e.jsx(S,{y:2.5}),e.jsx(l,{b:!0,variant:"xxl",children:e.jsxs(C,{align:"center",children:[(ts()||o)&&e.jsxs("span",{className:"line-through text-[15px] font-normal",children:["$",jr," / month"]}),e.jsxs(_,{children:[e.jsxs("span",{className:"mr-1.5 ".concat(o?"text-pink-1000":""),children:["$",ts()?$i:jr]})," / month"]})]})}),e.jsx(S,{y:5}),e.jsx(_,{justify:"center",children:e.jsx(U,{as:He,variant:"primary_large",color:"primary_strong",onPress:h,href:y("paid_minimal","Monthly",ts()?hp:null),children:u?"Subscribed Already":"Subscribe"})}),e.jsx(S,{y:5}),e.jsx(_,{justify:"center",children:e.jsxs(l,{variant:"regular",type:"neutral",children:["Skip The Line for $",f," per day."]})}),e.jsx(S,{y:5}),e.jsx(_,{justify:"center",children:e.jsxs("ul",{className:"list-none grid gap-4",children:[e.jsx("li",{children:e.jsx(l,{variant:"regular",type:"secondary",children:"• Skip The Waiting Line"})}),e.jsx("li",{children:e.jsxs(l,{variant:"regular",type:"secondary",children:["• Memory manager",e.jsxs(l,{variant:"smallest",type:"secondary",children:[" ","NEW"]}),e.jsx(He,{className:"text-link ml-1 mb-1",href:"https://docs.spicychat.ai/premium-features/semantic-memory-2.0",target:"_new","aria-label":"semantic-memory-info",children:e.jsx(Ct,{size:18})})]})}),e.jsx("li",{children:e.jsxs(l,{variant:"regular",type:"secondary",children:["• User Personas - up to ",gi.PAID_MINIMAL]})})]})})]}),e.jsx(xn,{className:"pb-0 pt-16",children:e.jsx(C,{children:e.jsx(_,{justify:"center",children:e.jsx(He,{className:"cursor-pointer max-sm:!opacity-100",onClick:h,href:y("paid_minimal","Yearly",ts()?xp:"#"),"aria-label":"annual-sale",children:e.jsxs(l,{type:"pink-1000",children:["Pay annually (Save ",ts()?fi:ji,"%) "]})})})})})]})}),e.jsx(q,{children:e.jsxs(ps,{className:"bg-white dark:bg-gray-50 py-5 px-3 pb-3 w-full drop-shadow-xl ".concat(o?"border-2 border-solid border-pink-1000":"w-full"),children:[e.jsxs(ds,{gap:0,className:"p-0",children:[e.jsx(_,{justify:"center",children:e.jsx(l,{b:!0,variant:"xl",type:"primary",children:"True Supporter"})}),e.jsx(S,{y:2.5}),o&&e.jsx(te,{src:kl,className:"h-1/2 w-1/2 fixed scale-150 r-[5px] t-[5px]"}),e.jsx(_,{justify:"center",children:e.jsx(l,{b:!0,variant:"xxl",children:e.jsxs(C,{align:"center",children:[(ts()||o)&&e.jsxs("span",{className:"line-through text-[15px] font-normal",children:["$",zi," / month"]}),e.jsxs(_,{children:[e.jsxs("span",{className:"mr-1.5 ".concat(o?"text-pink-1000":""),children:["$",ts()?gd:zi]})," / month"]})]})})}),e.jsx(S,{y:5}),e.jsx(_,{justify:"center",children:e.jsx(U,{as:He,variant:"primary_large",color:"primary_strong",onPress:h,href:y("paid_basic","Monthly",ts()?pp:null),children:m?"Subscribed Already":"Subscribe"})}),e.jsx(S,{y:5}),e.jsx(_,{justify:"center",children:e.jsx(C,{className:"max-w-100",align:"center",children:e.jsx(l,{variant:"regular",type:"neutral",children:"Advanced Generation and Memory"})})}),e.jsx(S,{y:5}),e.jsx(_,{justify:"center",children:e.jsxs("ul",{className:"list-none flex flex-col gap-4",children:[e.jsx("li",{children:e.jsxs(l,{variant:"regular",type:"secondary",children:["• 4K Context (Memory)",e.jsx(He,{className:"text-link ml-1 mb-1",href:"https://docs.spicychat.ai/premium-features#4k-context-memory",target:"_new","aria-label":"4k-context-memory-info",children:e.jsx(Ct,{size:18})})]})}),e.jsx("li",{children:e.jsxs(l,{variant:"regular",type:"secondary",children:["• Semantic Memory 2.0",e.jsx(He,{className:"text-link ml-1 mb-1",href:"https://docs.spicychat.ai/premium-features/semantic-memory-2.0",target:"_new","aria-label":"semantic-memory-2.0-info",children:e.jsx(Ct,{size:18})})]})}),e.jsx("li",{children:e.jsxs(l,{variant:"regular",type:"secondary",children:["• Longer Responses",e.jsx(He,{className:"text-link ml-1 mb-1",href:"https://docs.spicychat.ai/premium-features#longer-responses",target:"_new","aria-label":"longer-responses-info",children:e.jsx(Ct,{size:18})})]})}),e.jsx("li",{children:e.jsxs(l,{variant:"regular",type:"secondary",children:["• Conversation Images",e.jsxs(l,{variant:"smallest",type:"secondary",children:[" ","NEW"]}),e.jsx(He,{className:"text-link ml-1 mb-1",href:"https://docs.spicychat.ai/premium-features#conversation-images",target:"_new","aria-label":"conversation-images-info",children:e.jsx(Ct,{size:18})})]})}),e.jsx("li",{children:e.jsxs(l,{variant:"regular",type:"secondary",children:["• Access to 45B Models",e.jsxs(l,{variant:"smallest",type:"secondary",children:[" ","NEW"]})]})}),e.jsx("li",{children:e.jsxs(l,{variant:"regular",type:"secondary",children:["• User Personas - up to ",gi.PAID_BASIC]})})]})})]}),e.jsx(xn,{className:"pb-0 pt-16",children:e.jsxs(C,{children:[e.jsx(_,{justify:"center",children:e.jsx(l,{children:"Plus benefits from previous tier."})}),e.jsx(_,{justify:"center",children:e.jsx(He,{className:"cursor-pointer max-sm:!opacity-100",onClick:h,href:y("paid_basic","Yearly",ts()?mp:"#"),"aria-label":"annual-sale",children:e.jsxs(l,{type:"pink-1000",children:["Pay annually (Save ",ts()?fi:ji,"%) "]})})})]})})]})}),e.jsx(q,{children:e.jsxs(ps,{className:"bg-white dark:bg-gray-50 py-5 px-3 pb-3 w-full drop-shadow-xl ".concat(o&&"border-2 border-solid border-pink-1000"),children:[e.jsxs(ds,{className:"p-0",children:[e.jsx(_,{justify:"center",children:e.jsx(l,{b:!0,variant:"xl",type:"primary",children:"I'm All In"})}),e.jsx(S,{y:2.5}),o&&e.jsx(te,{src:kl,className:"h-[50px] w-[50px] fixed scale-[1.5] right-[5px] top-[5px]"}),e.jsx(_,{justify:"center",children:e.jsx(l,{b:!0,variant:"xxl",children:e.jsxs(C,{align:"center",children:[(ts()||o)&&e.jsxs("span",{className:"line-through text-[15px] font-normal",children:["$",Wi," / month"]}),e.jsxs(_,{children:[e.jsxs("span",{className:"mr-1.5 ".concat(o?"text-pink-1000":""),children:["$",ts()?fd:Wi]})," / month"]})]})})}),e.jsx(S,{y:5}),e.jsx(_,{justify:"center",children:e.jsx(U,{as:He,variant:"primary_large",color:"primary_strong",onPress:h,href:y("paid_premium","Monthly",ts()?gp:null),children:j?"Subscribed Already":"Subscribe"})}),e.jsx(S,{y:5}),e.jsx(_,{justify:"center",children:e.jsx(C,{className:"max-w-[350px]",children:e.jsx(l,{variant:"regular",type:"neutral",children:"You get access to a priority generation queue for speedier chat response!"})})}),e.jsx(S,{y:5}),e.jsx(_,{justify:"center",children:e.jsxs("ul",{className:"list-none flex flex-col gap-4",children:[e.jsx("li",{children:e.jsx(l,{variant:"regular",type:"secondary",children:e.jsxs("p",{className:"px-6",children:["• Priority Generation Queue",e.jsx(He,{className:"text-link ml-1 mb-1",href:"https://docs.spicychat.ai/premium-features#priority-generation-queue",target:"_new","aria-label":"priority-generation-queue-info",children:e.jsx(Ct,{size:18})})]})})}),e.jsx("li",{children:e.jsx(l,{variant:"regular",type:"secondary",children:e.jsxs("p",{className:"px-6",children:["• Access to 70b model",e.jsxs(l,{variant:"smallest",type:"secondary",children:[" ","BETA"]}),e.jsx(He,{className:"text-link ml-1 mb-1",href:"https://docs.spicychat.ai/premium-features#access-to-70b-model",target:"_new","aria-label":"70b-model-info",children:e.jsx(Ct,{size:18})})]})})}),e.jsx("li",{children:e.jsx(l,{variant:"regular",type:"secondary ",children:e.jsxs("p",{className:"px-6",children:["• Test our 8K context model",e.jsxs(l,{variant:"smallest",type:"secondary",children:[" ","BETA"]}),e.jsx(He,{className:"text-link ml-1 mb-1",href:"https://docs.spicychat.ai/premium-features#test-8k-context-model-beta",target:"_new","aria-label":"8k-context-model-beta-info",children:e.jsx(Ct,{size:18})})]})})}),e.jsx("li",{children:e.jsx(l,{variant:"regular",type:"secondary ",children:e.jsxs("p",{className:"px-6",children:["• Conversation Images on private Chatbots",e.jsx(He,{className:"text-link ml-1 mb-1",href:"https://docs.spicychat.ai/premium-features#conversation-images-on-private-chatbots",target:"_new","aria-label":"private-conversation-images-info",children:e.jsx(Ct,{size:18})})]})})}),e.jsx("li",{children:e.jsx(l,{variant:"regular",type:"secondary",children:e.jsxs("p",{className:"px-6",children:["• User Personas - up to ",gi.PAID_PREMIUM]})})})]})})]}),e.jsx(xn,{className:"pb-0 pt-16",children:e.jsxs(C,{children:[e.jsx(_,{justify:"center",children:e.jsx(l,{children:"Plus benefits from previous tier."})}),e.jsx(_,{justify:"center",children:e.jsx(He,{className:"cursor-pointer max-sm:!opacity-100",onClick:h,href:y("paid_premium","Yearly",ts()?fp:"#"),"aria-label":"annual-sale",children:e.jsxs(l,{type:"pink-1000",children:["Pay annually (Save ",ts()?fi:ji,"%) "]})})})]})})]})})]})}),o&&e.jsx(S,{y:2}),o&&e.jsx(l,{variant:"regular",type:"secondary",children:"Subscribe now and enjoy these discounted rates on all future renewals."}),e.jsx(S,{y:10}),e.jsx(l,{variant:"lg",type:"primary",children:e.jsxs("p",{className:"leading-[30px]",children:["If you prefer, you can also support us through the platforms"," ",e.jsx(He,{className:"text-[20px] text-link",href:"https://subscribestar.adult/spicychat",target:"_blank","aria-label":"subscribestar",children:"SubscribeStar"}),","," ",e.jsxs(He,{className:"text-[20px] mr-1 text-link",href:"https://patreon.com/user?u=31741035",target:"_blank","aria-label":"patreon",children:["Patreon"," "]}),"or"," ",e.jsx(He,{className:"text-[20px] text-link",href:"https://boosty.to/spicychat",target:"_blank","aria-label":"boosty",children:"Boosty"}),"."]})}),e.jsx(S,{y:2}),e.jsxs(vn,{xs:16,sm:3,gap:1,justify:"center",children:[e.jsx(q,{className:"*:justify-start",children:e.jsxs(U,{as:He,variant:"primary_large",color:"pink_light",href:"https://subscribestar.adult/spicychat",target:"_blank",rel:"noreferrer",children:[e.jsx(te,{className:"flex items-center",src:"https://ss-staging-assets.s3-us-west-1.amazonaws.com/brand/ss_logomark.png",height:20,width:20}),e.jsx("span",{className:"ml-2",children:"SubscribeStar"})]})}),e.jsx(q,{className:"*:justify-start",children:e.jsxs(U,{as:He,variant:"primary_large",color:"gradient",onPress:h,href:x(),target:"_blank",rel:"noreferrer",children:[e.jsx(te,{src:"/Assets/patreon.png",disableSkeleton:!0,height:20,width:20}),"Become a Patron"]})}),e.jsx(q,{className:"*:justify-start",children:e.jsxs(U,{as:He,variant:"primary_large",color:"orange",href:"https://boosty.to/spicychat",target:"_blank",rel:"noreferrer",children:[e.jsx(te,{src:"/Assets/boosty.webp",disableSkeleton:!0,height:30,width:30}),e.jsx("span",{className:"ml-7",children:"Boosty"})]})}),e.jsx(q,{children:e.jsx(U,{as:He,variant:"primary_large",color:"primary_strong",href:"/subscribe-crypto",children:e.jsx(l,{b:!0,type:"white",children:"Pay Using Cryptocurrency"})})})]}),e.jsx(S,{y:5}),e.jsxs(l,{variant:"lg",type:"primary",children:["If you need help, you can get"," ",e.jsx(He,{className:"text-3xl text-[20px] text-link",href:"https://docs.spicychat.ai/support","aria-label":"support",children:"support here"}),"."]}),e.jsx(S,{y:8}),e.jsxs(C,{children:[e.jsx(l,{b:!0,variant:"big",children:"FAQs"}),e.jsx(S,{y:8}),e.jsxs(An,{variant:"splitted",className:"px-0",fullWidth:!0,children:[ts()&&e.jsx(ft,{title:"Does the subscription renew at the sale price?",classNames:{heading:le.accordion.heading,trigger:le.accordion.trigger,title:le.accordion.title,indicator:le.accordion.indicator},children:"No, the birthday sale discount applies for one month only. Subsequent renewals will be at the regular price."},"q1"),e.jsxs(ft,{title:"Can I upgrade or downgrade my plan?",classNames:{heading:le.accordion.heading,trigger:le.accordion.trigger,title:le.accordion.title,indicator:le.accordion.indicator},children:["You can upgrade or downgrade your plan whenever you like. To do so, visit your profile, select 'Manage Subscription,' and choose your new desired plan level.",e.jsx("br",{}),e.jsx("br",{}),"If you upgrade, you'll only be charged the difference on a prorated basis. If you downgrade, your future payments will reflect the lower-priced plan."]},"q2"),e.jsx(ft,{title:"How do I cancel my plan?",classNames:{heading:le.accordion.heading,trigger:le.accordion.trigger,title:le.accordion.title,indicator:le.accordion.indicator},children:'You can cancel your subscription whenever you wish. Just log into your account, navigate to your profile, and click on "Manage Subscription." This will direct you to the payment platform, where you can proceed to cancel your subscription.'},"q3"),e.jsx(ft,{title:"Can I cancel my subscription and still retain plan benefits until the end of the current billing cycle?",classNames:{heading:le.accordion.heading,trigger:le.accordion.trigger,title:le.accordion.title,indicator:le.accordion.indicator},children:"Yes, even if you cancel your subscription, you'll still have access to your plan benefits until the end of your current billing cycle."},"q4"),e.jsx(ft,{title:"How do I get a refund?",classNames:{heading:le.accordion.heading,trigger:le.accordion.trigger,title:le.accordion.title,indicator:le.accordion.indicator},children:e.jsxs("p",{children:["Refunds are available only under exceptional circumstances. Please refer to our refund policy ( ",e.jsx(He,{href:"/refund","aria-label":"refund",children:"https://spicychat.ai/refund"})," ) for more details."]})},"q5"),e.jsxs(ft,{title:"I have more questions.",classNames:{heading:le.accordion.heading,trigger:le.accordion.trigger,title:le.accordion.title,indicator:le.accordion.indicator},children:["Feel free to reach out to us. We’d love to hear from you."," ",e.jsx("br",{}),e.jsx("br",{}),e.jsx(U,{as:He,color:"primary_strong",variant:"secondary",href:"https://spicychat.freshdesk.com/support/tickets/new",target:"_blank",children:e.jsx(l,{variant:"md",type:"white",children:"Submit a ticket"})})]},"q6")]})]})]})};function gg({plan:t,colorFestive:s,blackFriday:n}){return e.jsx(ps,{className:"w-full py-5 px-4 bg-cardColor drop-shadow-xl",children:e.jsxs(ds,{className:"p-0 pb-6",children:[e.jsx(_,{justify:"center",className:" text-sm my-3 [&>*:first-child]:w-full [&>*:first-child]:justify-center text-center",children:e.jsx(l,{b:!0,variant:"xl",type:"primary",children:t.title})}),e.jsx(S,{y:2.5}),n&&e.jsx(te,{src:Sh,className:"h-[50px] w-[50px] fixed scale-[1.5] right-[10px] top-[10px]"}),t.monthly&&e.jsx(_,{justify:"center",className:"[&>*:first-child]:mt-0 [&>*:first-child]:font-medium [&>*:first-child]:tracking-normal",children:e.jsxs(l,{variant:"xxl",children:[e.jsxs("span",{className:"mr-2 mb-1.5",children:["$",t.monthly.price]}),e.jsx(l,{variant:"md",children:"for One Month"})]})}),t.monthly&&e.jsx(_,{justify:"center",children:e.jsx("span",{className:"text-[gray] font-normal mb-1",children:"--- or ---"})}),e.jsx(_,{justify:"center",className:"[&>*:first-child]:mt-0 [&>*:first-child]:font-medium [&>*:first-child]:tracking-normal",children:e.jsxs(l,{variant:"xxl",children:[t.annual.discountedPrice&&e.jsxs("span",{className:"line-through text-[15px] font-light",children:["$",t.annual.price]}),e.jsxs("span",{className:"mr-2 mb-1.5 ".concat(n?"text-[".concat(s,"]"):""),children:["$",t.annual.discountedPrice||t.annual.price]}),e.jsx(l,{variant:"md",children:"for One Year"})]})}),!n&&e.jsx(_,{justify:"center",className:"[&>*:first-child]:mt-0",children:e.jsx(l,{variant:"regular",type:"warning",children:t.annual.discount})}),t.monthly&&e.jsx(_,{justify:"center",className:"mt-5",children:e.jsx(He,{href:t.monthly.paymentURL,"aria-label":"monthly-payment",children:e.jsx(U,{variant:"primary_large",color:"primary_strong",type:"image",children:"Monthly Payment"})})}),e.jsx(_,{justify:"center",className:"mt-2",children:e.jsx(He,{href:t.annual.paymentURL,"aria-label":"annual-payment",children:e.jsx(U,{variant:"primary_large",color:"primary_strong",type:"image",children:"Annual Payment"})})}),e.jsx(_,{justify:"center",className:"mb-4 leading-8",children:e.jsx(C,{className:"max-w-[500px] [&>*:first-child]:mt-0 [&>*:first-child]:text-center",children:e.jsx(l,{variant:"regular",type:"neutral",children:t.description})})}),e.jsx(_,{justify:"center",children:e.jsx("ul",{className:"list-none flex flex-col gap-4",children:t.features.map(a=>e.jsx("li",{children:e.jsxs(l,{variant:"regular",type:"secondary",children:["• ",a.title,a.new&&e.jsx(l,{variant:"smallest",type:"warning",children:e.jsx("span",{className:"ml-1",children:"NEW"})}),a.url&&e.jsx(He,{className:"text-link",href:a.url,target:"_new","aria-label":"feature",children:e.jsx(Ct,{size:18,className:"ml-1 mb-1"})})]})},a.title))})})]})})}const fg=[{id:1,title:"Get a Taste",description:"Skip The Line for $0.17 per day.",features:[{title:"Skip The Waiting Line"}],annual:{price:50,paymentURL:"https://www.coinpayments.net/index.php?cmd=_pay&reset=1&merchant=8fb65da0213ae0d779298eaa59f39d6f&item_name=Get+A+Taste+Annual+Subscription&currency=USD&amountf=50.00000000&quantity=1&allow_quantity=0&want_shipping=0&allow_extra=0&",discount:"( 2 months free / 16% Off )"}},{id:2,title:"True Supporter",description:"Advanced Generation and Memory + Skip The Line",features:[{title:"4K Context (Memory)",url:"https://docs.spicychat.ai/premium-features#4k-context-memory"},{title:"Semantic Memory",url:"https://docs.spicychat.ai/premium-features#semantic-memory"},{title:"chatGPT for SFW Roleplay",url:"https://docs.spicychat.ai/premium-features#chatgpt-for-sfw-roleplay"},{title:"Skip The Waiting Line"}],annual:{price:149.99,paymentURL:"https://www.coinpayments.net/index.php?cmd=_pay&reset=1&merchant=8fb65da0213ae0d779298eaa59f39d6f&item_name=True+Supporter+Annual&currency=USD&amountf=149.99000000&quantity=1&allow_quantity=0&want_shipping=0&allow_extra=0&",discount:"( 2 months free / 16% Off )"},monthly:{price:15,paymentURL:"https://www.coinpayments.net/index.php?cmd=_pay&reset=1&merchant=8fb65da0213ae0d779298eaa59f39d6f&item_name=True+Supporter+Monthly&currency=USD&amountf=15.00000000&quantity=1&allow_quantity=0&want_shipping=0&allow_extra=0&"}},{id:3,title:"I'm All In",description:"You skip the line and get access to a priority generation queue for speedier chat response!",features:[{title:"Priority Generation Queue",url:"https://docs.spicychat.ai/premium-features#priority-generation-queue"},{title:"Conversation Images",url:"https://docs.spicychat.ai/premium-features#conversation-images",new:!0},{title:"4K Context (Memory)",url:"https://docs.spicychat.ai/premium-features#4k-context-memory"},{title:"Semantic Memory",url:"https://docs.spicychat.ai/premium-features#semantic-memory"},{title:"Skip The Waiting Line"},{title:"chatGPT for SFW Roleplay",url:"https://docs.spicychat.ai/premium-features#chatgpt-for-sfw-roleplay"}],annual:{price:249.99,paymentURL:"https://www.coinpayments.net/index.php?cmd=_pay&reset=1&merchant=8fb65da0213ae0d779298eaa59f39d6f&item_name=All+In+Annual&currency=USD&amountf=249.99000000&quantity=1&allow_quantity=0&want_shipping=0&allow_extra=0&",discount:"( 2 months free / 16% Off )"},monthly:{price:24.99,paymentURL:"https://www.coinpayments.net/index.php?cmd=_pay&reset=1&merchant=8fb65da0213ae0d779298eaa59f39d6f&item_name=All+In+Monthly&currency=USD&amountf=24.99000000&quantity=1&allow_quantity=0&want_shipping=0&allow_extra=0&"}}],jg=[{id:1,title:"Get a Taste",description:"Skip The Line for $0.17 per day.",features:[{title:"Skip The Waiting Line"}],annual:{price:60,discountedPrice:36,paymentURL:"https://www.coinpayments.net/index.php?cmd=_pay&reset=1&merchant=8fb65da0213ae0d779298eaa59f39d6f&item_name=Get+a+taste-BF-sale&currency=USD&amountf=36.00000000&quantity=1&allow_quantity=0&want_shipping=0&allow_extra=0&",discount:"( 2 months free / 16% Off )"}},{id:2,title:"True Supporter",description:"Advanced Generation and Memory + Skip The Line",features:[{title:"4K Context (Memory)",url:"https://docs.spicychat.ai/premium-features#4k-context-memory"},{title:"Semantic Memory",url:"https://docs.spicychat.ai/premium-features#semantic-memory"},{title:"chatGPT for SFW Roleplay",url:"https://docs.spicychat.ai/premium-features#chatgpt-for-sfw-roleplay"},{title:"Skip The Waiting Line"}],annual:{price:180,discountedPrice:110,paymentURL:"https://www.coinpayments.net/index.php?cmd=_pay&reset=1&merchant=8fb65da0213ae0d779298eaa59f39d6f&item_name=True+supporter-BF-sale&currency=USD&amountf=110.00000000&quantity=1&allow_quantity=0&want_shipping=0&allow_extra=0&",discount:"( 2 months free / 16% Off )"},monthly:{price:15,paymentURL:"https://www.coinpayments.net/index.php?cmd=_pay&reset=1&merchant=8fb65da0213ae0d779298eaa59f39d6f&item_name=True+Supporter+Monthly&currency=USD&amountf=15.00000000&quantity=1&allow_quantity=0&want_shipping=0&allow_extra=0&"}},{id:3,title:"I'm All In",description:"You skip the line and get access to a priority generation queue for speedier chat response!",features:[{title:"Priority Generation Queue",url:"https://docs.spicychat.ai/premium-features#priority-generation-queue"},{title:"Conversation Images",url:"https://docs.spicychat.ai/premium-features#conversation-images",new:!0},{title:"4K Context (Memory)",url:"https://docs.spicychat.ai/premium-features#4k-context-memory"},{title:"Semantic Memory",url:"https://docs.spicychat.ai/premium-features#semantic-memory"},{title:"Skip The Waiting Line"},{title:"chatGPT for SFW Roleplay",url:"https://docs.spicychat.ai/premium-features#chatgpt-for-sfw-roleplay"}],annual:{price:300,discountedPrice:180,paymentURL:"https://www.coinpayments.net/index.php?cmd=_pay&reset=1&merchant=8fb65da0213ae0d779298eaa59f39d6f&item_name=All+In-BF-sale&currency=USD&amountf=180.00000000&quantity=1&allow_quantity=0&want_shipping=0&allow_extra=0&",discount:"( 2 months free / 16% Off )"},monthly:{price:24.99,paymentURL:"https://www.coinpayments.net/index.php?cmd=_pay&reset=1&merchant=8fb65da0213ae0d779298eaa59f39d6f&item_name=All+In+Monthly&currency=USD&amountf=24.99000000&quantity=1&allow_quantity=0&want_shipping=0&allow_extra=0&"}}];function bg(t){return t==="blackfriday"?jg:fg}const yg=()=>{const[t,s]=r.useState(!1),[n,a]=r.useState(!1);return e.jsxs(_s,{className:"max-w-[1200px] tracking-tighter",gap:0,children:[e.jsx(Ln,{}),t&&e.jsx(ml,{onClose:()=>s(!1)}),e.jsx(l,{b:!0,variant:"xxl",children:"Subscribe Using Cryptocurrency"}),e.jsx(S,{y:3}),e.jsx(q,{className:"leading-9",children:e.jsx(l,{variant:"lg",type:"neutral",children:"SpicyChat is 100% free however rely on supporters like you to keep the servers running. If you enjoy using SpicyChat, please consider subscribing and you will also gain access to some cool perks!"})}),n&&e.jsx(e.Fragment,{children:e.jsx(_,{justify:"center",children:e.jsx(C,{align:"center",children:e.jsx(l,{b:!0,type:"festive",children:"BLACK FRIDAY & CYBER MONDAY SALE"})})})}),e.jsx(_,{justify:"center",children:e.jsx(l,{variant:"xxl",children:"Select a membership level"})}),e.jsx(S,{y:1}),e.jsx(_,{justify:"center",children:e.jsx(vn,{md:1,lg:3,justify:"center",className:"gap-[24px] p-3",children:bg("").map(d=>e.jsx(q,{className:"w-full",children:e.jsx(gg,{blackFriday:n,colorFestive:jp.colorFestive,plan:d})},d.id))})}),e.jsx(S,{y:6}),e.jsx(l,{variant:"lg",type:"primary",children:"Note: Manual account linking is necessary and may take a few hours. We appreciate your patience."}),e.jsx(S,{y:5}),e.jsx(U,{as:He,variant:"primary_large",color:"primary_strong",href:Ae.subscribe,children:"Subscribe Without Crypto"}),e.jsx(S,{y:1}),e.jsxs(l,{variant:"lg",type:"primary",children:["If you need help, you can get",e.jsx(He,{className:"text-[20px] ml-1.5 text-link",href:"https://docs.spicychat.ai/support","aria-label":"support",children:"support here"}),"."]}),e.jsx(S,{y:12}),e.jsx(l,{b:!0,variant:"xxl",children:"Support Our Bold Vision"}),e.jsx(S,{y:6}),e.jsx(q,{className:"leading-9",children:e.jsx(l,{variant:"lg",type:"neutral",children:"At SpicyChat, our vision is to transform entertainment without the limitations our competitors have. By utilizing the latest in AI technologies, we're pushing the envelope to create a space where users can freely interact with their favorite chatbots and explore fantasies one would not be able to otherwise."})}),e.jsx(S,{y:4}),e.jsx(q,{className:"leading-9",children:e.jsx(l,{variant:"lg",type:"neutral",children:"While numerous platforms retreat behind content moderation and censorship to appease investors, we're taking a different path. Of course, we maintain strict guidelines against illegal activities, and we ensure responsible moderation on all public pages. But our fundamental belief is that everyone should have a safe, private space to explore their deepest desires."})})]})},Qi=r.forwardRef(({children:t,className:s,...n},a)=>e.jsx("div",{ref:a,className:ws("flex items-center justify-between gap-2 rounded-medium bg-content2 p-4",s),...n,children:t}));Qi.displayName="CellWrapper";const _g=({isOpen:t,onOpenChange:s,role:n,recurringDate:a,onCancelConfirm:d,isActioning:o})=>e.jsxs(es,{title:"Confirm cancellation?",classNames:{title:"text-center pl-[28px]"},open:t,onOpenChange:s,backdrop:"blur",children:[e.jsxs(C,{className:"gap-3",children:[e.jsxs("p",{className:"text-medium text-default-500",children:["If you cancel, you'll no longer have access to the benefits from your plan after"," ",e.jsx("span",{className:"font-bold",children:a}),", including:"]}),n&&e.jsx("ul",{children:jd[n].map((i,c)=>e.jsxs("li",{className:"flex items-center gap-1",children:[e.jsx(Bs,{className:"text-default-600",icon:"ci:check",width:24}),e.jsx("p",{className:"text-default-500",children:i})]},c))}),e.jsxs("p",{className:"text-medium text-default-500",children:["Need help instead?"," ",e.jsx(K,{className:"underline text-default-700",to:"https://docs.spicychat.ai/support","aria-label":"contact",children:"Contact us"})]})]}),e.jsxs(_,{justify:"end",className:"gap-2",children:[e.jsx(Ls,{color:"danger",variant:"light",onPress:d,isDisabled:o,isLoading:o,"aria-label":"cancel",children:o?e.jsx("span",{children:"Cancelling..."}):e.jsx("span",{children:"Confirm cancellation"})}),e.jsx(Ls,{color:"primary",onPress:()=>s==null?void 0:s(!1),"aria-label":"keep-benefits",children:"Keep benefits"})]})]}),lu=r.forwardRef(({price:t,currency:s,billing_frequency:n,label:a,benefits:d=[],className:o,classNames:i={},...c},u)=>e.jsx(ua,{...c,ref:u,classNames:{...i,base:ws("inline-flex m-0 px-3 py-4 max-w-[100%] items-center justify-between","flex-row-reverse w-full cursor-pointer rounded-lg 3 border-medium border-default-100","data-[selected=true]:border-secondary data-[selected=true]:bg-secondary-50",i==null?void 0:i.base,o),wrapper:ws("group-data-[focus-visible=true]:ring-secondary",i==null?void 0:i.wrapper),labelWrapper:ws("ml-0",i==null?void 0:i.labelWrapper)},color:"secondary",children:e.jsxs("div",{className:"flex w-full items-center gap-1",children:[e.jsx("div",{className:"item-center flex rounded-full bg-secondary-50 p-2 group-data-[selected=true]:bg-secondary-100"}),e.jsxs("div",{className:"flex w-full flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("p",{className:"text-small",children:a}),e.jsx("span",{className:"mt-0.5 text-tiny text-default-500",children:t!==void 0&&" ".concat(Wa(s)).concat(t," per ").concat(n==="annual"?"year":"month")})]}),e.jsx("ul",{children:d.map((m,j)=>e.jsxs("li",{className:"flex items-center gap-1",children:[e.jsx(Bs,{className:"text-default-600",icon:"ci:check",width:14}),e.jsx("p",{className:"text-xs text-default-500",children:m})]},j))})]})]})}));lu.displayName="PlanRadio";const vg=({isOpen:t,onOpenChange:s,onChangePlan:n,currentPlanId:a,availablePlans:d,isActioning:o,isCurrentPlanYearly:i})=>{var b,g,v,T;const[c,u]=r.useState(a),[m,j]=r.useState(""),[f,h]=r.useState("monthly");let x=d;i?x=d.filter(w=>w.billing_frequency=="annual"):x=d==null?void 0:d.filter(w=>w.billing_frequency===f),r.useEffect(()=>{u(a)},[a]),r.useEffect(()=>{if(c===a){j("");return}if(x){const w=x==null?void 0:x.find(I=>I.plan_id===c);w&&w.upgrade_price>0?j("DISPLAY_PRICE"):j("NEXT_CYCLE")}},[c,a,x]);const y=(g=(b=x||[])==null?void 0:b.find(w=>w.plan_id===c))==null?void 0:g.upgrade_price,p=(T=(v=x||[])==null?void 0:v.find(w=>w.plan_id===c))==null?void 0:T.currency;return e.jsxs(es,{title:"Change your plan",classNames:{title:"text-center pl-[28px]"},description:"Select the new plan you'd like to switch to.",open:t,onOpenChange:s,backdrop:"blur",children:[!i&&e.jsxs(al,{size:"sm",variant:"bordered",selectedKey:f,onSelectionChange:w=>h(w),children:[e.jsx(Fa,{title:"Monthly Plans"},"monthly"),e.jsx(Fa,{title:"Annual Plans"},"annual")]}),e.jsxs("div",{children:[e.jsx(En,{"aria-label":"Plans",classNames:{wrapper:"gap-3"},value:c,onValueChange:u,children:x==null?void 0:x.map((w,I)=>e.jsx(lu,{isDisabled:(w==null?void 0:w.plan_id)===a,benefits:jd[w==null?void 0:w.role],label:w==null?void 0:w.name,price:w.price,currency:w.currency,billing_frequency:w==null?void 0:w.billing_frequency,value:w==null?void 0:w.plan_id,className:"p-2"},I))}),m==="NEXT_CYCLE"&&e.jsx("p",{className:"text-tiny text-default-500 text-warning",children:"Changes will be effective on the next billing cycle."}),m==="DISPLAY_PRICE"&&e.jsxs("p",{className:"text-tiny text-default-500 text-warning",children:["A prorated charge of"," ",e.jsxs("span",{className:"font-bold",children:[Wa(p),parseFloat(y).toFixed(2)]})," ","plus applicable taxes will be applied immediately."]})]}),e.jsx(_,{justify:"end",children:e.jsx(Ls,{isDisabled:o||c===a,isLoading:o,color:"primary",onPress:()=>n(c),"aria-label":"change-plan",children:o?e.jsx("span",{children:"Changing Plan..."}):e.jsx("span",{children:"Change Plan"})})})]})},Ng=({isOpen:t,onOpenChange:s,onChangeCard:n,isActioning:a,error:d})=>{const[o,i]=r.useState(!1),[c,u]=r.useState(null);return e.jsxs(es,{title:"Update Payment Info",classNames:{title:"text-center pl-[28px]"},description:"Enter your new payment information.",open:t,onOpenChange:s,backdrop:"blur",children:[e.jsx(bd,{setIsCardValid:i,setCreditCardToken:u}),d&&e.jsx("p",{className:"flex text-danger justify-center",children:d}),e.jsx(_,{justify:"end",children:e.jsx(Ls,{isDisabled:a||!o,isLoading:a,color:"primary",onPress:()=>n(c),"aria-label":"update",children:a?"Updating...":"Update Card"})})]})},ou=()=>{var J,$,xe,de,W,ge,X,ae,Pe,Ce,ve;const t=Je(),{callApi:s,jsonApiService:n,isLoading:a,forceRefreshToken:d}=Ee(),{callApi:o,isLoading:i}=Ee(),[c,u]=r.useState(!1),[m,j]=r.useState(!1),[f,h]=r.useState(!1),[x,y]=r.useState(null),[p,b]=r.useState(""),[g,v]=r.useState(""),{onlyUserId:T}=he(),I=new Date(x==null?void 0:x.recur_at).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"}),A=()=>{b(""),o(n.updateResource,"subscriptions","sticky",{action:"cancel",order_id:x==null?void 0:x.order_id,subscription_id:x==null?void 0:x.subscription_id}).then(Z=>{(Z==null?void 0:Z.status)==="SUCCESS"&&(y({...x,subscription_status:Z.subscription_status}),u(!1))}).catch(Z=>{b(Z.message)})},D=()=>{b(""),o(n.updateResource,"subscriptions","sticky",{action:"uncancel",order_id:x==null?void 0:x.order_id,subscription_id:x==null?void 0:x.subscription_id}).then(Z=>{(Z==null?void 0:Z.status)==="SUCCESS"&&y({...x,subscription_status:Z.subscription_status})}).catch(Z=>{console.log("Error",Z.message),b(Z.message)})},O=()=>{s(n.fetchResource,"subscriptions/sticky").then(Z=>{y(Z==null?void 0:Z[0])}).catch(Z=>{console.log("Error",Z.message)})};r.useEffect(()=>{T&&O()},[T]);const P=Z=>{b(""),o(n.updateResource,"subscriptions","sticky",{action:"change_plan",order_id:x==null?void 0:x.order_id,subscription_id:x==null?void 0:x.subscription_id,plan_id:Z}).then(me=>{(me==null?void 0:me.status)!=="SUCCESS"&&b(me==null?void 0:me.message),O(),j(!1),setTimeout(()=>{d()},5e3)}).catch(me=>{b(me.message),j(!1)})},E=Z=>{b(""),o(n.updateResource,"subscriptions","sticky",{action:"change_card",order_id:x==null?void 0:x.order_id,subscription_id:x==null?void 0:x.subscription_id,card_token:Z}).then(me=>{(me==null?void 0:me.status)!=="SUCCESS"?b(me==null?void 0:me.message):(O(),h(!1))}).catch(me=>{console.log("Error",me.message),b(me.message)})},N=()=>{b(""),o(n.updateResource,"subscriptions","sticky",{action:"charge_rebill",order_id:x==null?void 0:x.order_id,subscription_id:x==null?void 0:x.subscription_id}).then(Z=>{(Z==null?void 0:Z.status)==="SUCCESS"?O():v(Z==null?void 0:Z.message)}).catch(Z=>{console.log("Error",Z.message),v(Z.message)})},R=(J=x==null?void 0:x.current_product)==null?void 0:J.role,k=(($=x==null?void 0:x.current_product)==null?void 0:$.plan_id)!==((xe=x==null?void 0:x.next_product)==null?void 0:xe.plan_id),G=(x==null?void 0:x.subscription_status)==="cancelled",F=x==null?void 0:x.is_card_deleted,H=(x==null?void 0:x.subscription_status)==="expired",V=(x==null?void 0:x.frequency)==="Yearly Subscription",z=(x==null?void 0:x.subscription_status)==="grace",ne=bp((de=x==null?void 0:x.next_product)==null?void 0:de.plan_id);return e.jsxs(e.Fragment,{children:[e.jsxs(ps,{className:"w-full max-w-lg p-2",children:[e.jsxs(Sn,{className:"flex flex-col items-start px-4 pb-0 pt-4",children:[e.jsx("p",{className:"text-large",children:"Subscription Management"}),e.jsx("p",{className:"text-small text-default-500",children:"Manage your subscription details"})]}),a&&e.jsx(ds,{className:"min-h-96",children:e.jsx(Se,{label:"Loading..."})}),!a&&e.jsxs(ds,{className:"space-y-2 min-h-96",children:[e.jsxs(Qi,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold",children:"SpicyChat"}),e.jsx("p",{className:"text-large mt-6",children:ne}),e.jsxs("p",{children:[Wa((W=x==null?void 0:x.next_product)==null?void 0:W.currency),parseFloat((ge=x==null?void 0:x.next_product)==null?void 0:ge.price).toFixed(2)," ",V?"per year":"per month"]}),e.jsx("p",{className:"text-default-500 text-small",children:"Plus applicable taxes"}),!z&&!H&&e.jsxs("p",{className:"text-default-500 mt-8",children:[G?"Your access ends on ":"Next charge date",":"," ",I]}),H&&e.jsx("p",{className:"text-danger mt-8",children:"Your subscription has expired."}),z&&e.jsxs(e.Fragment,{children:[!g&&e.jsxs("p",{className:"text-danger mt-8",children:[e.jsx(Bs,{icon:"emojione-v1:warning",className:"mr-2"}),"Your payment failed. Please update your payment method to avoid losing access."]}),g&&e.jsx("p",{className:"text-danger mt-8",children:g}),e.jsx(Ls,{className:"mt-4",color:"primary",onClick:N,isLoading:i,isDisabled:i,"aria-label":"pay",children:"Pay amount due"})]}),k&&e.jsxs("p",{className:"pt-4 text-secondary text-small",children:["Your current plan is"," ",(X=x==null?void 0:x.current_product)==null?void 0:X.name]})]}),G&&!H&&e.jsx("div",{className:"text-danger inline-block align-top",children:"Cancelled"}),H&&e.jsx("div",{className:"text-danger inline-block align-top",children:"Expired"})]}),((ae=x==null?void 0:x.credit_card)==null?void 0:ae.last_4)&&e.jsxs(Qi,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-large",children:"Payment method"}),e.jsxs("p",{className:"text-default-500 flex items-center",children:[e.jsx(Nn,{className:"mt-2 mr-2",width:30,brand:(Pe=x==null?void 0:x.credit_card)==null?void 0:Pe.type})," ","ending in ",(Ce=x==null?void 0:x.credit_card)==null?void 0:Ce.last_4]})]}),!F&&e.jsx(Ls,{radius:"full",variant:"bordered",onClick:()=>h(!0),"aria-label":"change",children:"Change"})]}),!F&&!H&&e.jsxs(e.Fragment,{children:[e.jsx(Ls,{isDisabled:G,onPress:()=>{j(!0)},"aria-label":"change-plan",children:"Change Plan"}),!G&&e.jsx(Ls,{onClick:()=>u(!0),"aria-label":"cancel-membership",children:"Cancel membership"}),G&&e.jsx(Ls,{size:"lg",className:"text-success",onClick:D,isDisabled:i,isLoading:i,"aria-label":"uncancel-membership",children:i?e.jsx("span",{children:"Uncancelling..."}):e.jsx("span",{children:"Uncancel Membership"})})]}),H&&e.jsx(Ls,{className:"text-success",onPress:()=>{var me,Ge;let Z="/checkout";(me=x==null?void 0:x.next_product)!=null&&me.plan_id&&(Z+="?plan_id=".concat((Ge=x==null?void 0:x.next_product)==null?void 0:Ge.plan_id)),t(Z)},"aria-label":"reactivate",children:"Choose Plan & Reactivate"}),p&&e.jsx("p",{className:"flex text-danger justify-center",children:p})]})]}),e.jsx(_g,{isOpen:c,onOpenChange:u,onCancelConfirm:A,role:R,isActioning:i,recurringDate:I}),e.jsx(vg,{isOpen:m,onOpenChange:j,onChangePlan:P,currentPlanId:(ve=x==null?void 0:x.next_product)==null?void 0:ve.plan_id,availablePlans:x==null?void 0:x.available_plans,isActioning:i,isCurrentPlanYearly:V}),e.jsx(Ng,{isOpen:f,onOpenChange:h,onChangeCard:E,isActioning:i,error:p})]})};ou.displayName="SubscriberPortal";const fo=()=>{const{onlyUserId:t}=he(),s=Zs();return t?(s(gl(!0)),e.jsxs(e.Fragment,{children:[e.jsx(md,{}),e.jsx("div",{className:"flex justify-center",children:e.jsx(ou,{})})]})):null},Cg={[Cn.SpicyChat]:{title:"Unlock the Full Experience with Our Suite of AI Chat Apps",description:"To ensure the ultimate AI chat experience, we recommend downloading all our apps. Each app offers a unique way to interact with AI, and together, they provide a seamless, comprehensive chat journey."},[Cn.PixelChat]:{title:"Unlock the Full Experience with Our App",description:"To ensure the ultimate AI chat experience, we recommend downloading the PixelChat app. It offers a unique way to interact with AI and provides a seamless, comprehensive chat journey."}},Sg=[{id:Cn.PixelChat,logo:"/Assets/pixelchat.svg",backgroundImage:"/Assets/pixelchatPhone.png",applicationName:$l.PixelChat,title:"Your story your way",description:"Embark on epic quests or enjoy cozy conversations, empowering you to shape your own narrative.",features:["No waiting line","Access all your current status","Navigate all our SFW bots"],appStoreImage:"/Assets/appStore.png",playStoreImage:"/Assets/playStore.png",backgroundColor:"#1E0E2E"},{id:Cn.SpicyChat,logo:"/Assets/spicychat.svg",backgroundImage:"/Assets/spicychatPhone.png",applicationName:$l.SpicyChat,title:"Uncensored Roleplay Chat",description:"Experience intimate roleplaying with AI chatbots that can adapt to your deepest desires.",features:["Explicit chat content with no restrictions.","Access library of 300K+ NSFW characters"],note:"*To ensure you always have access to your favorite characters, we suggest you download PixelChat as a precaution.",appStoreImage:"/Assets/appStore.png",playStoreImage:"/Assets/androidDark.svg",target:"_self",backgroundColor:"#001733"}],or="&_p=tap_vid:";function wg(){const[t,s]=r.useState(null),[n,a]=r.useState(null),[d,o]=r.useState(null),[i,c]=r.useState(null),u=localStorage.getItem("tap_vid"),m=r.useCallback(()=>{u&&u!=="null"&&u!=="undefined"?(a(zl+or+u),s(Wl+or+u),o(Yl+or+u),c(Kl+or+u)):(a(zl),s(Wl),o(Yl),c(Kl))},[u]);return r.useEffect(()=>{m()},[u]),{iOSAffLink:n,androidAffLink:t,pixelChatAndroidAffLink:d,pixelChatIOSAffLink:i}}function Eg({data:t}){var j;const{iOSAffLink:s,pixelChatAndroidAffLink:n,pixelChatIOSAffLink:a}=wg(),d=(t==null?void 0:t.id)===Cn.SpicyChat,o=d?s:a,i=d?"/apps/android":n,{isDesktop:c,isMobile:u,isTablet:m}=Ie();return e.jsxs(_,{className:"rounded-2xl border-1 border-solid border-neutral-borderSecondary relative *:z-[1] overflow-hidden min-h-[380px] max-desktop:min-h-[350px] mob:gap-[22px] mob:p-6 max-mob:flex-col max-mob:text-center max-mob:p-2.5 w-[628px] max-w-full max-desktop:w-full",children:[e.jsx("div",{className:"absolute size-[124px] top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 rounded-full opacity-0 dark:opacity-80 z-[0]",style:{background:t==null?void 0:t.backgroundColor,boxShadow:"0px 0px 200px 200px ".concat(t==null?void 0:t.backgroundColor)}}),e.jsxs(C,{className:"gap-4 "+(u&&"items-center"),children:[e.jsxs(C,{className:"gap-2 "+(u&&"!flex-row items-center justify-center"),children:[e.jsx(te,{removeWrapper:!0,height:48,width:48,className:"p-1 bg-black rounded-xl",src:t==null?void 0:t.logo}),e.jsx(l,{b:!0,type:"neutral-text",children:t==null?void 0:t.applicationName})]}),e.jsx(l,{b:!0,variant:"lg",type:"neutral-text",children:t==null?void 0:t.title}),e.jsx(l,{type:"neutral-text",children:t==null?void 0:t.description}),e.jsx("ul",{className:"*:list-disc pl-6 text-start "+(u?"mx-10":""),children:(j=t==null?void 0:t.features)==null?void 0:j.map((f,h)=>e.jsx("li",{children:f},h))}),(t==null?void 0:t.note)&&e.jsx(l,{variant:"smallest",type:"neutral_secondary tracking-wide	",children:t==null?void 0:t.note}),e.jsxs(_,{className:"gap-1 mt-auto "+(u?"justify-center":void 0),children:[e.jsx(K,{to:o!=null?o:"#",target:"_blank","aria-label":"ios",children:e.jsx(te,{removeWrapper:!0,radius:"none",height:38,src:t==null?void 0:t.appStoreImage})}),e.jsx(K,{to:i!=null?i:"#",target:d?"_self":"_blank","aria-label":"android",children:e.jsx(te,{removeWrapper:!0,radius:"none",height:38,src:t==null?void 0:t.playStoreImage})})]})]}),e.jsx(K,{className:c?"flex items-center":"h-[280px] min-w-[237px] overflow-hidden relative top-6 ".concat(u?"self-center":"self-end"),to:o!=null?o:"#",target:"_blank","aria-label":"ios",children:e.jsx(te,{removeWrapper:!0,src:t==null?void 0:t.backgroundImage,width:u?278:m?237:void 0,height:c?300:void 0,className:"rounded-xl border-solid border-[#8F8F8F] !shadow-[0px_4px_42.3px_0px_rgba(250,250,250,0.25)]"})})]})}function Ag(){const{isSpicyChat:t}=yp(),{applicationId:s}=vs(),{isMobile:n,isTablet:a}=Ie(),d=n?"big":"biggest",{title:o,description:i}=Cg[s]||{};return e.jsxs(C,{className:"supportedApplicationsPage items-center gap-10",children:[e.jsx(Ue,{index:"SupportedApplications"}),e.jsxs(C,{className:"text-center w-[850px] max-w-full gap-4 mt-10",children:[e.jsx(l,{b:!0,variant:d,type:"neutral_text",children:o}),e.jsx(l,{variant:"regular",children:i})]}),e.jsx(_,{className:"gap-6 w-full max-desktop:flex-col justify-center",children:Sg.map((c,u)=>!t&&s!==c.id?null:e.jsx(Eg,{data:c},u))})]})}function jo(){const{logout:t}=Qe();return e.jsxs(e.Fragment,{children:[e.jsx(Ue,{index:"NoFoundPage"}),e.jsxs("section",{className:"section-404 absolute top-[45%] left-[50%] translate-x-[-50%] translate-y-[-50%] leading-6 max-sm:2.5",children:[e.jsx(_s,{className:"text-center mb-[0.625rem]",children:e.jsx(l,{h1:!0,children:"INVALID ACCOUNT"})}),e.jsxs(_s,{className:"flex flex-col items-center justify-center text-center",children:[e.jsx(l,{variant:"xxl",children:e.jsx("span",{className:"leading-[36px]",children:"This account is invalid, has been deleted or has been suspended."})}),e.jsx(S,{y:1}),e.jsx(l,{variant:"lg",children:e.jsxs("span",{className:"leading-[30px]",children:["You should",e.jsx("a",{className:"text-link mx-1",onClick:t,children:"logout"}),"and login again with a valid account."]})}),e.jsx(K,{className:"mt-[0.62]",to:"/","aria-label":"home",children:e.jsx(U,{variant:"primary_large",color:"primary_strong",onPress:t,children:"Back to home"})})]})]})]})}const Tg=()=>e.jsx(An,{className:"border-1 border-solid border-l-0 border-r-0 border-border px-0",keepContentMounted:!0,children:e.jsxs(ft,{title:"Advanced",classNames:{trigger:"bg-transparent cursor-pointer font-semibold py-5",title:"text-[24px] tracking-tighter",indicator:"text-[20px]",content:"pt-0 overflow-hidden"},children:[e.jsx(l,{children:e.jsxs(K,{className:"text-link leading-6",to:"https://docs.spicychat.ai/advanced/openai-api-on-spicychat",target:"_blank","aria-label":"openai-help",children:["Read how to improve your experience using openAI"," ",e.jsx(xc,{className:"text-link ml-1 opacity-80"})]})}),e.jsx(S,{y:2}),e.jsx(As,{component:ms,variant:"primary",color:"primary",title:"OpenAI API Key",desc:"Your api key is securely stored.",placeholder:"Enter your OpenAI API key",maxLength:"200","aria-labelledby":"openai_api_key",name:"openai_api_key"}),e.jsx(S,{y:5}),e.jsx(Rr,{name:"openai_mode",options:[{value:Oa.DISABLED,label:"Disabled: Not using your key."},{value:Oa.ENABLED,label:"Enabled: Always using openAI."},{value:Oa.HYBRID,label:"Hybrid: OpenAI unless moderation is triggered."}],title:"OpenAI Mode",desc:"The OpenAI mode you want to use",orientation:"vertical",size:"sm","aria-labelledby":"visibility",classNames:{wrapper:"gap-[23px]"}})]})}),Ig=({subscriptionPlatform:t})=>{const{getManageSubscriptionLinks:s,showPreventSubscriptionModal:n,setShowPreventSubscriptionModal:a,checkIsSubscriptionManagable:d}=kn(),o=d(t),{status:i,role:c}=he(),u=i===ma.ACTIVE;return e.jsxs(e.Fragment,{children:[e.jsxs(_,{align:"center",gap:1,children:[e.jsx(l,{b:!0,children:"Current Plan"}),o&&e.jsxs(U,{variant:"primary_smallest",color:"transparent",onPress:s(),children:[n&&e.jsx(Ln,{onClose:()=>a(!1)}),e.jsx(l,{type:"primary",children:"Manage Subscription"})]})]}),e.jsx(S,{y:2}),e.jsx(U,{variant:"tertiary_short",color:u?"gradient_secondary":"gradient_tertiary",endContent:u?e.jsx(Br,{size:21,className:"stroke-[3px] ml-1.5"}):e.jsx(pc,{size:22,className:"ml-1.5"}),onPress:s(),children:e.jsx(l,{variant:"regular",type:"white",children:u?yd(c):"Free Tier"})}),e.jsx(S,{y:4})]})},Pg=({isLoading:t,hasChangesPending:s,logoutAndGoToHome:n,setShowDeleteConfirmationDialog:a,isLoadingDelete:d})=>e.jsxs(vn,{xs:12,sm:3,gap:2,justify:"center",className:"gap-2",children:[e.jsx(q,{children:e.jsxs(U,{type:"submit",variant:"primary_large",color:"primary_light",isDisabled:t||!s,isLoading:t,children:[e.jsx(mc,{}),"Update"]})}),e.jsx(q,{children:e.jsxs(U,{variant:"primary_large",color:"primary_light",onPress:n,children:[e.jsx(gc,{}),"Logout"]})}),e.jsx(q,{xs:12,sm:3,children:e.jsxs(U,{onPress:()=>a(!0),variant:"secondary_short",color:"danger_light",isDisabled:d,children:[e.jsx(fc,{}),"Remove Account"]})})]}),Rg=({permissionsToDisplay:t})=>e.jsxs(e.Fragment,{children:[e.jsx(S,{y:3}),e.jsx(l,{b:!0,children:"Your Benefits"}),e.jsx(K,{className:"text-[12px] ml-5 text-link",to:"https://docs.spicychat.ai/support","aria-label":"not-as-expected",children:"Not as expected?"}),e.jsx(S,{y:1}),e.jsx(_,{className:"gap-1 flex-wrap",children:t.map((s,n)=>s==="site_access"?!0:e.jsx(ct,{classNames:{base:"h-6 px-0",content:"capitalize font-bold text-xs text-white"},color:"secondary",children:s.replaceAll("_"," ")},n))}),e.jsx(S,{y:1})]}),Og="Remove Account",kg="we're sorry to see you go",Ei={DESCRIPTION:"Looks like you have an active subscription. Deleting an account will also cancel the subscription.",CANCEL_BUTTON_TITLE:"Manage Subscription",ACTION_BUTTON_TITLE:"Proceed"},Ai={DESCRIPTION:"Deleting your account will permanently remove your SpicyChat account from all devices and erase your data.",CANCEL_BUTTON_TITLE:"Cancel",ACTION_BUTTON_TITLE:"Remove Account"},Ti=_d+1,Lg=({userName:t,isVisible:s,onClose:n,isLoading:a,onConfirmation:d,isManageSubscription:o,handleManageSubscription:i})=>{const[c,u]=r.useState(o&&i!==null),[m,j]=r.useState(void 0),[f,h]=r.useState(Ti),x="".concat(t,", ").concat(kg),y=f<Ti&&f>0,p=()=>{a||(o&&u(!0),clearInterval(m),h(Ti),n())};r.useEffect(()=>{f<=0&&(clearInterval(m),d())},[f]);const b=async()=>{if(c)u(!1);else{h(v=>v-1);const g=setInterval(()=>{h(v=>v-1)},1e3);j(g)}};return e.jsxs(es,{title:Og,classNames:{title:"text-center pl-[28px]"},open:s,onOpenChange:p,dismissable:!a,children:[e.jsx("div",{className:"text-center",children:x}),e.jsx("div",{className:"text-center",children:c?Ei.DESCRIPTION:Ai.DESCRIPTION}),e.jsxs(_,{className:"gap-2",children:[e.jsx(U,{variant:"primary_large_bordered",color:"transparent",isDisabled:a,onPress:c?i:p,children:c?Ei.CANCEL_BUTTON_TITLE:Ai.CANCEL_BUTTON_TITLE}),e.jsxs(U,{variant:"primary_large",color:"error_light",isLoading:a,onPress:b,isDisabled:a||y,children:[c?Ei.ACTION_BUTTON_TITLE:Ai.ACTION_BUTTON_TITLE," ",y?"(".concat(f,")"):""]})]})]})},cu="EN",du="Default",bo=[{code:cu,name:du},{code:"ZH",name:"Chinese"},{code:"DE",name:"German"},{code:"ES",name:"Spanish"},{code:"FR",name:"French"},{code:"IT",name:"Italian"},{code:"JA",name:"Japanese"},{code:"KO",name:"Korean"},{code:"PT",name:"Portuguese"},{code:"RU",name:"Russian"}],Mg=()=>{var o;const[t,s]=r.useState(cu);r.useEffect(()=>{const i=Q.getItem(Or);i&&s(i)},[]);const n=async i=>{s(i),Q.setItem(Or,i)},a=((o=bo.find(i=>i.code===t))==null?void 0:o.name)||du;return jc(vd.CHARACTER_TRANSLATION_TESTING)?e.jsxs("div",{className:"w-full pt-4",children:[e.jsx(_,{align:"center",className:"gap-1",children:e.jsx(l,{variant:"md",type:"medium",children:"Preferred Chat Language"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"px-2 py-0.5 rounded-full text-xs bg-purple-100 text-purple-700 font-medium",children:"Beta Testing"}),e.jsx("div",{className:"max-w-xs flex-1",children:e.jsxs(Zt,{children:[e.jsx(ea,{children:e.jsx(Ls,{variant:"bordered",className:"justify-between",endContent:e.jsx(Tn,{className:"text-small"}),children:a})}),e.jsx(sa,{"aria-label":"Select language",variant:"flat",selectionMode:"single",selectedKeys:t?new Set([t]):new Set,onSelectionChange:i=>{const c=Array.from(i)[0];c&&n(c)},children:bo.map(i=>e.jsx(Et,{value:i.code,children:i.name},i.code))})]})})]}),e.jsx(l,{variant:"sm",className:"text-gray-800",children:"Translate character and guide the AI to respond in the selected language. This setting will lead up to 30s page load time for first time character translation."})]}):null},Dg=()=>{var ze;const t=Ds().pathname,s=aa(t),{logEvent:n}=bt(),{onUserSetBlurNSFW:a,onUserSetShowNSFW:d,showUnsavedProfileChangesWarning:o,setToShowUnsavedProfileChangesWarning:i,blurNSFW:c,showNSFW:u}=fs(),{onUserUpdateProfile:m,isLoading:j,error:f,userId:h}=he(),x=Ha(),{platform:y,role:p,resetProfile:b,setIsUserProfileModified:g,userProfile:v,isProfileModified:T}=he(),{logout:w,permissions:I}=Qe(),{jsonApiService:A,callApi:D}=Ee(),{callApi:O,isLoading:P}=Ee(),E=j||P,[N,R]=r.useState(!1),[k,G]=r.useState(null),[F,H]=r.useState(!1),[V,z]=r.useState([]),{setFieldsValues:ne,invalidateFields:J}=x,[$]=Gr((ze=x.values)==null?void 0:ze.username,500),[xe,de]=r.useState(!1),W=Je(),ge=Zs(),X=JSON.parse(Q.getItem(Is))||!1,ae=Q.getItem(Wr)==="true",{logoutDomain:Pe=Cd}=vs(),Ce=Ks(B=>{var ce;return(ce=B==null?void 0:B.navigation)==null?void 0:ce.path})||"",ve=r.useMemo(()=>{var B,ce,Ne,je;return{username:(B=v==null?void 0:v.username)==null?void 0:B.toLowerCase(),name:v==null?void 0:v.name,avatar_url:(ce=v==null?void 0:v.avatar_url)!=null?ce:null,openai_api_key:(Ne=v==null?void 0:v.openai_api_key)!=null?Ne:"",openai_mode:(je=v==null?void 0:v.openai_mode)!=null?je:null,highlights:(v==null?void 0:v.highlights)||""}},[v]),{getManageSubscriptionLinks:Z}=kn(),me=async()=>{await d(!u),ae&&u&&n(Ss.SWITCH_NSFW,{user_id:h,enable_nsfw:!1,page_name:s})},Ge=async()=>{await a(!c)};r.useEffect(()=>()=>g(!1),[ge]),r.useEffect(()=>{const B=async ce=>{try{await D(A.checkUsername,ce).then(({isAvailable:Ne})=>{var je;!Ne&&ce!==((je=v==null?void 0:v.username)==null?void 0:je.toLowerCase())&&J({username:"Username is not available"}),H(Ne),R(!1)})}catch(Ne){console.log(Ne)}};(v==null?void 0:v.username)!==$&&Dt($)&&$&&$.length>=3&&(R(!0),B($))},[$,D,A.checkUsername,J,v==null?void 0:v.username]),r.useEffect(()=>{if(I){const B=[];I==null||I.map(ce=>{Sd.includes(ce)||B.push(ce)}),z(B)}},[I]);const Y=r.useMemo(()=>{var ce;if(!x.values.username)return{text:"",color:""};if(x.values.username.length<4)return{text:"Username is invalid",color:"error"};const B=Dt(x.values.username);return B?N?{text:"Checking...",color:"info",icon:e.jsx(Se,{size:"sm"})}:F&&x.isValid?{text:"Available",color:"",icon:e.jsx(Vr,{className:"text-green-600",width:44,height:24})}:!F&&x.values.username!==((ce=v==null?void 0:v.username)==null?void 0:ce.toLowerCase())?{text:"Not Available",color:"",icon:e.jsx(nl,{color:"#9f1942",width:44,height:24})}:{}:{text:B?"Valid":"Username is invalid",color:B?"success":"error"}},[x.values.username,N,F,v==null?void 0:v.username]),fe=async()=>{let B=await O(A.deleteResource,"users");B&&(b(B),await Le())},Le=async()=>{await w(),bc.clear();try{await il.logout()}catch(B){console.error("error while logging user out from notification provider",B)}Pe&&X?window.open("https://".concat(Pe),"_self"):W("/")},Fe=async()=>{var Ne;const B=x.values;let ce={username:B==null?void 0:B.username,name:B==null?void 0:B.name,highlights:B==null?void 0:B.highlights,openai_api_key:B==null?void 0:B.openai_api_key,openai_mode:B==null?void 0:B.openai_mode};(Ne=x==null?void 0:x.values)!=null&&Ne.avatar_url&&(ce.avatar_url=B==null?void 0:B.avatar_url);try{await m(ce),g(!1),Ce!==""&&W(Ce),ge(La("")),G("Profile saved successfully."),setTimeout(()=>G(null),3e3)}catch(je){console.log(je.message),Ye()}};r.useEffect(()=>{const ce=["name","username","avatar_url","openai_api_key","openai_mode","highlights"].some(Ne=>x.values[Ne]!==void 0&&x.values[Ne]!==ve[Ne]);g(!!ce)},[x,ve,ge]);const We=()=>{Fe()},Be=()=>{i(!1),W(Ce)},Ye=()=>{i(!1)},Ke=[{rule:Ys(),message:"Username can't be empty"},{rule:Ba(3),message:"Username is too short"},{rule:ha(20),message:"Username should be less then 20 characters "},{rule:B=>Dt(B),message:"Username contain invalid characters"}];return r.useEffect(()=>{const B=()=>{T?(i(!0),window.history.pushState(null,"",window.location.href),ge(La("/"))):(ge(La("")),W("/"))};return window.history.pushState(null,"",window.location.href),window.addEventListener("popstate",B),()=>{window.removeEventListener("popstate",B)}},[T]),v?e.jsxs(e.Fragment,{children:[e.jsx(l,{variant:"xxl",children:"Profile Settings"}),e.jsx(S,{y:3}),e.jsx($a,{onValidSubmit:Fe,connect:x,initialValues:ve,enableReinitialize:!0,children:e.jsxs("form",{onSubmit:x.submit,children:[e.jsx(As,{component:ms,variant:"primary_small",color:"primary",name:"username",title:"Username",desc:"You can change this at any time.",spacer:5,maxLength:"20",endContent:Y.icon,"aria-labelledby":"username",toLowerCase:!0,validations:Ke}),e.jsx(As,{component:ms,variant:"primary_small",color:"primary",title:"Name",desc:"The name you'll use for chatting",spacer:5,maxLength:"20","aria-labelledby":"name",name:"name",validations:[{rule:Ys(),message:"Name can't be empty"}]}),X&&p===Xt.PREMIUM&&e.jsxs(e.Fragment,{children:[e.jsx(_,{align:"center",gap:1,children:e.jsx(l,{b:!0,children:"Current Plan"})}),e.jsx(S,{y:2}),e.jsx(U,{variant:"tertiary_short",color:"gradient_secondary",endContent:e.jsx(Br,{size:21,className:"stroke-[3px] ml-1.5"}),children:e.jsx(l,{variant:"regular",type:"white",children:"Premium"})}),e.jsx(S,{y:4})]}),!X&&e.jsx(Ig,{subscriptionPlatform:y}),e.jsx(As,{component:Nd,name:"avatar_url",title:"Avatar",desc:"You can either create an image from text or upload an image.",characterAvatar:x.values.avatar_url,setCharacterAvatar:B=>ne({avatar_url:B})}),e.jsx(As,{component:pa,variant:"primary",color:"primary",name:"highlights",title:"Highlights",desc:"(Optional) Used only in your conversations to help the AI with context. Keep it short (1-2 sentences).",placeholder:"A petite and slim 22 years old girl, with lavender-long hair, silver-gray eyes, and is wearing stylish black glasses. Her skin is snow white, smooth and unblemished, like a princess.",minRows:1,maxRows:2,maxLength:ka,"aria-labelledby":"highlights",validations:[{rule:ha(ka),message:"Highlights should be less than ".concat(ka," characters")}]}),!X&&e.jsxs(e.Fragment,{children:[e.jsx(S,{y:4}),e.jsxs(_,{align:"center",className:"gap-2.5",children:[e.jsx(Ga,{variant:"primary",isSelected:u,onChange:me}),e.jsx(l,{variant:"md",type:"medium",children:"Display chatbots with explicit images or languages (NSFW)"})]}),e.jsx(S,{y:4}),e.jsxs(_,{align:"center",className:"gap-2.5",children:[e.jsx(Ga,{variant:"primary",isSelected:c,onChange:Ge}),e.jsx(l,{variant:"md",type:"medium",children:"Blur explicit images (NSFW)"})]}),e.jsx(S,{y:1}),e.jsx(Mg,{})]}),!X&&!p&&(V==null?void 0:V.length)>1&&e.jsx(Rg,{permissionsToDisplay:V}),e.jsx(S,{y:4}),!X&&e.jsx(Tg,{}),k&&e.jsx(l,{type:"success",children:k}),f&&e.jsx(l,{type:"error",children:f!=null&&f.message?f==null?void 0:f.message:f}),e.jsx(Pg,{isLoading:E,hasChangesPending:T,logoutAndGoToHome:Le,setShowDeleteConfirmationDialog:de,isLoadingDelete:P})]})}),e.jsx(Xs,{heading:"Unsaved Changes",handleClose:Be,onUserConfirmation:We,handleOnClose:Ye,confirmationMessage:"You have unsaved changes. Would you like to update your profile?",isVisible:o,actionButtonText:"Update",discardButtonText:"Discard",isLoading:j,screen:"UserProfile"}),e.jsx(Lg,{userName:v==null?void 0:v.name,isVisible:xe,onClose:()=>de(!1),isLoading:P,onConfirmation:fe,isManageSubscription:!!y,handleManageSubscription:Z()})]}):e.jsx(Se,{})},Ug=()=>e.jsx(An,{className:"border-1 border-solid border-l-0 border-r-0 border-border px-0",keepContentMounted:!0,children:e.jsxs(ft,{title:"Advanced",classNames:{trigger:"bg-transparent cursor-pointer font-semibold py-5",title:"text-[24px] tracking-tighter",indicator:"text-[20px]",content:"pt-0 overflow-hidden"},children:[e.jsx(l,{children:e.jsxs(K,{className:"text-link leading-6",to:"https://docs.spicychat.ai/advanced/openai-api-on-spicychat",target:"_blank","aria-label":"openai-help",children:["Read how to improve your experience using openAI"," ",e.jsx(xc,{className:"text-link ml-1 opacity-80"})]})}),e.jsx(S,{y:2}),e.jsx(As,{component:ms,variant:"primary",color:"primary",title:"OpenAI API Key",desc:"Your api key is securely stored.",placeholder:"Enter your OpenAI API key",maxLength:"200","aria-labelledby":"openai_api_key",name:"openai_api_key"}),e.jsx(S,{y:5}),e.jsx(Rr,{name:"openai_mode",options:[{value:Oa.DISABLED,label:"Disabled: Not using your key."},{value:Oa.ENABLED,label:"Enabled: Always using openAI."},{value:Oa.HYBRID,label:"Hybrid: OpenAI unless moderation is triggered."}],title:"OpenAI Mode",desc:"The OpenAI mode you want to use",orientation:"vertical",size:"sm","aria-labelledby":"visibility",classNames:{wrapper:"gap-[23px]"}})]})}),Fg=({subscriptionPlatform:t})=>{const{getManageSubscriptionLinks:s,showPreventSubscriptionModal:n,setShowPreventSubscriptionModal:a,checkIsSubscriptionManagable:d}=kn(),o=d(t),{status:i,role:c}=he(),u=i===ma.ACTIVE;return e.jsxs(e.Fragment,{children:[e.jsxs(_,{align:"center",gap:1,children:[e.jsx(l,{b:!0,children:"Current Plan"}),o&&e.jsxs(U,{variant:"primary_smallest",color:"transparent",onPress:s(),children:[n&&e.jsx(Ln,{onClose:()=>a(!1)}),e.jsx(l,{type:"primary",children:"Manage Subscription"})]})]}),e.jsx(S,{y:2}),e.jsx(U,{variant:"tertiary_short",color:u?"gradient_secondary":"gradient_tertiary",endContent:u?e.jsx(Br,{size:21,className:"stroke-[3px] ml-1.5"}):e.jsx(pc,{size:22,className:"ml-1.5"}),onPress:s(),children:e.jsx(l,{variant:"regular",type:"white",children:u?yd(c):"Free Tier"})}),e.jsx(S,{y:4})]})},Bg=({isLoading:t,hasChangesPending:s,logoutAndGoToHome:n,setShowDeleteConfirmationDialog:a,isLoadingDelete:d})=>e.jsxs(vn,{xs:12,sm:3,gap:2,justify:"center",className:"gap-2",children:[e.jsx(q,{children:e.jsxs(U,{type:"submit",variant:"primary_large",color:"primary_light",isDisabled:t||!s,isLoading:t,children:[e.jsx(mc,{}),"Update"]})}),e.jsx(q,{children:e.jsxs(U,{variant:"primary_large",color:"primary_light",onPress:n,children:[e.jsx(gc,{}),"Logout"]})}),e.jsx(q,{xs:12,sm:3,children:e.jsxs(U,{onPress:()=>a(!0),variant:"secondary_short",color:"danger_light",isDisabled:d,children:[e.jsx(fc,{}),"Remove Account"]})})]}),Gg=({permissionsToDisplay:t})=>e.jsxs(e.Fragment,{children:[e.jsx(S,{y:3}),e.jsx(l,{b:!0,children:"Your Benefits"}),e.jsx(K,{className:"text-[12px] ml-5 text-link",to:"https://docs.spicychat.ai/support","aria-label":"not-as-expected",children:"Not as expected?"}),e.jsx(S,{y:1}),e.jsx(_,{className:"gap-1 flex-wrap",children:t.map((s,n)=>s==="site_access"?!0:e.jsx(ct,{classNames:{base:"h-6 px-0",content:"capitalize font-bold text-xs text-white"},color:"secondary",children:s.replaceAll("_"," ")},n))}),e.jsx(S,{y:1})]}),Vg="Remove Account",Hg="we're sorry to see you go",Ii={DESCRIPTION:"Looks like you have an active subscription. Deleting an account will also cancel the subscription.",CANCEL_BUTTON_TITLE:"Manage Subscription",ACTION_BUTTON_TITLE:"Proceed"},Pi={DESCRIPTION:"Deleting your account will permanently remove your SpicyChat account from all devices and erase your data.",CANCEL_BUTTON_TITLE:"Cancel",ACTION_BUTTON_TITLE:"Remove Account"},Ri=_d+1,$g=({userName:t,isVisible:s,onClose:n,isLoading:a,onConfirmation:d,isManageSubscription:o,handleManageSubscription:i})=>{const[c,u]=r.useState(o&&i!==null),[m,j]=r.useState(void 0),[f,h]=r.useState(Ri),x="".concat(t,", ").concat(Hg),y=f<Ri&&f>0,p=()=>{a||(o&&u(!0),clearInterval(m),h(Ri),n())};r.useEffect(()=>{f<=0&&(clearInterval(m),d())},[f]);const b=async()=>{if(c)u(!1);else{h(v=>v-1);const g=setInterval(()=>{h(v=>v-1)},1e3);j(g)}};return e.jsxs(es,{title:Vg,open:s,onOpenChange:p,dismissable:!a,children:[e.jsx("div",{className:"text-center",children:x}),e.jsx("div",{className:"text-center",children:c?Ii.DESCRIPTION:Pi.DESCRIPTION}),e.jsxs(_,{className:"gap-2",children:[e.jsx(U,{variant:"primary_large_bordered",color:"transparent",isDisabled:a,onPress:c?i:p,children:c?Ii.CANCEL_BUTTON_TITLE:Pi.CANCEL_BUTTON_TITLE}),e.jsxs(U,{variant:"primary_large",color:"error_light",isLoading:a,onPress:b,isDisabled:a||y,children:[c?Ii.ACTION_BUTTON_TITLE:Pi.ACTION_BUTTON_TITLE," ",y?"(".concat(f,")"):""]})]})]})},uu="EN",hu="Default",yo=[{code:uu,name:hu},{code:"ZH",name:"Chinese"},{code:"DE",name:"German"},{code:"ES",name:"Spanish"},{code:"FR",name:"French"},{code:"IT",name:"Italian"},{code:"JA",name:"Japanese"},{code:"KO",name:"Korean"},{code:"PT",name:"Portuguese"},{code:"RU",name:"Russian"}],zg=()=>{var o;const[t,s]=r.useState(uu);r.useEffect(()=>{const i=Q.getItem(Or);i&&s(i)},[]);const n=async i=>{s(i),Q.setItem(Or,i)},a=((o=yo.find(i=>i.code===t))==null?void 0:o.name)||hu;return jc(vd.CHARACTER_TRANSLATION_TESTING)?e.jsxs("div",{className:"w-full pt-4",children:[e.jsx(_,{align:"center",className:"gap-1",children:e.jsx(l,{variant:"md",type:"medium",children:"Preferred Chat Language"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"px-2 py-0.5 rounded-full text-xs bg-purple-100 text-purple-700 font-medium",children:"Beta Testing"}),e.jsx("div",{className:"max-w-xs flex-1",children:e.jsxs(Zt,{children:[e.jsx(ea,{children:e.jsx(Ls,{variant:"bordered",className:"justify-between",endContent:e.jsx(Tn,{className:"text-small"}),children:a})}),e.jsx(sa,{"aria-label":"Select language",variant:"flat",selectionMode:"single",selectedKeys:t?new Set([t]):new Set,onSelectionChange:i=>{const c=Array.from(i)[0];c&&n(c)},children:yo.map(i=>e.jsx(Et,{value:i.code,children:i.name},i.code))})]})})]}),e.jsx(l,{variant:"sm",className:"text-gray-800",children:"Translate character and guide the AI to respond in the selected language. This setting will lead up to 30s page load time for first time character translation."})]}):null},Wg=()=>{var ze;const t=Ds().pathname,s=aa(t),{logEvent:n}=bt(),{onUserSetBlurNSFW:a,onUserSetShowNSFW:d,showUnsavedProfileChangesWarning:o,setToShowUnsavedProfileChangesWarning:i,blurNSFW:c,showNSFW:u}=fs(),{onUserUpdateProfile:m,isLoading:j,error:f}=he(),h=Ha(),{platform:x,role:y,resetProfile:p,setIsUserProfileModified:b,userProfile:g,isProfileModified:v,userId:T}=he(),{logout:w,permissions:I}=Qe(),{jsonApiService:A,callApi:D}=Ee(),{callApi:O,isLoading:P}=Ee(),E=j||P,[N,R]=r.useState(!1),[k,G]=r.useState(null),[F,H]=r.useState(!1),[V,z]=r.useState([]),{setFieldsValues:ne,invalidateFields:J}=h,[$]=Gr((ze=h.values)==null?void 0:ze.username,500),[xe,de]=r.useState(!1),W=Je(),ge=Zs(),X=JSON.parse(Q.getItem(Is))||!1,ae=Q.getItem(Wr)==="true",{logoutDomain:Pe=Cd}=vs(),Ce=Ks(B=>{var ce;return(ce=B==null?void 0:B.navigation)==null?void 0:ce.path})||"",ve=r.useMemo(()=>{var B,ce,Ne,je;return{username:(B=g==null?void 0:g.username)==null?void 0:B.toLowerCase(),name:g==null?void 0:g.name,avatar_url:(ce=g==null?void 0:g.avatar_url)!=null?ce:null,openai_api_key:(Ne=g==null?void 0:g.openai_api_key)!=null?Ne:"",openai_mode:(je=g==null?void 0:g.openai_mode)!=null?je:null,highlights:(g==null?void 0:g.highlights)||""}},[g]),{getManageSubscriptionLinks:Z}=kn(),me=async()=>{await d(!u),ae&&u&&n(Ss.SWITCH_NSFW,{user_id:T,enable_nsfw:!1,page_name:s})},Ge=async()=>{await a(!c)};r.useEffect(()=>()=>b(!1),[ge]),r.useEffect(()=>{const B=async ce=>{try{await D(A.checkUsername,ce).then(({isAvailable:Ne})=>{var je;!Ne&&ce!==((je=g==null?void 0:g.username)==null?void 0:je.toLowerCase())&&J({username:"Username is not available"}),H(Ne),R(!1)})}catch(Ne){console.log(Ne)}};(g==null?void 0:g.username)!==$&&Dt($)&&$&&$.length>=3&&(R(!0),B($))},[$,D,A.checkUsername,J,g==null?void 0:g.username]),r.useEffect(()=>{if(I){const B=[];I==null||I.map(ce=>{Sd.includes(ce)||B.push(ce)}),z(B)}},[I]);const Y=r.useMemo(()=>{var ce;if(!h.values.username)return{text:"",color:""};if(h.values.username.length<4)return{text:"Username is invalid",color:"error"};const B=Dt(h.values.username);return B?N?{text:"Checking...",color:"info",icon:e.jsx(Se,{size:"sm"})}:F&&h.isValid?{text:"Available",color:"",icon:e.jsx(Vr,{className:"text-green-600",width:44,height:24})}:!F&&h.values.username!==((ce=g==null?void 0:g.username)==null?void 0:ce.toLowerCase())?{text:"Not Available",color:"",icon:e.jsx(nl,{color:"#9f1942",width:44,height:24})}:{}:{text:B?"Valid":"Username is invalid",color:B?"success":"error"}},[h.values.username,N,F,g==null?void 0:g.username]),fe=async()=>{let B=await O(A.deleteResource,"users");B&&(p(B),await Le())},Le=async()=>{await w(),bc.clear();try{await il.logout()}catch(B){console.error("error while logging user out from notification provider",B)}Pe&&X?window.open("https://".concat(Pe),"_self"):W("/")},Fe=async()=>{var Ne;const B=h.values;let ce={username:B==null?void 0:B.username,name:B==null?void 0:B.name,highlights:B==null?void 0:B.highlights,openai_api_key:B==null?void 0:B.openai_api_key,openai_mode:B==null?void 0:B.openai_mode};(Ne=h==null?void 0:h.values)!=null&&Ne.avatar_url&&(ce.avatar_url=B==null?void 0:B.avatar_url);try{await m(ce),b(!1),Ce!==""&&W(Ce),ge(La("")),G("Profile saved successfully."),setTimeout(()=>G(null),3e3)}catch(je){console.log(je.message),Ye()}};r.useEffect(()=>{const ce=["name","username","avatar_url","openai_api_key","openai_mode","highlights"].some(Ne=>h.values[Ne]!==void 0&&h.values[Ne]!==ve[Ne]);b(!!ce)},[h,ve,ge]);const We=()=>{Fe()},Be=()=>{i(!1),W(Ce)},Ye=()=>{i(!1)},Ke=[{rule:Ys(),message:"Username can't be empty"},{rule:Ba(3),message:"Username is too short"},{rule:ha(20),message:"Username should be less then 20 characters "},{rule:B=>Dt(B),message:"Username contain invalid characters"}];return r.useEffect(()=>{const B=()=>{v?(i(!0),window.history.pushState(null,"",window.location.href),ge(La("/"))):(ge(La("")),W("/"))};return window.history.pushState(null,"",window.location.href),window.addEventListener("popstate",B),()=>{window.removeEventListener("popstate",B)}},[v]),g?e.jsxs("div",{className:"max-w-[700px] mx-auto",children:[e.jsx(l,{variant:"xxl",children:"Profile Settings"}),e.jsx(S,{y:3}),e.jsx($a,{onValidSubmit:Fe,connect:h,initialValues:ve,enableReinitialize:!0,children:e.jsxs("form",{onSubmit:h.submit,children:[e.jsx(As,{component:ms,variant:"primary_small",color:"primary",name:"username",title:"Username",desc:"You can change this at any time.",spacer:5,maxLength:"20",endContent:Y.icon,"aria-labelledby":"username",toLowerCase:!0,validations:Ke}),e.jsx(As,{component:ms,variant:"primary_small",color:"primary",title:"Name",desc:"The name you'll use for chatting",spacer:5,maxLength:"20","aria-labelledby":"name",name:"name",validations:[{rule:Ys(),message:"Name can't be empty"}]}),X&&y===Xt.PREMIUM&&e.jsxs(e.Fragment,{children:[e.jsx(_,{align:"center",gap:1,children:e.jsx(l,{b:!0,children:"Current Plan"})}),e.jsx(S,{y:2}),e.jsx(U,{variant:"tertiary_short",color:"gradient_secondary",endContent:e.jsx(Br,{size:21,className:"stroke-[3px] ml-1.5"}),children:e.jsx(l,{variant:"regular",type:"white",children:"Premium"})}),e.jsx(S,{y:4})]}),!X&&e.jsx(Fg,{subscriptionPlatform:x}),e.jsx(As,{component:Nd,name:"avatar_url",title:"Avatar",desc:"You can either create an image from text or upload an image.",characterAvatar:h.values.avatar_url,setCharacterAvatar:B=>ne({avatar_url:B})}),e.jsx(As,{component:pa,variant:"primary",color:"primary",name:"highlights",title:"Highlights",desc:"(Optional) Used only in your conversations to help the AI with context. Keep it short (1-2 sentences).",placeholder:"A petite and slim 22 years old girl, with lavender-long hair, silver-gray eyes, and is wearing stylish black glasses. Her skin is snow white, smooth and unblemished, like a princess.",minRows:1,maxRows:2,maxLength:ka,"aria-labelledby":"highlights",validations:[{rule:ha(ka),message:"Highlights should be less than ".concat(ka," characters")}]}),!X&&e.jsxs(e.Fragment,{children:[e.jsx(S,{y:4}),e.jsxs(_,{align:"center",className:"gap-2.5",children:[e.jsx(Ga,{variant:"primary",isSelected:u,onChange:me}),e.jsx(l,{variant:"md",type:"medium",children:"Display chatbots with explicit images or languages (NSFW)"})]}),e.jsx(S,{y:4}),e.jsxs(_,{align:"center",className:"gap-2.5",children:[e.jsx(Ga,{variant:"primary",isSelected:c,onChange:Ge}),e.jsx(l,{variant:"md",type:"medium",children:"Blur explicit images (NSFW)"})]}),e.jsx(S,{y:1}),e.jsx(zg,{})]}),!X&&!y&&(V==null?void 0:V.length)>1&&e.jsx(Gg,{permissionsToDisplay:V}),e.jsx(S,{y:4}),!X&&e.jsx(Ug,{}),k&&e.jsx(l,{type:"success",children:k}),f&&e.jsx(l,{type:"error",children:f!=null&&f.message?f==null?void 0:f.message:f}),e.jsx(Bg,{isLoading:E,hasChangesPending:v,logoutAndGoToHome:Le,setShowDeleteConfirmationDialog:de,isLoadingDelete:P})]})}),e.jsx(Xs,{heading:"Unsaved Changes",handleClose:Be,onUserConfirmation:We,handleOnClose:Ye,confirmationMessage:"You have unsaved changes. Would you like to update your profile?",isVisible:o,actionButtonText:"Update",discardButtonText:"Discard",isLoading:j,screen:"UserProfile"}),e.jsx($g,{userName:g==null?void 0:g.name,isVisible:xe,onClose:()=>de(!1),isLoading:P,onConfirmation:fe,isManageSubscription:!!x,handleManageSubscription:Z()})]}):e.jsx(Se,{})};function _o(){const{hasAccessToV2:t}=Ft();return t?e.jsx(Wg,{}):e.jsx(Dg,{})}function Yg(){const t=Je(),{onlyUserId:s}=he(),[n,a]=r.useState(null),{jsonApiService:d,callApi:o,isLoading:i}=Ee(),c=JSON.parse(Q.getItem(Ut)||"{}"),u=Object.values(c);r.useEffect(()=>{if(s){let j=u.filter(f=>{var h;return((h=f==null?void 0:f.moderationReport)==null?void 0:h.moderation_status)===Ms.FixRequired});if(!(j!=null&&j.length))a(c);else{async function f(){const h=await o(d.fetchResource,"users/characters?switch=T1",null,{},jt);let x=h==null?void 0:h.data;if(x==null){a(c);return}let y=ll(j,x,c);a(y)}f()}}},[s]);const m=j=>{let f={...n};delete f[j],a(f),Q.setItem(Ut,JSON.stringify(f)),Object.keys(f).length===0&&t(_p)};return i||!n?e.jsx(Se,{}):e.jsxs(e.Fragment,{children:[n&&e.jsx(Gt,{}),e.jsx(Ue,{index:"DraftsPage"}),n&&e.jsx(is,{variant:Ts.HEADING_5_MEDIUM,children:"Your Drafts"}),e.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(160px,1fr))] gap-3 mt-lg",children:Object.values(n).map((j,f)=>{var y;const h=(j==null?void 0:j.character_id)||(j==null?void 0:j.id),x=(y=j==null?void 0:j.moderationReport)==null?void 0:y.moderation_status;return e.jsx(Di,{variant:x?it.DRAFT_ACTION_REQUIRED:it.DRAFT,characterInfo:{characterId:h,characterName:j==null?void 0:j.name,characterCreatorUserName:j==null?void 0:j.creator_username,characterTitle:j==null?void 0:j.title,characterMessageNumber:"-",characterTokensCount:"-",characterAvatarUrl:gs(j==null?void 0:j.avatar_url,{preset:"avatar256x256"}),creatorPagePath:"/creator/".concat(j==null?void 0:j.creator_username),chatPagePath:"/chatbot/".concat(x?"edit":"create","/").concat(h)},characterCardActionsState:{[_r.FAVORITE]:{isHidden:!0},[_r.INFO]:{isHidden:!0}},dropdownMenuActions:[{icon:oe.TRASH,label:"Delete",onPress:()=>m(h),className:"text-red-9"}]},f)})})]})}const Kg=()=>{const{name:t,avatar_url:s}=he(),{branding:n,applicationName:a}=vs(),{theme:d,setTheme:o}=wn(),[i,c]=r.useState(!1),u=b=>{let g=b.target.checked?"dark":"light";o(g)},{isMobile:m}=Ie(),{isAuthenticated:j,isLoading:f,permissions:h}=Qe(),[x,y]=r.useState(n==null?void 0:n.logo),p=()=>c(!1);return r.useEffect(()=>{y(m?d==="dark"?n==null?void 0:n.logoMobileLight:n==null?void 0:n.logoMobileDark:d==="dark"?n==null?void 0:n.logoDesktopLight:n==null?void 0:n.logoDesktopDark)},[m,n,d]),!a||!n?null:e.jsxs(wh,{isMenuOpen:i,onMenuOpenChange:c,position:i?"sticky":"static",disableAnimation:!0,isBordered:!0,className:"partner-navbar navbar mx-auto bg-white dark:bg-black top-0 z-[1000] h-[53.19px] shadow-medium dark:shadow-none",children:[e.jsx(Eh,{children:e.jsxs(K,{color:"foreground",to:"/","aria-label":a,children:[e.jsx(te,{src:x,alt:"",width:x?m?200:320:0,className:"object-cover cursor-pointer"}),!m&&n.displayApplicationName&&e.jsx(l,{variant:"lg",b:!0,children:a})]})}),e.jsx(oi,{className:"max-md:hidden",children:ql.map(b=>{if(bi(h,b.requiredPermissions)){if(b.type===yi.dropdown)return e.jsxs(Zt,{className:"header-dropdown w-[250px]",children:[e.jsx(ea,{children:e.jsxs(ci,{className:"cursor-pointer flex items-center px-[20px]",children:[b.label,e.jsx(Tn,{size:14,className:"ml-1"})]},b.path)}),e.jsx(sa,{children:b.entries.map(g=>{if(bi(h,g.requiredPermissions))return e.jsx(Et,{children:e.jsx(K,{className:"cursor-pointer",color:"foreground",to:g.path,"aria-label":g.label,children:g.label},g.path)},g.path)})})]},b.path);if(b.type===yi.entry)return e.jsx(K,{className:"whitespace-nowrap cursor-pointer",color:"foreground",to:b.path||b.externalLink,"aria-label":b.label,children:b.label},b.path||b.externalLink)}return null})}),e.jsxs(Ah,{className:le.navbar.menu.base,children:[ql.map(b=>{let g=[b];return b.type===yi.dropdown&&(g=b.entries),g.map(v=>{if(bi(h,v.requiredPermissions))return e.jsx(di,{className:le.navbar.menu.item,onClick:p,children:e.jsx(K,{className:le.navbar.menu.link,color:"foreground",to:v.path,"aria-label":v.label,children:v.label},v.path||v.externalLink)})})}),j&&e.jsx(di,{className:le.navbar.menu.item,children:e.jsx(K,{className:le.navbar.menu.link,color:"foreground",to:Ae.profile,"aria-label":"profile",children:"Profile"})}),e.jsx(di,{className:le.navbar.menu.item,children:e.jsx(Ga,{variant:"primary",defaultSelected:d=="dark",onChange:b=>u(b)})})]}),e.jsx(oi,{className:"pl-0 gap-0 ml-[5rem]",justify:"center",children:e.jsxs(_,{justify:"end",children:[!f&&e.jsx(e.Fragment,{children:j&&e.jsx(e.Fragment,{children:e.jsx(ci,{className:"max-sm:hidden sm:flex items-center ",children:e.jsx(K,{className:"cursor-pointer",color:"foreground",to:Ae.profile,"aria-label":"profile",children:t&&e.jsx(Bt,{className:"bg-gray-200",radius:"md",name:t,size:"md",src:s?gs(s,{preset:"avatar48x48"}):null})})})})}),e.jsx(ci,{className:"max-md:hidden ml-4 grid place-items-center",children:e.jsx(Ga,{variant:"primary",defaultSelected:d=="dark",onChange:b=>u(b)})})]})}),e.jsx(oi,{className:"md:hidden max-w-max pl-0",children:e.jsx(Th,{"aria-label":"toggle navigation",className:"bg-transparent border-none cursor-pointer"})})]})};var xu={VITE_JWT_PUBLIC_KEY:'{"kty": "EC","use": "sig","crv": "P-256","kid": "Jk9-7PRufldHDqGVwFbu71uEAm5X6s6RyQExBtXcN94","x": "W1Ni94n0MWQVmHaYZID2o2riGA0v4aCqRfm6ubyagDE","y": "7i6ViNaVnSr9swyGbCsnE787MeSo6i4B1R22MvONdPg","alg": "ES256"}',VITE_QUEUE_RETRY_TIME_SECONDS:"30000"};const qg=JSON.parse(xu.VITE_JWT_PUBLIC_KEY),Jg=parseInt(xu.VITE_QUEUE_RETRY_TIME_SECONDS),Qg=()=>{const{jsonApiService:t,callApi:s}=Ee(),n=Zs(),{applicationId:a}=vs(),{status:d,bypass:o}=Ks(f=>f==null?void 0:f.waitingQueue)||{},{characterId:i}=Ps(),[c]=xa(),u=c.get("bypass"),{status:m}=he(),j=m===Ih.ACTIVE;return r.useEffect(()=>{const f=async()=>{s(t.fetchResource,"queue").then(h=>{n(oa(h)),h!=null&&h.retry_after&&setTimeout(f,h==null?void 0:h.retry_after)}).catch(()=>{if(j){n(oa({status:mn.ACCESS}));return}n(oa({status:mn.WAITING})),setTimeout(f,Jg)})};a&&f()},[s,t.fetchResource,n,a,j]),r.useEffect(()=>{u&&(async()=>{const h=await vp(u,qg);(h==null?void 0:h.id)===i&&n(_i(h==null?void 0:h.id))})(),i==="65278037-0b5b-4547-bea3-582618f3e6fa"&&n(_i(i)),o&&i&&o!==i&&n(_i(null))},[i,n,u,o]),r.useEffect(()=>{let f;return d==="access"&&(f=setTimeout(()=>n(oa({status:"expired"})),20*60*1e3)),()=>{clearTimeout(f)}},[d,n]),r.useEffect(()=>{const f=async()=>{s(t.fetchResource,"queue").then(h=>{n(oa(h)),h!=null&&h.retry_after&&setTimeout(f,h.retry_after)}).catch(()=>{if(j){n(oa({status:mn.ACCESS}));return}n(oa({status:"waiting"}))})};d==="refresh"&&f()},[s,t.fetchResource,n,d]),null};function Xg(){var g;const t=Ds().pathname,{userId:s}=he(),n=aa(t),{logEvent:a}=bt(),{isDesktop:d,isMobile:o,isTablet:i}=Ie(),{isDark:c}=wd(),{branding:u}=vs(),{customerSupportUrl:m,refundPolicyUrl:j,privacyPolicyUrl:f,tcUrl:h}=u||{},x=v=>{a(Ss.SOCIAL_MEDIA_CLICK,{user_id:s,social_media:v,page_name:n})},y={logo:e.jsx(Td,{}),address:{title:"Owned & operated by:",addresses:Ep},apps:[{logo:c?Np:Cp,to:Ae.download},{logo:c?Sp:wp,to:Ae.download}],resources:{title:"Resources",links:[{label:"Terms & Conditions",to:h||""},{label:"Privacy Policy",to:f||""},{label:"Refund Policy",to:j||""},{label:"Support",to:m||"",target:"_blank"}]},community:{title:"Community",links:[{label:"Community Guidelines",to:Jl.guidelines,target:"_blank"},{label:"Become an Affiliate",to:Jl.affiliates},{label:"Report Content",to:Ae.report}]},socials:{title:"Join Us",links:[{icon:e.jsx(Ph,{size:"16px"}),label:"Discord",to:cl,target:"_blank",onClick:()=>x(vi.Discord)},{icon:e.jsx(Rh,{size:"16px"}),label:"Twitter",to:Ed,target:"_blank",onClick:()=>x(vi.X)},{icon:e.jsx(Oh,{size:"16px"}),label:"Reddit",to:Ad,target:"_blank",onClick:()=>x(vi.Reddit)}]},compliance:{label:"18 U.S.C. 2257 Record-Keeping Requirements Compliance Statement",to:Ae.compliance}};function p(){return y.socials?e.jsxs("div",{className:ws("flex flex-col gap-1.5 flex-grow",!d&&"mt-1"),children:[d&&e.jsx("span",{className:"text-sm font-medium text-[#0F0F0F] dark:text-[#F2F2F2]",children:y.socials.title}),e.jsx("div",{className:ws("flex flex-col gap-1.5",!d&&"flex-row gap-2.5"),children:y.socials.links.map((v,T)=>{const{label:w,icon:I,...A}=v;return e.jsx(K,{...A,children:e.jsxs("div",{className:"flex flex-row gap-1.5 items-center",children:[I,d&&e.jsx("span",{className:"text-xs text-[#646464] dark:text-[#AAAAAA]",children:w})]})},T)})})]}):null}function b(){return y.address?e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{className:"text-[10px] font-medium text-[#0F0F0F] dark:text-[#F2F2F2]",children:y.address.title}),y.address.addresses.map((v,T)=>e.jsx("span",{className:"text-[10px] text-[#B5B5B6] dark:text-[#737476]",children:v},T))]}):null}return e.jsxs(e.Fragment,{children:[e.jsx(_n,{placement:gn.Bottom,className:"px-4 mt-1 max-mob:px-2.5",isVisibleOnPartner:!1}),e.jsxs("div",{className:ws("flex flex-col px-4 py-6 gap-1.5",i&&"px-3",o&&"px-2"),children:[e.jsxs("div",{className:ws("flex flex-row gap-5 flex-grow",o&&"flex-col"),children:[e.jsxs("div",{className:"flex flex-col gap-5 flex-grow flex-shrink",children:[y.logo,!o&&e.jsx(b,{})]}),e.jsxs("div",{className:"flex flex-row gap-2.5 flex-grow max-w-[557px]",children:[(y.resources||!d&&y.socials)&&e.jsxs("div",{className:"flex flex-col gap-0.5 flex-grow",children:[e.jsx("span",{className:"text-sm font-medium text-[#0F0F0F] dark:text-[#F2F2F2]",children:y.resources.title}),y.resources.links.map((v,T)=>{const{label:w,...I}=v;return e.jsx(K,{...I,children:e.jsx("span",{className:"text-xs text-[#646464] dark:text-[#AAAAAA]",children:w})},T)}),e.jsx("div",{className:"mt-2.5"}),!d&&e.jsx(p,{})]}),y.community&&e.jsxs("div",{className:"flex flex-col gap-0.5 flex-grow",children:[e.jsx("span",{className:"text-sm font-medium text-[#0F0F0F] dark:text-[#F2F2F2]",children:y.community.title}),y.community.links.map((v,T)=>{const{label:w,...I}=v;return e.jsx(K,{...I,children:e.jsx("span",{className:"text-xs text-[#646464] dark:text-[#AAAAAA]",children:w})},T)})]}),d&&e.jsx(p,{})]})]}),y.apps&&e.jsx("div",{className:"flex flex-row gap-2.5 py-[18px]",children:y.apps.map((v,T)=>{const{logo:w,...I}=v;return e.jsx(K,{...I,children:e.jsx(Ur,{className:"ring-1 rounded-md ring-[#CCCCCC] dark:ring-[#474747]",src:w,width:95,height:30})},T)})}),e.jsx("div",{className:"h-[1px] bg-[#CCCCCC] dark:bg-[#474747] w-full"}),e.jsxs("div",{className:ws("flex flex-row gap-2.5 justify-between items-center",o&&"flex-col items-start"),children:[o&&e.jsx(b,{}),e.jsx(K,{to:(g=y.compliance)==null?void 0:g.to,children:e.jsx("span",{className:"text-[#0072F5] text-[10px]",children:y.compliance.label})})]})]})]})}const cr=({label:t,url:s})=>e.jsx(e.Fragment,{children:e.jsx(K,{className:"ml-[10px] no-underline text-link text-[16px] gap-[20px]",to:s,"aria-label":t,children:t})}),pu=()=>{const{branding:t}=vs(),{isMobile:s}=Ie();return t?e.jsxs(_s,{justify:"center",align:"center",className:"mt-[20px] px-6",children:[e.jsxs(_,{justify:"center",children:[t.customerSupportUrl&&e.jsx(cr,{label:"Customer Support",url:t.customerSupportUrl,isMobile:s}),t.tcUrl&&e.jsx(cr,{label:"Terms & Conditions",url:t.tcUrl,isMobile:s}),t.privacyPolicyUrl&&e.jsx(cr,{label:"Privacy Policy",url:t.privacyPolicyUrl,isMobile:s}),t.refundPolicyUrl&&e.jsx(cr,{label:"Refund Policy",url:t.refundPolicyUrl,isMobile:s})]}),e.jsx(_,{justify:"center",className:"id-parent text-center",children:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"id w-full whitespace-nowrap",dangerouslySetInnerHTML:{__html:t==null?void 0:t.footerBottomLineHtml}}),e.jsxs("style",{children:["\n            .id {\n              width: calc(100% + 100px);\n              line-height: 28px;\n              letter-spacing: -0.8px;\n            }\n            .id a{\n              color:#0072F5;\n              text-decoration: none;\n            }\n            .dark .id a{\n              color: #3694FF\n            }\n            @media screen and (max-width: 1900px){\n              .id{\n                white-space: pre-wrap;\n              }\n            }\n          "," "]})]})})]}):null};pu.propTypes={footerConfig:L.object};const Zg="/Assets/lines.svg",dr=({value:t,label:s})=>{const n=r.useRef(null),a=n.current,[d,o]=r.useState(t);r.useEffect(()=>{if(a){const c=a.querySelector(".top"),u=a.querySelector(".bottom");c.innerText=t,u.innerText=t}},[a]),r.useEffect(()=>{t!==d&&(i(t),o(t))},[t,d]);const i=c=>{const u=a.querySelector(".top"),m=a.querySelector(".bottom"),j=parseInt(u.innerText),f=c;if(f!==j){u.innerText=j,m.innerText=j;const h=document.createElement("div");h.classList.add("top-flip");const x=document.createElement("div");x.classList.add("bottom-flip"),h.innerText=j,x.innerText=f,h.addEventListener("animationstart",()=>{u.innerText=f}),h.addEventListener("animationend",()=>{h.remove()}),x.addEventListener("animationend",()=>{m.innerText=f,x.remove()}),a.append(h,x)}};return e.jsxs(C,{gap:.2,children:[e.jsxs("div",{className:"flip-card bg-white text-[48px] rounded-md *:rounded-md inline-flex flex-col relative w-[58px] *:justify-center *:h-6 *:leading-[1] *:overflow-hidden *:font-['Share_Tech']",ref:n,children:[e.jsx("div",{className:"top",children:"0"}),e.jsx("div",{className:"bottom",children:"0"}),e.jsx("img",{src:Zg,alt:"countdown divider",className:"absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 z-10 !h-2"})]}),e.jsx(l,{variant:"smallest",type:"font-['Share_Tech'] white",children:s})]})};function ef(){const[t,s]=r.useState(kr(Lr)),{isMobile:n}=Ie();r.useEffect(()=>{const c=setInterval(()=>{s(kr(Lr))},1e3);return()=>clearInterval(c)},[]);const{days:a,hours:d,minutes:o,seconds:i}=t;return e.jsxs(C,{className:"text-center w-min gap-2 relative z-10",children:[e.jsx(l,{variant:n?"sm":"md",type:"font-['Share_Tech'] white",children:"TIME REMAINING"}),e.jsxs(_,{className:"gap-1 items-center",children:[e.jsx(dr,{value:a,label:"DAYS"}),e.jsx("span",{className:"text-xl font-bold mb-[20px] text-white",children:":"}),e.jsx(dr,{value:d,label:"HOURS"}),e.jsx("span",{className:"text-xl font-bold mb-[20px] text-white",children:":"}),e.jsx(dr,{value:o,label:"MINUTES"}),e.jsx("span",{className:"text-xl font-bold mb-[20px] text-white",children:":"}),e.jsx(dr,{value:i,label:"SECONDS"})]})]})}const sf="/Assets/birthdayBannerBg.svg",tf="/Assets/birthdayBannerMobileBg.svg",af="/Assets/birthdayYear.svg",vo="/Assets/giftBox.svg",nf="/Assets/celebrate.png",ur="/Assets/star.svg",rf="/Assets/ring.svg";function lf(){const{isMobile:t}=Ie();return e.jsxs(_,{className:"relative overflow-hidden my-2 z-[1] "+(t?"rounded-md":"rounded-bl-full rounded-tr-full h-[120px]"),children:[e.jsx(te,{removeWrapper:!0,src:t?tf:sf,radius:"none",className:"object-cover absolute h-full -z-10 opacity-100 "+(t?"w-full":void 0)}),!t&&e.jsx(te,{removeWrapper:!0,src:nf,radius:"none",className:"absolute z-10 right-8 bottom-0 h-[99px] opacity-100"}),e.jsxs(_,{className:"whitespace-nowrap justify-between relative z-10 "+(t?"flex-col py-2 pl-4 grow":"w-[1280px] max-w-full pr-12 mx-auto items-center max-xl:pl-12"),children:[e.jsxs(_,{className:t?"flex-row-reverse":void 0,children:[e.jsx(q,{className:"relative h-full w-full",children:e.jsx(te,{removeWrapper:!0,src:af,radius:"none",className:"opacity-100 "+(t?"absolute right-0 max-w-[250px] w-full max-[400px]:w-[calc(100%+20px)]":"relative top-1.5")})}),e.jsxs(C,{className:"z-10 relative "+(t?"w-min mr-auto":void 0),children:[!t&&e.jsxs(e.Fragment,{children:[e.jsx(te,{removeWrapper:!0,src:vo,radius:"none",className:"rotate-[45deg] size-4 absolute bottom-8 left-14 opacity-100 z-0"}),e.jsx(te,{removeWrapper:!0,src:ur,radius:"none",className:"rotate-[45deg] size-2 absolute top-6 -left-6 opacity-100"}),e.jsx(te,{removeWrapper:!0,src:ur,radius:"none",className:"rotate-[45deg] size-2 absolute top-8 -right-1/2 z-0 opacity-100"}),e.jsx(te,{removeWrapper:!0,src:ur,radius:"none",className:"rotate-[45deg] size-2 absolute bottom-12 -right-[15%] z-0 opacity-100"}),e.jsx(te,{removeWrapper:!0,src:rf,radius:"none",className:"size-3 absolute top-6 -right-[30%] z-0 opacity-100"}),e.jsx(te,{removeWrapper:!0,src:vo,radius:"none",className:"absolute right-16 top-6 opacity-100 z-[-1]"})]}),e.jsx(q,{className:t?"*:text-[48px]":"*:text-[84px]",children:e.jsx(l,{type:"font-['Roboto'] white",children:"Birthday Sale"})}),e.jsx(q,{className:"relative justify-end "+(t?"bottom-4 ml-[6.5rem] mr-4":"ml-48 max-lg:ml-0 bottom-6"),children:e.jsx(l,{type:"font-['Share_Tech'] white",variant:t?"sm":"xxl",children:"Subscribe for just $0.99!"})})]})]}),e.jsx(ef,{}),t&&e.jsx(S,{y:3}),e.jsxs(_,{className:"relative justify-center",children:[e.jsx(q,{className:"border-[1px] border-solid border-white rounded-full "+(t?"*:px-4":"*:px-8"),children:e.jsx(U,{as:K,variant:t?"tertiary_small_short":"primary",color:"gradient_primary",radius:"full",to:"/sale",children:e.jsx(l,{variant:t?"smallest":"lg",type:"font-['Share_Tech'] white",children:"Learn More"})})}),!t&&e.jsx(te,{removeWrapper:!0,src:ur,radius:"none",className:"rotate-[45deg] size-2 absolute -bottom-6 right-24 z-0 opacity-100"})]})]})]})}const of="/Assets/celebrateLogo.png";function cf(t){const{setIsBirthdayHeaderVisible:s}=t,{isMobile:n}=Ie(),a=Ks(o=>{var i;return(i=o==null?void 0:o.notification)==null?void 0:i.salesBannerDisabled}),d=()=>{s(!1),localStorage.setItem(Id,"true")};return a?e.jsx(e.Fragment,{}):e.jsxs("p",{className:"text-center bg-colorUnderReview bg-opacity-50 py-2 w-full  z-10 relative "+(n?"pl-6 pr-8":"px-4"),children:[e.jsxs(l,{variant:n?"sm":"lg",type:"medium",children:["Celebrate our Birthday:"," "]}),e.jsxs(l,{variant:n?"sm":"lg",children:[e.jsx(K,{to:Ae.sale,"aria-label":"birthday-sale",children:e.jsx("u",{className:"cursor-pointer",children:"Exclusive offers, contests, and more!"})})," ",e.jsx("img",{src:of,alt:"birthday banner",className:"relative top-0.5 "+(n?"size-4":"size-5")})]}),e.jsx(Da,{className:"absolute top-1/2 -translate-y-1/2 cursor-pointer "+(n?"right-2":"right-4"),size:n?18:24,onClick:d})]})}const df=function(){const{email:s,username:n,userId:a,role:d,platform:o}=he();return r.useEffect(()=>{window.LogRocket&&window.LogRocket.identify&&window.LogRocket.identify(a,{email:s,username:n,tier:d})},[s,a,n,d]),a?e.jsx(kh,{widget:"https://announcekit.co/widgets/v2/1j9lRe",user:{id:a,name:n,email:s},data:{userType:d,platform:"browser",subscriptionPlatform:o},floatWidget:!1,widgetStyle:{fontSize:"16px",marginTop:"0px",right:0,position:"absolute"},children:e.jsx(Cs,{icon:oe.BELL,size:as.MEDIUM,shape:fn.SQUARE,variant:$e.TEXT,"aria-label":"notifications"})}):null};function uf(){const t=Zs(),{isDesktop:s,isMobile:n,isTablet:a}=Ie(),{isAuthenticated:d}=Qe(),{isDark:o,setTheme:i}=wd(),{name:c,avatar_url:u,isProfileModified:m}=he(),{isSideNavOpen:j,checkRoute:f,handleSideNavToggle:h}=Ap(),{pathname:x}=Ds(),y=()=>{i(o?"light":"dark")},p=()=>{t(Yr(!0))},b=T=>Ip.some(w=>new RegExp(w).test(T)),g=()=>{h(!j)},v=(n||a)&&b(x);return e.jsxs("div",{className:"py-2.5 px-[18px] flex items-center bg-white dark:bg-gradient-to-b from-blue-1 to-black gap-2.5 max-mob:p-2.5 sticky top-0 z-[100] ".concat(v?"hidden":""),style:{height:Tp},children:[(!j||!s)&&e.jsxs("div",{className:"flex items-center",children:[!s&&e.jsx(Cs,{icon:oe.MENU,size:as.MEDIUM,onClick:g,variant:$e.TEXT,"aria-label":"menu"}),e.jsx(K,{onClick:T=>f(T,"/"),to:m?"#":"/","aria-label":"home",children:e.jsx(Td,{})})]}),e.jsxs("div",{className:"flex items-center gap-2.5 ml-auto",children:[d&&e.jsx(df,{}),e.jsx(Cs,{icon:o?oe.MOON:oe.SUN,size:as.MEDIUM,shape:fn.SQUARE,onClick:y,variant:$e.TEXT,"aria-label":"theme"}),d?e.jsx(K,{className:"flex items-center",onClick:T=>f(T,Ae.profile),to:m?"#":Ae.profile,"aria-label":"avatar",children:u?e.jsx(Lh,{src:gs(u,{preset:"avatar48x48"}),name:c==null?void 0:c[0],classNames:{base:"bg-purple-9",name:"!text-heading-6 capitalize"}}):e.jsx("div",{className:"size-9 rounded-full bg-purple-9 grid place-items-center capitalize",children:e.jsx(is,{variant:Ts.HEADING_6_REGULAR,className:"text-white",children:c==null?void 0:c[0]})})}):n?e.jsx(Cs,{className:"!bg-black dark:!bg-white !text-primary-background !border-0",icon:oe.LOGIN,shape:fn.SQUARE,variant:$e.TRANSPARENT,size:as.MEDIUM,onClick:p,"aria-label":"login"}):e.jsx(wt,{className:"!bg-black !text-primary-background dark:!bg-white",iconStart:oe.LOGIN,variant:$e.TRANSPARENT,onClick:p,"aria-label":"login",children:!n&&e.jsx(is,{variant:Ts.LABEL_MEDIUM_REGULAR,children:"Sign In"})})]})]})}const hf=r.memo(uf),xf=localStorage.getItem("impersonate"),un=({hideFooter:t=!1,isProtected:s=!1})=>{var A,D;const[n]=xa(),a=n.get(Pp)||void 0;Xi(a);const{isMobile:d,isMobileApp:o}=Ie(),i=JSON.parse(Q.getItem(Is))||!1,{onlyUserId:c}=he(),[u,m]=r.useState(!localStorage.getItem(Id)),j=Ds(),f=j.pathname==="/",h=((A=j.pathname)==null?void 0:A.split("/")[1])==="chat",x=(D=j.pathname)==null?void 0:D.startsWith("/creator"),y=j.pathname===Ae.sale,p=j.pathname===Rp,b=Zs(),g=f||j.pathname===Ae.recommendedBots||j.pathname===Ae.favoriteBots||x,v=Mh(O=>{var P,E;return(E=(P=O==null?void 0:O.app)==null?void 0:P.appSettings)==null?void 0:E.id}),T=!i&&f&&ts(),w=!i&&u&&!y&&!f&&!h&&ts(),I=!i&&!o;return yn.setPathname(j.pathname),r.useEffect(()=>{b(gl(!1))},[]),v?e.jsxs("div",{className:"grid h-screen min-h-fit max-h-[-webkit-fill-available] "+(I?"grid-cols-[min-content,minmax(0px,1fr)]":"!grid-cols-1"),children:[I&&e.jsx(Op,{}),e.jsxs("div",{className:"grow flex itece flex-col relative",children:[e.jsxs("div",{className:"\n          flex flex-col grow  \n          ".concat(p?"overflow-x-hidden ":"","\n          ").concat(ts()&&y&&"bg-[linear-gradient(to_bottom,#071939_50%,#301950_100%)]","\n          ").concat(d?"px-0":"","\n          ").concat(t?"grow":"min-h-screen","\n        "),children:[i?e.jsx(Kg,{}):I&&e.jsx(hf,{}),xf&&e.jsx("div",{className:"bg-[red] text-white p-2 flex justify-center",children:"Impersonate is Enabled"}),e.jsx(Qg,{}),w&&e.jsx(cf,{setIsBirthdayHeaderVisible:m}),e.jsxs(_s,{gap:.8,className:y||g?"px-0 ".concat(f||d?"":"pt-4"):"".concat(d?h?"px-0":"px-3":h?"p-0":"pt-4 px-4"),children:[e.jsx(_n,{placement:gn.Top,shouldBeExcludedFromPagesWithTags:!0,className:"mb-2",isVisibleOnPartner:!1,isLayoutBanner:!0}),e.jsx(_n,{placement:gn.PopUp,isVisibleOnPartner:!1}),T&&e.jsx(lf,{}),e.jsx(bn,{}),!i&&s&&!c&&!p&&e.jsx(ml,{})]})]}),!t&&(i?e.jsx(pu,{}):e.jsx(Xg,{}))]})]}):e.jsx(dd,{centerToScreen:!0})};function ke({element:t,permission:s,permissionRequired:n=!0}){const a=JSON.parse(Q.getItem(Is))||!1,{isLoading:d,permissions:o}=Qe();if(!a&&o.length===0)return t;if(!o||(o==null?void 0:o.length)===0||d)return e.jsx(Se,{});const i=o==null?void 0:o.includes(Mr.limited_access);return(o==null?void 0:o.includes(s))||!n?t:i?e.jsx(Pd,{banType:Mr.limited_access}):e.jsx(Rd,{})}ke.propTypes={element:L.element.isRequired,permission:L.string,fallbackPath:L.string,permissionRequired:L.bool};const pf=()=>{var D;const t=Ha(),{invalidateFields:s}=t,{isLoading:n,login:a}=Qe(),d=Je(),{jsonApiService:o,callApi:i,isLoading:c,error:u}=Ee(),m=Zs(),{username:j,name:f}=he(),[h,x]=r.useState(),[y,p]=r.useState(!1),[b,g]=r.useState(!1),[v]=Gr((D=t.values)==null?void 0:D.username,500),{isMobile:T}=Ie();r.useEffect(()=>{const O=async P=>{try{await i(o.checkUsername,P).then(({isAvailable:E})=>{E||s({username:"Username is not available"}),g(E),p(!1)})}catch(E){console.log(E)}};v&&v.length>=4&&(p(!0),O(v))},[v,i,o.checkUsername,s]);const w=r.useMemo(()=>{if(!t.values.username)return{text:"",color:""};if(t.values.username.length<4)return{text:"Username is invalid",color:"error"};const O=t.values.username.match(/^[a-zA-Z0-9_-]*$/);return O?y?{text:"Checking...",color:"info",icon:e.jsx(Se,{size:"sm"})}:b?{text:"Available",color:"",icon:e.jsx(Vr,{className:"text-green-600",width:44,height:24})}:{}:{text:O?"Valid":"Username is invalid",color:O?"success":"error"}},[t.values.username,y,b]),I=async()=>{let O=await i(o.createUserExternal,t.values.name,t.values.username);O!=null&&O.user&&(await a({isPartner:!0,token:O.token,app_state:null}),m(Uh(O.user)),d("/"))};if(n)return e.jsx(Se,{});const A=O=>{O.preventDefault(),I(),setTimeout(()=>{x("")},2e3)};return e.jsxs(q,{className:"p-[10px] h-[80vh] flex flex-col justify-center items-center",children:[e.jsx(Ue,{index:"SignupPage"}),e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mb-2.5 tracking-tighter font-semibold ".concat(T?"text-[24px]":"text-[36px]"),children:"We'll get you chatting in no time!"}),e.jsx("span",{className:"font-semibold tracking-tight ".concat(T?"text-[16px]":"text-[20px]"),children:"Please fill the following details to setup your profile"})]}),e.jsx(S,{y:3}),e.jsx($a,{onValidSubmit:A,connect:t,initialValues:{username:j,name:f},enableReinitialize:!0,children:e.jsxs("form",{onSubmit:A,children:[e.jsx(As,{component:ms,variant:"primary_small_short",color:"primary",title:"Username",name:"username",desc:"Your username must be unique and at least 4 characters long.","aria-labelledby":"username",isClearable:!0,spacer:5,maxLength:20,endContent:w.icon,validations:[{rule:Ys(),message:"Username can't be empty"},{rule:Ba(4),message:"Username is too short, it should be at least 4 characters long."},{rule:ha(20),message:"Username should be less then 20 characters "},{rule:Dh("^[a-zA-Z0-9_-]*$"),message:"Username contain invalid characters"}]}),e.jsx(As,{component:ms,variant:"primary_small_short",color:"primary",title:"Name",name:"name",desc:"How you want to be called when chatting and at least 4 characters long","aria-labelledby":"name",maxLength:20,validations:[{rule:Ys,message:"Name can't be empty"},{rule:Ba(4),message:"Name is too short, it should be at least 4 characters long."}]}),e.jsxs("div",{className:"text-green-600 text-left ml-4 p-[2.5] h-[35px]",children:[h||"",u&&e.jsx(l,{type:"error",children:u})]}),e.jsx(U,{type:"submit","aria-labelledby":"save",isDisabled:!t.isValid||c,variant:"primary_large",color:!t.isValid||c?"disabled":"primary_strong",children:c?e.jsx(Se,{color:"currentColor",size:"sm"}):"Start Chatting"})]})})]})};function No(){const{username:t}=Ps();return e.jsxs("div",{children:[e.jsx(Ue,{index:"CreatorProfile",properties:{username:t}}),e.jsxs(C,{children:[e.jsx(Gt,{}),e.jsxs(l,{b:!0,variant:"xxl",className:"px-4 max-mob:px-2",children:["@",t,"'s Chatbots"]})]}),e.jsx(Pn,{}),e.jsx(ud,{})]})}function Co(){return e.jsxs("div",{className:"leading-7 tracking-tighter",children:[e.jsx(Ue,{index:"ContributePage"}),e.jsx(l,{h2:!0,children:"Your Benefits for Contributing"}),e.jsx(S,{y:5}),e.jsxs(l,{children:["By signinp up for our Patreon, you can gain access to some of the following benefits:",e.jsxs("ul",{className:"pl-[18px] grid gap-2.5",children:[e.jsx("li",{className:"list-disc pl-1.5",children:"Skip the waiting line."}),e.jsx("li",{className:"list-disc pl-1.5",children:"Faster text generation."}),e.jsx("li",{className:"list-disc pl-1.5",children:"More benefits will be added."})]})]}),e.jsx(S,{y:2.5}),e.jsx(l,{children:"After you signup to Patreon, look out for a confirmation email from us with instructions to link your account and enjoy the VIP treament."}),e.jsx(S,{y:5}),e.jsx(K,{className:"text-link ml-5 text-[30px] tracking-tighter leading-[52.5px]",to:"https://patreon.com/user?u=31741035",target:"_blank","aria-label":"contribute",children:"patreon.com/user?u=31741035"}),e.jsx(S,{y:5}),e.jsx(l,{h2:!0,children:"Support Our Bold Vision"}),e.jsx(S,{y:5}),e.jsx(l,{children:"At SpicyChat, our vision is to transform entertainment without the limitations our competitors have. By utilizing the latest in AI technologies, we're pushing the envelope to create a space where users can freely interact with their favorite characters and explore fantasies one would not be able to otherwise."}),e.jsx(S,{y:5}),e.jsx(l,{children:"While numerous platforms retreat behind content moderation and censorship to appease investors, we're taking a different path. Of course, we maintain strict guidelines against illegal activities, and we ensure responsible moderation on all public pages. But our fundamental belief is that everyone should have a safe, private space to explore their deepest desires."}),e.jsx(S,{y:5}),e.jsx(l,{children:"Translating this vision into reality requires your help. Scaling up from a small community to a comprehensive platform demands considerable resources. Expansion of infrastructure, team development, and ongoing maintenance are daunting tasks. Our plan includes introducing paid tiers in the future, but we're resolute in ensuring that the core features remain accessible to everyone, free of charge."}),e.jsx(S,{y:5}),e.jsx(l,{children:"We've setup a Patreon page where you can contribute to our project. All contributions will be used to fund the growth of SpicyChat."}),e.jsx("br",{}),e.jsx(l,{children:"Contributions are entirely voluntary at this stage of our project. But by showing your support, you're not just fueling our growth. You'll also gain free access to a fantastic product that aligns with our mission."}),e.jsx(S,{y:5}),e.jsx(l,{children:"We sincerely thank you for considering to support our mission. Join our discussions on Discord or Reddit and have your say in shaping the future of this project. Your support is the catalyst that will bring our vision to life."}),e.jsx(S,{y:5}),e.jsx("span",{className:"tracking-normal italic ",children:"Thank you for trusting us. Together, we can navigate into a bold, exciting future."}),e.jsx(S,{y:5}),e.jsx(l,{children:"Karl from SpicyChat"}),e.jsx(S,{y:28}),e.jsx(l,{children:"PS: Special thanks to the great minds behind the Pygmalion community, without their work, this project wouldn't be possible."})]})}function So(){return e.jsxs(e.Fragment,{children:[e.jsx(Ue,{index:"NotFoundPage"}),e.jsxs("section",{className:"section-404 absolute top-[45%] left-[50%] translate-x-[-50%] translate-y-[-50%] flex flex-col items-center justify-center max-xs:p-2.5",children:[e.jsx(_s,{children:e.jsx(l,{h1:!0,children:"404"})}),e.jsxs(C,{children:[e.jsx(l,{h2:!0,children:"This page is gone."}),e.jsx(l,{h4:!0,children:"The page you are looking for does not exist or never existed."}),e.jsx(K,{className:"mt-3",to:"/","aria-label":"home",children:e.jsx(U,{variant:"primary_large",color:"primary_strong",children:"Back to home"})})]})]})]})}const wo=()=>{var E;const t=Ha(),{onUserUpdateProfile:s,isLoading:n}=he(),{invalidateFields:a}=t,{isAuthenticated:d,isLoading:o,user:i}=Qe(),c=Je(),{jsonApiService:u,callApi:m,error:j}=Ee(),{setAuthenticatedUser:f}=Od(),{username:h,name:x,email:y}=he(),[p,b]=r.useState(),[g,v]=r.useState(!1),[T,w]=r.useState(!1),[I]=Gr((E=t.values)==null?void 0:E.username,500),A=JSON.parse(Q.getItem(Is))||!1;r.useEffect(()=>{A&&c("/external/signup")},[A,c]);const D=(y==null?void 0:y.split("@")[1])==="privaterelay.appleid.com";r.useEffect(()=>{const N=async R=>{try{await m(u.checkUsername,R).then(({isAvailable:k})=>{k||a({username:"Username is not available"}),w(k),v(!1)})}catch(k){console.log(k)}};Dt(I)&&I&&I.length>=3&&(v(!0),N(I))},[I,m,u.checkUsername,a]);const O=r.useMemo(()=>{if(!t.values.username)return{text:"",color:""};if(t.values.username.length<4)return{text:"Username is invalid",color:"error"};const N=Dt(t.values.username);return N?g?{text:"Checking...",color:"info",icon:e.jsx(Se,{size:"sm"})}:T?{text:"Available",color:"",icon:e.jsx(Vr,{color:"#17C964",width:44,height:24})}:T?{}:{text:"Not Available",color:"",icon:e.jsx(nl,{color:"#9f1942",width:44,height:24})}:{text:N?"Valid":"Username is invalid",color:N?"success":"error"}},[t.values.username,g,T]);if(!d&&o)return e.jsx(Se,{});d||c("/");const P=async N=>{N.preventDefault();const R={username:t.values.username,name:t.values.name,email:t.values.email};await s(R),f({...i}),c("/"),setTimeout(()=>{b("")},2e3)};return e.jsxs(_s,{children:[e.jsx(Ue,{index:"SignupPage"}),e.jsx(l,{h3:!0,children:"Welcome Aboard"}),e.jsx(S,{y:6}),e.jsx(l,{h4:!0,children:"Here's some basic rules:"}),e.jsx(S,{y:1}),e.jsxs("ul",{className:"m-3 ml-5",children:[e.jsx("li",{className:"mb-4",children:e.jsx(l,{children:"- No hate speech"})}),e.jsx("li",{className:"mb-4",children:e.jsx(l,{children:"- No underage"})}),e.jsx("li",{className:"mb-4",children:e.jsx(l,{children:"- No incest"})})]}),e.jsx($a,{onValidSubmit:P,connect:t,initialValues:{username:h,name:x},enableReinitialize:!0,children:e.jsxs("form",{onSubmit:P,children:[e.jsx(As,{component:ms,variant:"primary_small_short",color:"primary",title:"Username",name:"username",desc:"The username that would appear on your public characters.","aria-labelledby":"username",isClearable:!0,maxLength:20,endContent:O.icon,toLowerCase:!0,validations:[{rule:Ys(),message:"Username can't be empty"},{rule:Ba(3),message:"Username is too short"},{rule:ha(20),message:"Username should be less then 20 characters "},{rule:N=>Dt(N),message:"Username contain invalid characters"}]}),e.jsx(S,{y:5}),e.jsx(As,{component:ms,variant:"primary_small_short",color:"primary",title:"Name",name:"name",desc:"How you want to be called when chatting.","aria-labelledby":"name",maxLength:20,validations:[{rule:Ys(),message:"Name can't be empty"},{rule:Fh(),message:"Name can't be empty"},{rule:Ba(3),message:"Name should be of atleast 3 characters"}]}),e.jsx(S,{y:5}),D&&e.jsxs(e.Fragment,{children:[e.jsx(As,{component:ms,variant:"primary",color:"primary",title:"Email",name:"email",desc:"Because you are using Apple Sign-In with Hide My Email, we are unable to send you email. Please provide a valid email that can be used to communicate with you about your account.","aria-labelledby":"Email",isClearable:!0,validations:[{rule:Ys(),message:"Email can not be empty"},{rule:yc(),message:"Please enter a valid email address"}]}),e.jsx(S,{y:5})]}),e.jsx(q,{children:e.jsx(Ql,{size:"sm",name:"ageConfirmationCheckbox","aria-labelledby":"checkbox-age",validations:[{rule:N=>N===!0,message:"You must confirm that you are 18 years or older."}],children:e.jsx(l,{variant:"md",children:"I confirm that I am 18 years or older."})})}),e.jsx(S,{}),e.jsx(q,{className:"flex gap-[10px] items-center",children:e.jsx(Ql,{size:"sm",name:"checkbox","aria-labelledby":"checkbox-terms",validations:[{rule:N=>N===!0,message:"You must agree with the terms and conditions."}],children:e.jsxs(l,{variant:"md",children:["You agree to be bound by our"," ",e.jsxs(K,{className:"text-link no-underline",to:"/terms","aria-label":"terms-of-service",children:["Terms of Service"," "]}),"and"," ",e.jsx(K,{className:"text-link no-underline",to:"/privacy","aria-label":"privacy-policy",children:"Privacy Policy"}),"."]})})}),e.jsx(S,{y:.5}),e.jsxs("div",{className:"text-green-600 text-left mr-[16px] p-[10px] h-[35px]",children:[p||"",j&&e.jsx(l,{type:"error",children:j})]}),e.jsx("div",{children:e.jsx(U,{variant:"primary_large",color:"primary_strong",type:"submit","aria-labelledby":"save",isDisabled:!(t!=null&&t.isValid)||n,children:n?e.jsx(Se,{color:"currentColor",size:"sm"}):"Start Chatting"})})]})})]})},Eo=()=>{const t=Ha(),s=Je(),{jsonApiService:n,callApi:a,isLoading:d,error:o}=Ee(),{email:i}=he(),c=(i==null?void 0:i.split("@")[1])==="privaterelay.appleid.com";r.useEffect(()=>{c||s("/")},[c,s]);const u=async()=>{let j=await a(n.updateUser,{email:t.values.email});console.log("Result",j),j.email&&s("/")},m=j=>{j.preventDefault(),u()};return e.jsxs(_s,{children:[e.jsx(Ue,{index:"UpdateEmail"}),e.jsx(l,{h3:!0,children:"Update Your Email"}),e.jsx(S,{y:1}),e.jsx($a,{onValidSubmit:m,connect:t,enableReinitialize:!0,children:e.jsxs("form",{onSubmit:m,children:[e.jsx(As,{component:ms,variant:"primary",color:"primary",title:"Email",name:"email",desc:"Because you are using Apple Sign-In with Hide My Email, we are unable to send you email. Please provide a valid email that can be used to communicate with you about your account.","aria-labelledby":"Email",validations:[{rule:Ys(),message:"Email can not be empty"},{rule:yc(),message:"Please enter a valid email address"}]}),o&&e.jsx("div",{className:"text-green-600 text-left mr-[16px] p-[10px] h-[35px]",children:o&&e.jsx(l,{type:"error",children:o})}),e.jsx(U,{variant:"primary_large",color:"primary_strong",type:"submit","aria-labelledby":"update",isDisabled:!t.isValid||d,children:d?e.jsx(Se,{color:"currentColor",size:"sm"}):"Update"})]})})]})};function Ao(){const t=Zs(),s=Ks(a=>{var d;return(d=a==null?void 0:a.settings)==null?void 0:d.inferenceModel})||null,n=a=>{let d=Array.from(a).join(", ");console.log(d),t(kp(d))};return e.jsxs("div",{id:"error-page",children:[e.jsx(Ue,{index:"SettingsPage"}),e.jsx("h1",{children:"Settings"}),e.jsx("p",{className:"leading-6",children:"The purpose of this page is to allow testing experimental models. These models might become unavailable without warning, so make sure to set back to default."}),e.jsx(_s,{children:e.jsxs(_,{className:"w-[300px]",align:"center",children:[e.jsx(C,{children:"Inference Model:"}),e.jsx(C,{children:e.jsxs(Zt,{classNames:le.dropdown.base,children:[e.jsx(ea,{children:e.jsxs(U,{variant:"secondary",color:"transparent",children:[e.jsx("span",{className:"capitalize text-black dark:text-white",children:s}),e.jsx(Tn,{size:14,className:"ml-1 text-black dark:text-white"})]})}),e.jsxs(sa,{classNames:le.dropdown.menu,variant:"flat","aria-label":"Single selection actions",disallowEmptySelection:!0,selectionMode:"single",selectedKeys:s,onSelectionChange:n,children:[e.jsx(jn,{classNames:le.dropdown.section,children:e.jsx(Et,{classNames:le.dropdown.item_primary,color:"transparent",children:"Default"},"default")}),e.jsx(jn,{classNames:le.dropdown.section,children:e.jsx(Et,{classNames:le.dropdown.item_primary,color:"transparent",children:"Experimental"},"experimental")})]})]})})]})})]})}const Oi={TITLE:"Unleash Your Creativity: Create Chatbot Characters",DESCRIPTION:"Create and personalize AI chatbot characters to suit your deepest fantasies, bringing unique, uncensored personalities to life. Sign Up Free to Create Characters.",BUTTON_TITLE:"Create Free Account"},mf=()=>{const t=Zs(),s=()=>{t(Yr(!0))};return e.jsxs("div",{className:"bg-[url('/Assets/createBotHeroBG.jpg')] h-[636px] lg:h-[848px] relative bg-cover bg-center flex flex-col justify-end items-center rounded-xl before:content-[''] before:z-10 before:size-full before:absolute before:top-0 before:left-0 before:bg-gradient-to-b before:from-[rgba(255,255,255,0.2)] dark:before:from-[rgba(0,0,0,0.2)] before:via-[rgba(255,255,255,0.2)] dark:before:via-[rgba(0,0,0,0.5)] before:to-[rgba(255,255,255,1)] dark:before:to-[rgba(0,0,0,1)] before:from-0% before:via-50% before:to-100% gap-8 mb-8",children:[e.jsx("h1",{className:"text-[32px] lg:text-[80px] text-center font-medium max-w-[70%] z-20",children:Oi.TITLE}),e.jsx("div",{className:"text-[18px] lg:text-[24px] text-center max-w-[80%] z-20",children:Oi.DESCRIPTION}),e.jsx(U,{variant:"secondary_large",color:"gradient_primary_alt",className:"z-20 w-[80%] sm:w-[300px] lg:mx-auto lg:w-auto",onClick:s,children:Oi.BUTTON_TITLE})]})},gf="Unlock Bot Creation",ff=()=>{const{register:t}=Qe();return e.jsxs("div",{className:"text-center absolute bottom-0 w-screen left-1/2 -translate-x-1/2 bg-gradient-to-b from-[rgba(255,255,255,0.5)] dark:from-[rgba(0,0,0,1)] via-[rgba(157,178,206,0.5)] dark:via-[rgba(157,178,206,0.25)] to-[rgba(255,255,255,1)] dark:to-[rgba(0,0,0,1)] from-[0%] via-40% to-90% z-20 flex flex-col gap-5 justify-center items-center h-full box-border",children:[e.jsx(U,{color:"gradient_secondary",className:"rounded-full h-20 w-20 p-8",children:e.jsx(Bh,{size:38})}),e.jsx(U,{variant:"secondary_large",color:"gradient_primary_alt",className:"w-[80%] sm:w-[300px] lg:mx-auto md:w-auto",onClick:t,children:gf})]})},jf=({icon:t,title:s,description:n})=>e.jsxs("div",{className:"w-[400px] h-[350px] max-h-[auto] border border-solid border-[rgba(255,114,245,0.2)] dark:border-[rgba(0,114,245,0.4)] bg-gradient-to-b from-[#001b3a59] dark:from-[#001b3a] to-[#2210353f] dark:to-[#221035] from-[-20%] to-100% rounded-3xl flex flex-col items-center gap-8",children:[e.jsx("div",{className:"mt-8",children:e.jsx(t,{size:32})}),e.jsx("h2",{className:"text-2xl max-w-[80%] text-center",children:s}),e.jsx("p",{className:"text-lg max-w-[90%] mb-8 text-center",children:n})]}),bf=[{ICON:Gh,TITLE:"Create Public Chatbots",DESCRIPTION:"Showcase your imaginative characters to a wide audience and share your creative chatbots with the community. Gain recognition and get a chance to win each month in our Creator Showcase!"},{ICON:Vh,TITLE:"Create Private Chatbots",DESCRIPTION:"Create personalized chatbots for private conversations tailored to your deepest fantasies. Perfect for confidential discussions or exclusive interactions where customization is key."},{ICON:Hh,TITLE:"Get Rewards",DESCRIPTION:"With each character you create, you have the chance to earn exclusive rewards, gain recognition, and even see yourself be featured each month in our Creator Showcase!"}],yf=()=>e.jsx("div",{className:"flex flex-row gap-8 justify-center items-center mb-8 flex-wrap",children:bf.map((t,s)=>e.jsx(jf,{icon:t.ICON,title:t.TITLE,description:t.DESCRIPTION},s))});function hr(){var y,p;const{jsonApiService:t,callApi:s,isLoading:n,error:a,...d}=Ee(),o=Je(),{draftId:i}=Ps(),{userId:c}=he(),u=Ut+"_"+c,m=(y=JSON.parse(localStorage.getItem(u)))==null?void 0:y[i],{isAuthenticated:j,isLoading:f}=Qe(),h=async b=>await s(t.createResource,"characters?switch=T1",b,jt).then(g=>{g!=null&&g.id&&o("/chat/".concat(g.id))}),{isMobile:x}=Ie();return f?e.jsx(Se,{className:le.spinner}):e.jsxs(na,{size:"medium",children:[e.jsx(Ue,{index:"CreateCharacterPage"}),!j&&e.jsxs(e.Fragment,{children:[e.jsx(mf,{}),e.jsx(yf,{})]}),e.jsxs("div",{className:"flex flex-col relative ".concat(!j&&"py-16"),children:[j?null:e.jsx(ff,{}),e.jsx(S,{y:.5}),e.jsxs(q,{className:"flex justify-between ".concat(x?"flex-col":"flex-row"),children:[e.jsx(l,{variant:"xxl",b:!0,children:"Create Your Own Chatbot"}),e.jsx(K,{className:"flex items-center text-link",target:"_blank",to:"https://docs.spicychat.ai/product-guides/creating-chatbots","aria-label":"chatbot-guide",children:"Read our Chatbot Creation guide."})]}),e.jsx(S,{y:.5}),i&&!m?e.jsx(Se,{}):e.jsx(Rc,{...m,tags:(p=m==null?void 0:m.tags)==null?void 0:p.map(b=>({label:b,value:b})),onSave:h,onCancel:()=>o("/"),allowImport:!0,draftId:i,isSubmitting:n,submitError:a,errorData:d})]})]})}const xr=()=>{const{onlyUserId:t}=he(),{jsonApiService:s,callApi:n}=Ee(),[a]=xa(),[d,o]=r.useState(""),i=a.get("subscribestar_code"),{transientId:c}=Ps();let u="https://".concat(window.location.hostname,"/link/subscribestar");if(window.location.port&&(u="http://".concat(window.location.hostname,":").concat(window.location.port,"/link/subscribestar")),window.location.href.includes("?code")){let f=window.location.href.split("code=")[1].split("&")[0];window.history.pushState({},null,"/link/subscribestar?subscribestar_code=".concat(f)),window.location="".concat(u,"?subscribestar_code=").concat(f)}const m=async()=>{window.location="https://www.subscribestar.com/oauth2/authorize?client_id=4VAxg7kYIRne8M3p9j6URDCT2bKEQfZugvoQQ19Jgvs&scope=subscriber.read+subscriber.payments.read+user.read+user.email.read&response_type=code&redirect_uri=".concat(u)};if(r.useEffect(()=>{c&&t&&(async()=>await n(s.fetchResource,"link/subscribestar/".concat(c)))()},[n,s.fetchResource,c,t]),r.useEffect(()=>{i&&(async()=>await n(s.fetchResource,"link/subscribestar/oauth?subscribestar_code=".concat(i,"&redirect_url=").concat(u)).then(f=>{f!=null&&f.status&&(o(f==null?void 0:f.status),window.history.pushState({},null,"/link/subscribestar"))}).catch(f=>{console.error(f.message),f.message=="no active pledge found"?o("invalid_pledge"):o("error"),window.history.pushState({},null,"/link/subscribestar")}))()},[n,s.fetchResource,i,u]),!t)return null;if(c)return e.jsxs(e.Fragment,{children:[e.jsx(l,{h2:!0,children:"Link your SubscribeStar Account"}),e.jsx(l,{h4:!0,children:"You need to link your SubscribeStar account so that we can configure your SpicyChat account with your Premium benefits."}),e.jsx(l,{children:"You will be presented with a screen asking for permissions. We will only get access to your name, email and your pledge level toward spicychat campaign."}),e.jsx(S,{y:1}),e.jsx(U,{variant:"secondary_large",color:"primary_strong",onPress:m,children:"Connect SubscribeStar to Confirm your Pledge"})]});if(i&&!d)return e.jsx(e.Fragment,{children:e.jsxs(l,{h3:!0,children:["Linking your account...",e.jsx(Se,{})]})});if(d){if(d==="error")return e.jsxs(e.Fragment,{children:[e.jsx(l,{h3:!0,children:"There was an error linking your account."}),e.jsxs(l,{h4:!0,children:[e.jsx("a",{onClick:()=>window.location.reload(),children:"Click here to reload"})," the page and try again."]})]});if(d==="invalid_pledge")return e.jsxs(e.Fragment,{children:[e.jsx(l,{h3:!0,children:"No active pledge found"}),e.jsx(l,{h4:!0,children:"We couldn' t find any active pledge associated with your SubscribeStar account"})]});if(d==="success")return e.jsx(e.Fragment,{children:e.jsx(l,{h1:!0,children:"Your account was succesfully linked. Please reload the page for the changes to apply."})})}return e.jsxs(e.Fragment,{children:[e.jsx(S,{y:.5}),e.jsx(l,{h2:!0,children:"Link your SubscribeStar Account"}),e.jsx(S,{y:1}),e.jsx(l,{h4:!0,children:"You need to link your SubscribeStar account so that we can configure your SpicyChat account with your Premium benefits."}),e.jsx(S,{y:.5}),e.jsx(l,{children:"You will be presented with a screen asking for permissions. We will only get access to your name, email and your pledge level toward spicychat campaign."}),e.jsx(S,{y:5}),e.jsx(q,{className:"max-w-[400px]",children:e.jsx(U,{variant:"secondary_large",color:"primary_strong",onPress:m,children:"Connect SubscribeStar to Confirm your Pledge"})})]})},pr=()=>{const t=Ha(),s=Je(),{isValid:n,isStepPristine:a}=t,{characterId:d}=Ps(),[o,i]=r.useState(null),[c,u]=r.useState(!1),{jsonApiService:m,callApi:j,isLoading:f,error:h}=Ee(),{callApi:x,data:y}=Ee();let p={character_id:d||""};r.useEffect(()=>{d&&x(m.fetchResource,"characters",d,{},jt)},[d,x,m.fetchResource]);const b=async()=>{let g=Object.fromEntries(Object.entries(t.values).filter(([,v])=>v!=null));d&&(g.character_id=d),await j(m.createResource,"reportCharacter",g).then(v=>{console.log(v),i("Report submitted successfully"),u(!0),setTimeout(()=>{i(null)},3e3)})};return e.jsxs(na,{size:"medium",children:[e.jsx(Ue,{index:"ReportPage"}),e.jsx(_,{children:e.jsx(C,{children:e.jsx(Gt,{route:"/"})})}),e.jsx(_,{children:e.jsx(l,{h1:!0,variant:"xl",children:"Report Issues"})}),e.jsx(S,{y:.5}),e.jsx(_,{className:"leading-6",children:e.jsx(l,{children:"Assist us in ensuring the appropriateness of public content and safeguarding our community."})}),e.jsx(_,{className:"leading-6",children:e.jsx(l,{children:"All Reports and Complaints are handled within 7 days of submission."})}),e.jsx(S,{y:6}),e.jsx(_,{children:e.jsx(l,{h4:!0,children:"Guidelines"})}),e.jsx(S,{y:.5}),e.jsx(_,{className:"leading-6",children:e.jsx(l,{children:"We continuously refine our guidelines for public content. Currently, we strictly prohibit the promotion of illegal and offensive material, including CSAM, excessive violence, depictions of underage characters, rape, incest, and sexual abuse."})}),e.jsx(l,{children:e.jsxs("p",{children:["Consult our",e.jsx(K,{className:"text-link mx-1",to:"https://docs.spicychat.ai/community-guidelines","aria-label":"community-guidelines",children:"Community Guidelines"}),"for more details."]})}),e.jsx(S,{y:6}),e.jsx($a,{connect:t,initialValues:p,enableReinitialize:!0,onValidSubmit:b,children:e.jsxs("form",{onSubmit:t.submit,children:[y&&e.jsx(Mc,{character:y,hideOptions:!0}),!d&&e.jsx(e.Fragment,{children:e.jsx(As,{component:ms,variant:"primary",color:"primary",name:"character_id",title:"Chatbot ID",desc:"The id can be found in the url of the chatbot page.",placeholder:"d3653a1d-a4ac-4e4c-8892-804fea5e4368",maxLength:"50","aria-labelledby":"CharacterId",validations:[{rule:Ys(),message:"You must provide an id"}]})}),e.jsx(S,{y:6}),e.jsx(Rr,{name:"userIssueType",validations:[{rule:Ys(),message:""}],options:[{value:"Guidelines",label:"Chatbot doesn't respect our content guidelines."},{value:"Categorization",label:"Chatbot is not properly categorized."},{value:"Incorrect Authorization",label:"Chatbot is used without my authorization."},{value:"Invalid",label:"Broken image or invalid character definition."}],title:"Type of Issue",desc:"The reason for reporting this character",orientation:"vertical",size:"sm","aria-labelledby":"issue",classNames:{wrapper:"gap-[20px]"}}),e.jsx(S,{y:1}),e.jsx(As,{component:pa,variant:"primary",color:"primary",name:"userReportDetails",title:"Details",desc:"Provide enough details to help us understand the issue.",minRows:3,maxRows:3,maxLength:250,"aria-labelledby":"details",validations:[{rule:ha(250),message:"Highlights should be less than 250 characters"},{rule:Ys(),message:"Details are required"}]}),e.jsx(S,{y:4}),e.jsx(Rr,{name:"userExpectedResolution",validations:[{rule:Ys(),message:""}],options:[{value:"private",label:"Chatbot should be made private"},{value:"modified",label:"Chatbot should be modified"},{value:"deleted",label:"Chatbot should be deleted"}],title:"Expected Resolution",desc:"How do you feel the issue should be resolved",orientation:"vertical",size:"sm","aria-labelledby":"visibility",classNames:{wrapper:"gap-[20px]"}})]})}),e.jsxs(q,{gap:2,className:"flex-col",justify:"start",children:[!n&&!a&&e.jsx(_,{justify:"end",children:e.jsx(l,{type:"error",children:"Fill all fields to submit."})}),h&&e.jsx(_,{justify:"end",children:e.jsx(l,{type:"error",children:h})}),o&&e.jsx(_,{justify:"start",children:e.jsx(l,{type:"success",children:o})}),e.jsxs(q,{gap:1,children:[e.jsx(U,{variant:"primary_large",color:"primary_light","aria-labelledby":"cancel",onPress:()=>s("/"),children:"Cancel"}),e.jsx(U,{variant:"primary_large",color:"primary_strong",type:"submit","aria-labelledby":"save",isDisabled:!n||f||c,onPress:b,children:f?e.jsx(Se,{color:"currentColor",size:"sm"}):"Submit"})]})]})]})},To=()=>(r.useEffect(()=>{setTimeout(()=>{window.location.href="/"},1e4)},[]),e.jsxs("div",{children:[e.jsx(l,{h1:!0,children:"Thanks for subscribing!"}),e.jsx(S,{y:5}),e.jsx(l,{children:"Your account is being setup, you should get redirected to the home page in 10 seconds."}),e.jsx(S,{y:6}),e.jsxs(l,{children:["If you are not redirected, please click ",e.jsx(K,{className:"text-link",to:"/","aria-label":"redirect",children:"here"}),"."]})]})),Io=()=>(r.useEffect(()=>{setTimeout(()=>{window.location.href="/link/subscribestar"},1e4)},[]),e.jsxs("div",{children:[e.jsx(l,{h1:!0,children:"Thanks for subscribing!"}),e.jsx(S,{y:5}),e.jsxs(l,{children:["In order to ",e.jsx("b",{children:"activate your premium benefits"}),", you will now ",e.jsx("b",{children:"need to link"})," your SubscribeStar account to your Spicychat account."]}),e.jsx(S,{y:5}),e.jsxs(l,{children:[e.jsx(K,{className:"text-link",to:"/link/subscribestar","aria-label":"link-subscribestar",children:"Click Here to start the process"}),"."]})]})),Po=()=>e.jsx(_s,{align:"center",children:e.jsxs(C,{children:[e.jsx(_,{justify:"center",children:e.jsx(te,{src:"/Assets/loveAIlogo.svg"})}),e.jsx(_,{className:"pb-10",children:e.jsx(l,{h3:!0,children:"LoveAI is joining forces with Spicychat.AI!"})}),e.jsx(_,{className:"pb-4",children:e.jsx(l,{variant:"regular",children:e.jsxs("p",{children:["As a token of appreciation for your support, all former LoveAI members are entitled to a 14-days free trial on Spicychat.AI, followed by a special discounted monthly rate of $10/month ",e.jsx("b",{children:"(33% OFF)"}),"."]})})}),e.jsx(_,{className:"pb-4",children:e.jsx(l,{variant:"regular",children:"That special offer is only available if you subscribe through SubscribeStar before December 31st 2023."})}),e.jsx(_,{children:e.jsx(U,{variant:"primary_large",color:"primary_strong",onPress:()=>window.location="https://subscribestar.adult/spicychat/subscribe?tier_id=80381",children:"Redeem Free Subscription through SubscribeStar"})}),e.jsx(_,{justify:"center",children:e.jsx(te,{className:"w-full",src:"/Assets/loveAI.png"})})]})}),_f="/Assets/1200x540 - Easter Giveaway - Code.png",vf="/Assets/540x540 - Easter Giveaway - Code.png",Nf="Easter Giveaway",Cf="Click to copy the easter code",Sf="Copied the easter code",wf="Subscribe Now For Free",Ef="We're sorry, you must have an active Premium subscription to access this exclusive Easter code.",Af="EasterGiveaway",Ro="SPICYEASTER24";function Oo(){const[t,s]=r.useState(!1),[n,a]=r.useState(Cf),{status:d}=he(),{isMobile:o}=Ie(),i=Je(),c=()=>{navigator.clipboard.writeText(Ro),a(Sf),u()},u=()=>{s(!0),setTimeout(()=>{s(!1)},2e3)};return e.jsxs("div",{children:[e.jsx(Ue,{index:Af}),e.jsx("div",{className:"flex flex-col items-center justify-center mt-[5%] gap-4",children:d===ma.ACTIVE?e.jsxs(e.Fragment,{children:[e.jsx(Fc,{src:o?vf:_f,alt:Nf,maxWidth:"800px"}),e.jsx(gt,{isOpen:t,showArrow:!0,content:n,children:e.jsx(ms,{classNames:{input:"text-center"},isReadOnly:!0,onMouseOver:u,onClick:c,variant:"primary_small",value:"CODE: ".concat(Ro)})})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{children:Ef}),e.jsx(U,{onClick:()=>i(Ae.subscribe),children:wf})]})})]})}const Tf=$h({...Kh,themes:{...Yh,...Wh},media:{...zh}});function If({children:t}){const[s,n]=r.useState(qh.SPICYCHAT),{setTheme:a,theme:d}=wn(),o=d===tr.DARK,i=()=>{a(d===tr.DARK?tr.LIGHT:tr.DARK)};return e.jsx(Jh.Provider,{value:{setTheme:a,application:s,setApplication:n,isDark:o,toggleTheme:i},children:e.jsx(Qh,{config:Tf,defaultTheme:d,children:t})})}function Pf({children:t}){const s=Ds();return r.useEffect(()=>{document.documentElement.scrollTo(0,0)},[s.search]),t}const Rf=()=>{const[t]=xa(),s=t.get("aff_id"),n=t.get("ref");return r.useEffect(()=>{s?localStorage.setItem("aff_id",s):localStorage.setItem("aff_id",n)},[s,n]),null};function mu(){var ae,Pe;const t=Je(),s=Zs(),n=Ds(),a=n==null?void 0:n.pathname,d=aa(a),o=Ks(Ce=>Ce.navigation.entryLocation),[i]=xa(),{isAuthenticated:c,saveToken:u,user:m,getToken:j,permissions:f,isLoading:h,isAuthenticationRequired:x,login:y}=Qe(),{setPermission:p,isInvalid:b,userProfile:g,isProfileLoaded:v,userId:T}=he(),{jsonApiService:w,callApi:I}=Ee(),{loadAppSettings:A,logoutDomain:D,appSettings:O,lastAppSettingUpdatedAt:P,setUserApplicationId:E,applicationId:N}=vs(),{logEvent:R}=bt(),{setAuthenticatedUser:k}=Od(),G=((ae=g==null?void 0:g.email)==null?void 0:ae.split("@")[1])==="privaterelay.appleid.com",F="jwt",[H,V]=r.useState(!1),z=Hr(window.location.hostname);Q.setItem(Is,z.isPartner),z.isPartner&&Q.setItem(Wr,!0);const ne=a.startsWith(Ae.report),J=a.startsWith("/creator/"),$=a.startsWith("/chatbot/"),ge=ne||J||a==="/terms"||a==="/privacy"||a==="/refund"||$,X=(Pe=new URLSearchParams(i))==null?void 0:Pe.get("access_token");return r.useEffect(()=>{X&&u(X)},[X]),r.useEffect(()=>{E(z.applicationId),$o(z.applicationId),w.setApplicationId(z.applicationId)},[z.applicationId,z.isPartner]),r.useEffect(()=>{const Ce=i.get(F);z.isPartner&&!H&&(y({isPartner:!0,token:Ce,app_state:null}),V(!0))},[z.isPartner,i]),r.useLayoutEffect(()=>{ge&&window.scrollTo({top:0,left:0,behavior:"instant"})},[a]),r.useEffect(()=>{z.isPartner&&x&&D&&window.open("https://".concat(D),"_self")},[x,D,z.isPartner]),r.useEffect(()=>{b&&t("/user-not-found"),c&&v&&!(g!=null&&g.username)&&!z.isPartner&&!b&&!Lp.includes(n.pathname)&&t(Ae.signUp),G&&v&&(g!=null&&g.username)&&t("/update-email")},[c,m,n.pathname,t,j,s,g,v,f,z.isPartner,b,G]),r.useEffect(()=>{m&&(p(f),k({...m}),m.external_id&&s(Ho(m.external_id)))},[m,s,f]),r.useEffect(()=>{N&&!h&&(!O||Math.abs(new Date().getTime()-P)>Mp)&&A(N).unwrap().then(Ce=>{var ve,Z;if(Ce.googleAnalyticsId&&Xh.initialize(Ce.googleAnalyticsId),(ve=Ce==null?void 0:Ce.branding)!=null&&ve.siteIcon){let me=document.createElement("link"),Ge=document.getElementById("dynamic-favicon"),Y=document.getElementById("icon32"),fe=document.getElementById("icon16");me.id="dynamic-favicon",me.rel="icon",me.href=(Z=Ce==null?void 0:Ce.branding)==null?void 0:Z.siteIcon,Ge&&document.head.removeChild(Ge),Y&&document.head.removeChild(Y),fe&&document.head.removeChild(fe),document.head.appendChild(me)}})},[O,N,I,s,h,w.fetchResource,P]),r.useEffect(()=>{z.isPartner&&!m&&!h&&(n.pathname==="/"||n.pathname==="/external")&&D&&window.open("https://".concat(D),"_self")},[z.isPartner,m,h,n.pathname,D]),r.useEffect(()=>{R(Ss.VIEW_PAGE,{user_id:T,page_name:d,user_agent:navigator.userAgent})},[a]),r.useEffect(()=>{o||s(Dp(n.pathname))},[o]),e.jsx(Zh,{navigate:t,children:e.jsx(ex,{attribute:"class",themes:["light","dark"],defaultTheme:"dark",children:e.jsx(If,{children:e.jsxs(Up,{children:[e.jsx(Rf,{}),e.jsx(Pf,{children:e.jsx(r.Suspense,{fallback:e.jsx(Se,{}),children:e.jsx(bn,{})})})]})})})})}const gu=({character:t,onPress:s,extraStyles:n})=>e.jsx(He,{onClick:s,"aria-label":"chatbot",children:e.jsxs(ps,{variant:"bordered",className:"w-[400px] ".concat(n),gap:0,children:[e.jsx(ds,{className:"m-0 p-0",children:e.jsxs(_,{children:[e.jsx(C,{justify:"start",className:"w-[70px]",children:e.jsx(te,{width:60,src:gs(t==null?void 0:t.avatar_url,{preset:"avatar64x64"}),objectFit:"cover",className:"rounded-[10px]",alt:t.name})}),e.jsxs(C,{children:[e.jsx(_,{justify:"start",children:e.jsx(l,{b:!0,variant:"md",children:t.name})}),e.jsx(l,{variant:"sm",children:t.title})]})]})}),e.jsx(Qs,{}),e.jsx(xn,{className:"p-0",children:e.jsxs(_,{className:"ml-[5px] mr-[5px]",align:"center",children:[e.jsx(C,{children:e.jsxs(l,{i:!0,variant:"sm",children:["@",t.creator_username]})}),e.jsx(C,{children:e.jsxs(_,{justify:"end",align:"center",children:[e.jsx(Fp,{num_messages:t.num_messages}),t.visibility===ot.PRIVATE&&e.jsx(_c,{}),t.visibility===ot.HIDDEN&&e.jsx(sx,{}),(t==null?void 0:t.is_underage)&&e.jsx(gt,{content:"This character is possibly underage",placement:"topStart",children:e.jsx(l,{variant:"md",children:"🔞"})}),!(t!=null&&t.is_nsfw)&&e.jsx(tx,{})]})})]})})]})});gu.propTypes={character:L.shape({id:L.string,name:L.string,title:L.string,description:L.string,avatar_url:L.string,creator_user_id:L.string,creator_username:L.string,num_messages:L.number,visibility:L.string,is_underage:L.bool,is_nsfw:L.bool}),onPress:L.func,onDeleteCharacter:L.func,hideOptions:L.bool,extraStyles:L.object};const Ta=ax(Ls,{variants:{myStyle:{custom:"flex justify-center border-none outline-none cursor-pointer p-0 pl-[2px] m-0 bg-transparent hover:opacity-[0.8] active:opacity-[0.6]"}},defaultVariants:{myStyle:"custom"}});function Of(){const[t,s]=r.useState([]),{jsonApiService:n,callApi:a,isLoading:d}=Ee(),{callApi:o}=Ee();r.useEffect(()=>{async function x(){let p=(await a(n.fetchResource,'admin/reviews?filters={"status":"open"}')).data.sort((b,g)=>b.createdAt<g.createdAt?1:-1);s(p)}return x(),()=>s(null)},[a,n.fetchResource]);const i=async x=>{await o(n.deleteResource,"admin/characters",x),[...t].filter(p=>p.character_id===x).forEach(p=>{c(p.id,"deleted")}),s([...t].filter(p=>p.character_id!==x))},c=async(x,y="none")=>{let p=[...t].filter(b=>b.id!==x);s(p),await o(n.updateResource,"admin/reviews",x,{status:"closed",action_taken:y})},u=async x=>{await o(n.updateResource,"admin/characters",x,{visibility:ot.PRIVATE}),[...t].filter(p=>p.character_id===x).forEach(p=>{c(p.id,"made_private")}),s([...t].filter(p=>p.character_id!==x))},m=async x=>{await o(n.updateResource,"admin/characters",x,{is_nsfw:!0}),[...t].filter(p=>p.character_id===x).forEach(p=>{c(p.id,"set_nsfw")}),s([...t].filter(p=>p.character_id!==x))},j=async x=>{await o(n.updateResource,"admin/characters",x,{is_underage:!1}),[...t].filter(p=>p.character_id===x).forEach(p=>{c(p.id,"reset_underage")}),s([...t].filter(p=>p.character_id!==x))},f=[{name:"CHARACTER",uid:"character_id"},{name:"ISSUE",uid:"issue"},{name:"RESOLUTION",uid:"resolution"},{name:"DETAILS",uid:"details"},{name:"ACTIONS",uid:"actions"}],h=(x,y)=>{var b;const p=x[y];switch(y){case"character_id":return e.jsx(gu,{character:x.character,extraStyles:(b=x==null?void 0:x.character)!=null&&b.is_deleted?"bg-[red]":void 0});case"name":return e.jsx(lx,{squared:!0,src:x.avatar,name:p,className:"p-0",children:x.email});case"actions":return e.jsxs(_,{justify:"center",align:"center",children:[e.jsx(C,{children:e.jsx(gt,{content:"Edit character",children:e.jsx(Ta,{onClick:()=>console.log("Edit user",x.character_id),children:e.jsx(nx,{size:20,fill:"#979797"})})})}),e.jsx(C,{children:e.jsx(gt,{content:"Not Underage",children:e.jsx(Ta,{onClick:()=>j(x.character_id),children:e.jsx(rx,{size:20})})})}),e.jsx(C,{children:e.jsx(gt,{content:"NSFW",children:e.jsx(Ta,{onClick:()=>m(x.character_id),children:e.jsx(l,{variant:"xs",children:"NSFW"})})})}),e.jsx(C,{children:e.jsx(gt,{content:"Make Private",children:e.jsx(Ta,{onClick:()=>u(x.character_id),children:e.jsx(_c,{size:20})})})}),e.jsx(C,{children:e.jsx(gt,{content:"Delete user",color:"error",onClick:()=>i(x.character_id),children:e.jsx(Ta,{children:e.jsx(hc,{size:20,fill:"#FF0080"})})})}),e.jsx(C,{children:e.jsx(gt,{content:"Close Report",onClick:()=>c(x.id),children:e.jsx(Ta,{children:e.jsx(ix,{size:20})})})})]});case"details":return e.jsx(_,{className:"w-[400px]",children:e.jsx(l,{variant:"xs",children:p})});default:return p}};if(d)return e.jsx(Se,{});if((t||[]).length>0)return e.jsxs(e.Fragment,{children:[e.jsx(Ue,{index:"Review"}),e.jsx("h3",{children:"Your Chatbots"}),e.jsxs(vc,{"aria-label":"Example table with custom cells",className:"h-auto min-w-full",selectionMode:"none",children:[e.jsx(Nc,{columns:f,children:x=>e.jsx(Cc,{hideHeader:x.uid==="actions",align:x.uid==="actions"?"center":"start",children:x.name},x.uid)}),e.jsx(Sc,{items:t,children:x=>e.jsx(wc,{children:y=>e.jsx(Ec,{children:h(x,y)})})})]})]})}const kf="Blocked Creators",Lf="Unblock",Mf="Not blocked any creator yet!",Df="You are not logged in yet!",Uf=()=>{const{blockedUsers:t,areUserSettingsLoaded:s,onUserUnblockCreator:n,isLoading:a,areUserSettingLoading:d}=fs(),[o,i]=r.useState([]),[c,u]=r.useState(""),[m,j]=r.useState(""),[f,h]=r.useState(!1),[x,y]=r.useState(!1),{isMobile:p}=Ie(),{jsonApiService:b,callApi:g}=Ee(),{isAuthenticated:v}=Qe(),T=d===ox.failed,w=async()=>{await n(c),i(o==null?void 0:o.filter(P=>(P==null?void 0:P.id)!==c))},I=(P,E)=>{u(P),j(E),h(!0)},A=()=>{u(""),h(!1)},D=async()=>{if(t!=null&&t.length)try{const P=await g(b.fetchResource,"users/blocked-creators",null,null);i(P),y(!0)}catch(P){console.error(P)}};r.useEffect(()=>{!x&&(t!=null&&t.length)&&D()},[t]);const O=["primary","error","secondary","warning","success"];return e.jsxs(na,{size:"medium",children:[e.jsxs("div",{className:"flex flex-col grow",children:[e.jsx(Ue,{index:"BlockedCreatorsPage"}),e.jsx(_,{className:"pl-4",children:e.jsx(l,{h3:!0,children:kf})}),T?e.jsx(Bp,{shouldCenter:!0}):e.jsx("div",{className:"flex flex-row",children:e.jsx(ps,{variant:"bordered",className:"bg-transparent flex text-center w-full m-2.5 border-1 border-solid border-slate-200 dark:border-slate-800",children:e.jsx(ds,{className:"py-0 ".concat(p?"pl-[15px] pr-[10px]":"px-[30px]"),children:o!=null&&o.length?o==null?void 0:o.map((P,E)=>{var N;return e.jsxs(e.Fragment,{children:[E!==0&&e.jsx(Qs,{}),e.jsxs("div",{className:"flex justify-between items-center my-4",children:[e.jsxs("div",{className:"flex gap-2 items-center ",children:[e.jsx(Bt,{color:O[E%O.length],className:"text-large text-white",classNames:{name:"pb-1"},name:(N=P==null?void 0:P.username)==null?void 0:N[0].toUpperCase()}),e.jsxs(K,{className:"text-link no-underline",to:"/creator/".concat(P==null?void 0:P.username),"aria-label":"creator-profile",children:["@",P==null?void 0:P.username]})]}),e.jsx("div",{children:e.jsx(U,{color:"primary_strong",onClick:()=>I(P==null?void 0:P.id,P==null?void 0:P.username),size:"sm",children:Lf})})]})]})}):e.jsx(_,{className:"p-5 justify-center",children:t!=null&&t.length&&!x||v&&!s?e.jsx(Se,{size:"sm"}):e.jsx(l,{children:v?Mf:Df})})})})})]}),e.jsx(Xs,{heading:"Unblock Creator",isVisible:f,confirmationMessage:hl+m,handleClose:A,onUserConfirmation:w,isLoading:a})]})},Ff="/Assets/androidInstallation.gif";function Bf(){const{mobileApplications:t}=vs(),s=t==null?void 0:t.filter(n=>n.type==="android")[0];return r.useEffect(()=>{window.scrollTo(0,0)},[]),e.jsxs(e.Fragment,{children:[e.jsx(Ue,{index:"AndroidInstallationPage"}),e.jsxs(C,{align:"center",className:"text-center px-2",children:[e.jsx("h2",{children:"Install Android App"}),e.jsxs(C,{gap:1,align:"center",children:[e.jsxs(C,{children:[e.jsx("h3",{children:"Step 1"}),e.jsx(l,{children:"Uninstall the existing app (if you have)."})]}),e.jsxs(C,{children:[e.jsx("h3",{children:"Step 2"}),e.jsx(l,{children:"Download the installation file by clicking below."})]}),e.jsx(U,{as:K,to:s==null?void 0:s.download_url,color:"primary_strong",children:e.jsx(l,{b:!0,type:"white",children:"Click Here To Download"})}),e.jsxs(C,{children:[e.jsx("h3",{children:"Step 3"}),e.jsx(l,{children:"Locate the downloaded file on your device and open it to begin the installation."})]}),e.jsxs(C,{children:[e.jsx("h3",{children:"Step 4"}),e.jsx(l,{children:"Update your browser settings to allow install for this source."})]}),e.jsxs(C,{children:[e.jsx("h3",{children:"Step 5"}),e.jsx(l,{children:'Approve the installation by clicking on the "Install" button at the bottom.'})]})]}),e.jsx(S,{y:6}),e.jsx(te,{src:Ff})]})]})}const Gf="/Assets/Sale/giftContainer.png",Vf="/Assets/Sale/rewardDiscount.svg";function ki({x:t,label:s,regularPrice:n,salePrice:a,monthlyDiscount:d,yearlyPrice:o}){const[i,c]=r.useState(!1),{isMobile:u}=Ie(),m=()=>{i||(cx({particleCount:100,spread:70,origin:{y:.7,x:t}}),c(!0))};return e.jsxs(C,{children:[e.jsxs(C,{className:"relative cursor-pointer "+(!i&&"grayscale"),onClick:m,children:[e.jsx(ct,{className:"absolute left-1/2 -translate-x-1/2 z-10 bg-[linear-gradient(180deg,#ECD495_0%,#DFA73C_100%)] min-w-[75px] max-w-full "+(u?"h-[20px] top-2":"top-4"),children:e.jsx(l,{b:!0,variant:u?"smallest":"md",type:"!black",children:s})}),e.jsx(te,{removeWrapper:!0,className:"relative z-0 opacity-100 w-full",src:Gf,width:267})]}),i&&e.jsxs(C,{className:"items-center "+(u?"gap-3 mt-2":"gap-6 mt-12"),children:[e.jsxs(C,{className:"relative items-center",children:[e.jsx(te,{removeWrapper:!0,src:Vf,className:"relative top-2 opacity-100 max-[430px]:w-[100px]",width:u?120:void 0,radius:"none"}),e.jsxs(C,{className:"absolute z-10 justify-center items-center h-full "+(u?"leading-[1.2] mt-[3px]":"leading-[1.4]"),children:[e.jsxs(_,{gap:u?.5:.75,className:"max-[430px]:*:text-[10px]",children:[e.jsx(l,{variant:u?"xs":"lg",type:"!black medium",children:e.jsxs("strike",{className:"relative "+(u?"top-0":"top-1"),children:["$",n]})})," ",e.jsxs(l,{b:!0,variant:u?"xs":"xxl",type:"!black",children:["$",a]})]}),e.jsxs(l,{i:!0,b:!0,variant:u?"smallest":"regular",type:"!black opacity-80",children:[d,"% Off"]})]})]}),e.jsx(C,{className:"items-center "+(u?"max-sm:*:px-2":"*:p-7 *:!w-[250px] *:rounded-xl "),children:e.jsx(U,{as:K,variant:"tertiary_short",color:"primary_strong",to:Ae.subscribe,children:e.jsx(l,{variant:u?"xs":"xxl",type:"white medium",children:"Claim Offer Now"})})}),e.jsxs(l,{type:"white opacity-70",variant:u?"smallest":"md",children:["Or ",e.jsxs("b",{children:["$",o,"/year"]})," ",e.jsx("br",{hidden:!u})," (30% discount)"]})]})]})}const Hf="/Assets/birthdayYear.svg",$f="/Assets/Sale/turning.svg",zf="/Assets/Sale/saleBg.svg",ko="/Assets/Sale/creatorShowcaseBadge1.svg",Wf="/Assets/Sale/creatorShowcaseBadge2.svg",Yf="/Assets/Sale/creatorShowcaseBadge3.svg",Kf="/Assets/Sale/featureCard1.svg",qf="/Assets/Sale/featureCard2.svg",Jf="/Assets/Sale/featureCard3.svg",Qf="/Assets/Sale/milestoneData.png",Xf="/Assets/Sale/popularCharacter1.png",Zf="/Assets/Sale/popularCharacter2.png",ej="/Assets/Sale/popularCharacter3.png",sj="/Assets/Sale/discord.svg",tj="/Assets/Sale/twitter.svg",aj="/Assets/Sale/reddit.svg",nj="/Assets/celebrate.png",rj="/Assets/Sale/giftBox.png";function ij(){const[t,s]=r.useState(kr(Lr)),n=Je(),{isMobile:a}=Ie(),d=JSON.parse(Q.getItem(Is))||!1;r.useEffect(()=>{(!ts()||d)&&n("/not-found")},[]),r.useEffect(()=>{const m=setInterval(()=>{s(kr(Lr))},1e3);return()=>clearInterval(m)},[]);const{days:o,hours:i,minutes:c,seconds:u}=t;return ts()?e.jsxs("div",{className:"relative !overflow-x-hidden",children:[e.jsx(Ue,{index:"SalePage"}),e.jsx(te,{removeWrapper:!0,src:zf,className:"absolute mx-auto top-0 left-1/2 -translate-x-1/2 z-[0] object-cover opacity-100"}),e.jsxs(C,{className:"*:relative *:z-[1] justify-center items-center text-center "+(a?"pt-4 gap-10":"pt-10 px-8 gap-20"),children:[e.jsxs(C,{className:"text-center items-center px-4 "+(a?"gap-2":"gap-8"),children:[e.jsxs(_,{className:"items-center justify-center",children:[e.jsxs(C,{className:"w-max text-right",children:[e.jsx(te,{src:$f,width:a?188:void 0,className:"opacity-100"}),e.jsx(l,{variant:a?"xs":"xxl",type:"white",children:"LET'S JOIN OUR"}),e.jsx(l,{b:!0,variant:a?"xs":"xxl",type:"white",children:"BIRTHDAY CELEBRATION"})]}),e.jsx("div",{className:a?"w-[170px]":void 0,children:e.jsx(te,{src:Hf,className:"opacity-100 "+(a?"relative right-2 top-2":void 0),width:a?200:420})})]}),e.jsx(_,{className:"border-1 border-white border-solid rounded-full bg-[linear-gradient(90deg,rgba(223,167,60,0.3)_0%,rgba(144,66,221,0.3)_100%)] justify-center py-1.5 max-w-full "+(a?"w-[194px]":"w-[340px]"),children:e.jsx(l,{b:!0,variant:a?"sm":"xl",type:"white leading-normal",children:"MAY 30 - JUNE 3"})}),e.jsxs(_,{className:"bg-[linear-gradient(271.19deg,rgba(144,66,221,0.5)_0%,rgba(223,167,60,0.25)_49.01%,rgba(0,114,245,0.5)_98.31%)] pt-1 max-w-full "+(a?"w-[320px] rounded-2xl justify-center gap-4 pb-2 my-6":"gap-10 px-16 rounded-3xl pb-3"),children:[e.jsxs(C,{className:"w-max",children:[e.jsx(l,{b:!0,variant:a?"xl":"biggest",type:"bg-[linear-gradient(180deg,#FFFFFF_0%,#1E90FF_100%)] [-webkit-text-fill-color:transparent] bg-clip-text",children:o}),e.jsx(l,{type:"font-light white",variant:a?"smallest":"md",children:"DAYS"})]}),e.jsx(l,{b:!0,variant:a?"xl":"biggest",type:"white",children:":"}),e.jsxs(C,{className:"w-max",children:[e.jsx(l,{b:!0,variant:a?"xl":"biggest",type:"bg-[linear-gradient(180deg,#FFFFFF_0%,#1E90FF_100%)] [-webkit-text-fill-color:transparent] bg-clip-text",children:i}),e.jsx(l,{type:"font-light white",variant:a?"smallest":"md",children:"HOURS"})]}),e.jsx(l,{b:!0,variant:a?"xl":"biggest",type:"white",children:":"}),e.jsxs(C,{className:"w-max",children:[e.jsx(l,{b:!0,variant:a?"xl":"biggest",type:"bg-[linear-gradient(180deg,#FFFFFF_0%,#1E90FF_100%)] [-webkit-text-fill-color:transparent] bg-clip-text",children:c}),e.jsx(l,{type:"font-light white",variant:a?"smallest":"md",children:"MINUTES"})]}),e.jsx(l,{b:!0,variant:a?"xl":"biggest",type:"white",children:":"}),e.jsxs(C,{className:"w-max",children:[e.jsx(l,{b:!0,variant:a?"xl":"biggest",type:"bg-[linear-gradient(180deg,#FFFFFF_0%,#1E90FF_100%)] [-webkit-text-fill-color:transparent] bg-clip-text",children:u}),e.jsx(l,{type:"font-light white",variant:a?"smallest":"md",children:"SECONDS"})]})]}),e.jsxs(C,{className:"opacity-80 gap-6 w-[1140px] max-w-full",children:[e.jsx(l,{variant:a?"sm":"xxl",type:"white",children:"One year ago, we embarked on an exciting journey, and today, we're thrilled to celebrate our evolution from \"Alpha\" to a fully launched product. This incredible milestone wouldn't have been possible without the support of our amazing community! We can't wait to bring you even more fantastic features and experiences."}),e.jsx(l,{variant:a?"sm":"xxl",type:"white",children:"To show our appreciation, we've got some fantastic offers, exciting announcements, and brand-new features waiting for you below. Join us in the celebration!"})]})]}),e.jsxs(C,{className:"justify-center items-center px-4 "+(a?"gap-12":"gap-16"),children:[e.jsxs(C,{children:[e.jsx(l,{b:!0,variant:a?"xxl":"big",type:"white",children:"AN EXCLUSIVE OFFER FOR YOU"}),e.jsx(l,{variant:a?"md":"xxl",type:"px-4 white",children:"Click to unlock an exclusive first-month discount price"})]}),e.jsxs(_,{className:"w-[920px] max-w-full "+(a?"gap-3":"gap-14 "),children:[e.jsx(ki,{x:.29,label:"Get a Taste",regularPrice:jr,salePrice:$i,monthlyDiscount:80,yearlyPrice:41.99}),e.jsx(ki,{x:.5,label:"True Supporter",regularPrice:zi,salePrice:gd,monthlyDiscount:50,yearlyPrice:125.99}),e.jsx(ki,{x:.71,label:"I'm All In",regularPrice:Wi,salePrice:fd,monthlyDiscount:56,yearlyPrice:209.99})]})]}),e.jsxs(C,{className:"justify-center items-center text-center w-[800px] max-w-full px-4",gap:a?1:2,children:[e.jsx(l,{b:!0,variant:a?"lg":"big",type:"white",children:"CREATORS SHOWCASE"}),e.jsx(l,{variant:a?"md":"xxl",type:"opacity-80 white",children:"Introducing our new Creators Showcase page, where we celebrate and reward the ingenuity and creativity of our community. Each month, we'll feature and reward our top creators!"}),e.jsxs(C,{className:"text-start",children:[e.jsx(l,{b:!0,i:!0,type:"white",children:"April 2024 Results"}),e.jsxs(_,{gap:2,className:"justify-center items-center mt-[2rem] "+(a?"flex-col":"mt-[8rem]"),children:[a&&e.jsx(te,{removeWrapper:!0,src:ko,width:a?160:300,className:"opacity-100"}),e.jsx(te,{removeWrapper:!0,src:Wf,width:a?160:300,className:"opacity-100"}),!a&&e.jsx(te,{removeWrapper:!0,src:ko,width:a?160:300,className:"opacity-100 relative -top-24"}),e.jsx(te,{removeWrapper:!0,src:Yf,width:a?160:300,className:"opacity-100"})]})]}),e.jsx(C,{className:"items-center "+(a?"*:!w-[100px]":"*:p-7 *:px-12 *:!w-[250px] *:rounded-xl "),children:e.jsx(U,{as:K,variant:"tertiary_short",color:"primary_strong",to:Gp,target:"_blank",children:e.jsx(l,{variant:a?"xs":"xxl",type:"white medium",children:"Learn More"})})})]}),e.jsxs(C,{gap:3,className:"px-4",children:[e.jsx(l,{b:!0,variant:a?"lg":"big",type:"white",children:"FEATURE ANNOUNCEMENT"}),e.jsxs(C,{className:"bg-[linear-gradient(104.28deg,#9042DD_0.87%,rgba(0,114,245,0.2)_100.91%)] items-center rounded-[24px] gap-4 relative overflow-hidden "+(a?"py-6 px-12 pt-[3.5rem]":"p-12"),children:[e.jsx(_,{className:"absolute justify-center px-14 bg-[#b97bee] z-0 "+(a?"top-[26px] -left-[60px] -rotate-[35deg] py-0.5":"top-16 -left-16 -rotate-[40deg] py-1"),children:e.jsx(l,{b:!0,variant:a?"sm":"big",type:"text-violet-600",children:"COMING SOON!"})}),e.jsx(C,{className:"w-[750px] max-w-full relative z-10",children:e.jsx(l,{b:!0,variant:a?"md":"big",type:"white",children:"Coming soon: Easily craft unique personas and seamlessly switch between them with just a click!"})}),e.jsx("div",{className:"relative z-10",children:e.jsx(l,{variant:a?"md":"xxl",type:"white",children:"Get ready to say goodbye to profile tweaks and hello to endless role-playing possibilities!"})}),e.jsxs(_,{className:"justify-center gap-6 w-full "+(a?"flex-col mt-4 items-center":"gap-16 mt-4"),children:[e.jsx(te,{src:Kf,width:a?183:"100%",className:"opacity-100"}),e.jsx(te,{src:qf,width:a?183:"100%",className:"opacity-100"}),e.jsx(te,{src:Jf,width:a?183:"100%",className:"mt-2 opacity-100"})]})]}),!a&&e.jsx(te,{removeWrapper:!0,src:rj,radius:"none",className:"absolute -right-10 -translate-y-1/2 -top-40 z-[-1] opacity-100",width:180})]}),e.jsxs(C,{className:"relative items-center w-full overflow-hidden px-4",children:[e.jsx(te,{src:Qf,radius:"none",width:"100%"}),!a&&e.jsx(te,{removeWrapper:!0,src:nj,radius:"none",className:"absolute -left-40 top-[25%] [transform:rotateY(180deg)] z-0 opacity-100",width:389})]}),e.jsxs(C,{gap:a?2:4,className:"px-2",children:[e.jsxs(l,{b:!0,variant:a?"lg":"big",type:"white",children:["MOST POPULAR ",e.jsx("br",{hidden:!a})," CHARACTERS"]}),e.jsxs(_,{className:a?"flex-col":void 0,gap:3,children:[e.jsxs(C,{className:"items-center justify-between "+(a?"gap-8":"gap-12"),children:[e.jsx(l,{b:!0,variant:a?"md":"xxl",type:"white",children:"Overall"}),e.jsx(te,{src:Xf,width:a?180:"100%",className:"opacity-100"}),e.jsxs(C,{children:[e.jsx(l,{b:!0,variant:a?"md":"xxl",type:"white",children:"Alice"}),e.jsx(l,{variant:a?"md":"xxl",type:"white",children:"7.9M Messages"})]})]}),e.jsxs(C,{className:"items-center justify-between "+(a?"gap-8":"gap-12"),children:[e.jsx(l,{b:!0,variant:a?"md":"xxl",type:"white",children:"Anime"}),e.jsx(te,{src:Zf,width:a?180:"100%",className:"opacity-100"}),e.jsxs(C,{children:[e.jsx(l,{b:!0,variant:a?"md":"xxl",type:"white",children:"Horny Scaramouche"}),e.jsx(l,{variant:a?"md":"xxl",type:"white",children:"5.2M Messages"})]})]}),e.jsxs(C,{className:"items-center justify-between "+(a?"gap-8":"gap-12"),children:[e.jsx(l,{b:!0,variant:a?"md":"xxl",type:"white",children:"Game"}),e.jsx(te,{src:ej,width:a?180:"100%",className:"opacity-100"}),e.jsxs(C,{children:[e.jsx(l,{b:!0,variant:a?"md":"xxl",type:"white",children:"City of Succubi RPG"}),e.jsx(l,{variant:a?"md":"xxl",type:"white",children:"2.9M Messages"})]})]})]})]}),e.jsxs(C,{className:"pb-20 gap-6 "+(a?"pt-10":void 0),children:[e.jsx(l,{b:!0,variant:a?"xxl":"big",type:"white",children:"Stay updated with exclusive contests, offers, and news!"}),e.jsxs(_,{className:"justify-center items-center "+(a?"gap-6 mt-3":"gap-8"),children:[e.jsx(K,{to:cl,target:"_blank","aria-label":"discord",children:e.jsx(te,{removeWrapper:!0,src:sj,className:"cursor-pointer opacity-100",width:a?48:void 0})}),e.jsx(K,{to:Ed,target:"_blank","aria-label":"twitter",children:e.jsx(te,{removeWrapper:!0,src:tj,className:"cursor-pointer opacity-100",width:a?48:void 0})}),e.jsx(K,{to:Ad,target:"_blank","aria-label":"reddit",children:e.jsx(te,{removeWrapper:!0,src:aj,className:"cursor-pointer opacity-100",width:a?48:void 0})})]})]})]})]}):null}const lj="/Assets/prizeBadge.svg";function Lo(t){const{title:s,description:n}=t;return e.jsxs(ps,{className:"border-1 border-solid border-colorUnderReview overflow-visible bg-gray-200",children:[e.jsx(te,{src:lj,alt:"",className:"absolute -top-5 -left-4"}),e.jsxs(ds,{className:"text-center gap-1.5",children:[e.jsx(l,{children:s}),e.jsx(l,{children:n})]})]})}const Li="bg-[linear-gradient(180deg,#FFDD6D_0%,#998346_100%)] [-webkit-text-fill-color:transparent] bg-clip-text";function oj(t){const{data:s,className:n}=t,{creator_username:a="",number_of_characters:d=0,score:o=0,rank:i=0,movement:c="",avatar_url:u=""}=s;return e.jsxs(C,{className:"w-max text-center items-center relative "+n,children:[e.jsx("div",{className:"rounded-full absolute right-8 top-4 z-20 text-white bg-[#353535] w-[30px] h-[30px] grid place-items-center pb-0.5",children:e.jsxs(l,{b:!0,type:Li,children:["#",i]})}),e.jsxs("div",{className:"[clip-path:polygon(25%_0%,75%_0%,100%_50%,75%_100%,25%_100%,0%_50%)] size-[130px] rotate-90 flex items-center justify-center p-3 relative "+(i==1?"bg-[linear-gradient(90deg,#FFDD6D_0%,#998541_100%)]":"bg-[linear-gradient(90deg,#353535_0%,#D9D9D9_100%)]"),children:[e.jsx("div",{className:"[clip-path:polygon(25%_0%,75%_0%,100%_50%,75%_100%,25%_100%,0%_50%)] bg-white dark:bg-black absolute top-1 left-1 right-1 bottom-1"}),e.jsx(te,{removeWrapper:!0,src:u,alt:"",className:"[clip-path:polygon(50%_0%,100%_25%,100%_75%,50%_100%,0%_75%,0%_25%)] -rotate-[90deg] h-full w-full"})]}),e.jsx(S,{y:3}),e.jsx(K,{to:"/creator/".concat(a),"aria-label":"creator",children:e.jsxs(l,{children:["@",a]})}),e.jsx(S,{y:5}),e.jsxs(_,{className:"whitespace-nowrap dark:bg-[#323942] shadow-[0px_4px_16.8px_3px_#32394220] dark:shadow-[0px_4px_16.8px_3px_#323942] p-3 px-5 rounded-2xl *:gap-2 w-[200px]",children:[e.jsxs(C,{className:"text-start",children:[e.jsx(l,{children:"Num bots"}),e.jsx(l,{children:"Score"}),e.jsx(l,{children:"M/M Rank"})]}),e.jsxs(C,{className:"text-end",children:[e.jsx(l,{b:!0,type:Li,children:d}),e.jsxs(l,{b:!0,type:Li,children:[(o/1e3).toFixed(1),"k"]}),e.jsx(l,{b:!0,type:c==0?"":c>0?"!text-[#2B8761]":"!text-[#FC6666]",children:c>0?"+".concat(c):c})]})]})]})}function cj(t){const{options:s=[],selectedDate:n,setSelectedDate:a}=t,d=Ds(),o=new URLSearchParams(d.search),i=Je();r.useEffect(()=>{if(s.length){let u=o.get("date");s.includes(u)?a(new Set([o.get("date")])):(a(new Set([s[0]])),i("/creators/leaderboard",{replace:!0}))}},[s]);const c=u=>{a(new Set([u])),u==s[0]?i("/creators/leaderboard",{replace:!0}):(o.set("date",u),i({pathname:"/creators/leaderboard",search:o.toString()},{replace:!0}))};return e.jsx("div",{children:e.jsxs(Zt,{classNames:le.dropdown.base,children:[e.jsx(ea,{className:"z-0",children:e.jsxs(U,{variant:"secondary",color:"primary_light",children:[Yi([...n][0]),e.jsx(Tn,{size:14,className:"ml-0.5"})]})}),e.jsx(sa,{selectionMode:"single",selectedKeys:n,onAction:c,classNames:le.dropdown.menu,children:s.map((u,m)=>e.jsx(jn,{classNames:le.dropdown.section,children:e.jsx(Et,{classNames:le.dropdown.item,value:u,children:Yi(u)},u)},m))})]})})}const dj="/Assets/trophy.svg",Mo="/Assets/leaf.svg";let uj=[{key:"rank",label:"Rank"},{key:"creator_username",label:"Creator"},{key:"number_of_characters",label:"Num Bots"},{key:"score",label:"Score"},{key:"movement",label:"M/M Rank ▲"}];function hj(t){const{setActiveTab:s,selectedDate:n,setSelectedDate:a}=t,[d,o]=r.useState([]),{isMobile:i}=Ie(),[c,u]=r.useState(null),{hits:m}=dx(),[j,f]=r.useState([]);r.useEffect(()=>{m.length&&o(i?[m[0],m[1],m[2]]:[m[1],m[0],m[2]])},[i,m]);const h=y=>y<=3?e.jsx(e.Fragment,{children:e.jsxs(ct,{size:"sm",children:[e.jsx(ui,{size:14,color:"yellow"})," ",e.jsx(ui,{size:14,color:"yellow"})]})}):y<=10?e.jsx(e.Fragment,{children:e.jsx(ct,{size:"sm",children:e.jsx(ui,{size:14,color:"yellow"})})}):e.jsx(e.Fragment,{}),x=r.useCallback((y,p)=>{const b=y[p];switch(p){case"creator_username":return e.jsxs(e.Fragment,{children:[e.jsx(K,{to:"/creator/".concat(y==null?void 0:y.creator_username),"aria-label":"creator",children:e.jsx(l,{className:"underline",type:(y==null?void 0:y.rank)<=10?"warning":"pink-1000",children:y==null?void 0:y.creator_username})})," "]});case"score":return e.jsxs(_,{className:"m-0",children:[e.jsx(C,{children:e.jsxs(l,{variant:"xs",children:[Bi(b)," "]})}),e.jsx(C,{children:h(y.rank)})]});case"movement":return e.jsxs(l,{variant:"xxs",type:b>0?"success":b<0?"warning":"neutral",children:[b>0?"+":"",b]});default:return b}},[]);return r.useEffect(()=>{if(m!=null&&m.length){let y=m.map(b=>b==null?void 0:b.date),p=Array.from(new Set(y));u(m),c||f(p)}},[m]),c?e.jsxs(e.Fragment,{children:[e.jsxs(al,{"aria-label":"Options",onSelectionChange:s,classNames:{base:"min-w-[175px]  max-w-[350px] grow",tabList:"dark:bg-gray-50 rounded-md w-full h-10",tabContent:"font-medium",cursor:"rounded-md",tab:"bg-[#00000040]"},children:[e.jsx(Fa,{title:"New Bots",className:"!bg-transparent",children:e.jsx(l,{children:"New Bots - Creators with the most engaging NEW characters created in the previous month"})},"New Bots"),e.jsx(Fa,{title:"All Bots",children:e.jsx(l,{children:"All Bots - Creators with the most engaging characters in the previous month"})},"All Bots")]}),e.jsx(S,{y:3}),e.jsxs(_,{gap:.5,children:[e.jsx(te,{src:dj,className:"relative top-1",alt:""}),e.jsx(l,{b:!0,type:"bg-[linear-gradient(90deg,#FFDA75_0%,#998346_100%)] [-webkit-text-fill-color:transparent] bg-clip-text",children:"Free month of I’m All In Tier subscription"})]}),e.jsx(S,{y:4}),e.jsxs(_,{className:"items-center mx-auto gap-8 max-[1250px]:gap-0 w-full justify-center "+(i?"pt-[1rem]":"pt-[5rem]"),children:[!i&&e.jsx(te,{src:Mo,className:"-mt-[6rem] max-[1250px]:hidden"}),e.jsx(_,{className:"max-[900px]:grow max-[900px]:justify-between ".concat(i?"flex-col items-center gap-12":"gap-24 max-[900px]:!gap-0"),children:d.map((y,p)=>e.jsx(oj,{className:p==1&&!i&&"-mt-[5rem]",data:y},p))}),!i&&e.jsx(te,{src:Mo,className:"[transform:rotateY(180deg)] -mt-[6rem] max-[1250px]:hidden"})]}),e.jsx(S,{y:12}),e.jsx(cj,{selectedDate:n,setSelectedDate:a,options:j}),e.jsx(S,{y:4}),e.jsxs(vc,{isStriped:!0,"aria-label":"Leaderboard",children:[e.jsx(Nc,{children:uj.map(y=>e.jsx(Cc,{width:10,allowsSorting:!0,children:y==null?void 0:y.label},y.key))}),e.jsx(Sc,{children:c==null?void 0:c.map(y=>e.jsx(wc,{children:p=>e.jsx(Ec,{children:x(y,p)})},y.id))})]})]}):e.jsx(Se,{})}var xj={VITE_TYPESENSE_HOST:"etmzpxgvnid370fyp.a1.typesense.net"};function pj(t){const{selectedDate:s,setSelectedDate:n}=t,{typesenseConfig:a}=vs(),[d,o]=r.useState(null),[i,c]=r.useState("New Bots");let u=["type:".concat(i)];[...s].length&&u.push("date:".concat([...s][0]));let m=u.join(" && ");const j="".concat(a==null?void 0:a.collectionNameLeaderboard,"/sort/rank:asc"),f={server:{apiKey:a==null?void 0:a.apiKeyLeaderboard,nodes:[{host:xj.VITE_TYPESENSE_HOST,port:"443",protocol:"https"}],cacheSearchResultsForSeconds:2*60,connectionTimeoutSeconds:15},filterByOptions:{date:{exactMatch:!0}},additionalSearchParameters:{query_by:"date"}};return r.useEffect(()=>{if(a!=null&&a.apiKeyPublicCharacter){const h=new ux(f);o(h)}},[a==null?void 0:a.apiKeyPublicCharacter]),!(a!=null&&a.apiKeyPublicCharacter)||!(d!=null&&d.searchClient)?e.jsx(Se,{}):e.jsx(e.Fragment,{children:e.jsxs(hx,{searchClient:d==null?void 0:d.searchClient,indexName:j,children:[e.jsx(xx,{hitsPerPage:48,maxValuesPerFacet:100,filters:m}),e.jsx(hj,{setActiveTab:c,selectedDate:s,setSelectedDate:n})]})})}const mj="/Assets/trophy.svg";function gj(){const[t,s]=r.useState(new Set),{isMobile:n}=Ie(),{theme:a}=wn(),d=a==="dark",o=[...t][0];return e.jsxs(C,{children:[e.jsx(Ue,{index:"CreatorLeaderboardPage"}),e.jsx(S,{y:4}),e.jsxs(_,{gap:.5,children:[e.jsx(te,{src:mj,className:"relative top-1.5",alt:""}),e.jsx(l,{h1:!0,b:!0,variant:"xxl",children:"Creators Leaderboard"})]}),e.jsxs(C,{className:n?void 0:"pl-7",children:[e.jsx(l,{children:Yi(o)}),e.jsx(S,{y:4}),e.jsx(l,{variant:"regular",children:"Welcome to our Creator Showcase page, where we celebrate the ingenuity and creativity of our vibrant community!"}),e.jsx(S,{y:1}),e.jsx(An,{className:"px-0",children:e.jsxs(ft,{title:e.jsx(l,{h4:!0,children:"How it Works:"}),classNames:{heading:le.accordion.heading+" w-min whitespace-nowrap",trigger:le.accordion.trigger+" pb-2",title:le.accordion.title,indicator:le.accordion.indicator+" relative bottom-1"},children:[e.jsx(l,{variant:"regular",children:"Each month, we feature two categories of creators:"}),e.jsx(S,{y:2}),e.jsxs("ul",{className:"*:list-disc pl-5",children:[e.jsx("li",{children:e.jsx(l,{variant:"regular",children:"Top 25 creators of newly created characters"})}),e.jsx("li",{children:e.jsx(l,{variant:"regular",children:"Top 25 creators of all characters"})})]}),e.jsx(S,{y:2}),e.jsx(l,{type:d?"under_review":"text-yellow-600",children:"*Our ranking system combines various engagement metrics to highlight these standout creators, showcasing their dedication and skill in crafting compelling conversational experiences."}),e.jsx(S,{y:n?6:10}),e.jsx(l,{b:!0,variant:"lg",children:"Prizes"}),e.jsx(S,{y:5}),e.jsxs(_,{gap:1.5,className:n?"flex-col":void 0,children:[e.jsx(Lo,{title:e.jsxs(l,{children:[e.jsx("b",{children:"Top 3"})," from each category"]}),description:e.jsxs(l,{type:d?"under_review":"text-yellow-600",children:["Free Month of"," ",e.jsx("b",{className:"text-black dark:text-white",children:"“I’m All In Tier”"})," ","Subscription"]})}),e.jsx(Lo,{title:e.jsxs(l,{children:["Remaining ",e.jsx("b",{children:"Top 7"})]}),description:e.jsxs(l,{type:d?"under_review":"text-yellow-600",children:["Free Month of"," ",e.jsx("b",{className:"text-black dark:text-white",children:"“True Supporter”"})," ","Subscription"]})})]}),e.jsx(S,{y:2}),e.jsx(l,{children:"*Note: Users cannot receive prizes for both categories in the same month."}),e.jsx(S,{y:n?6:10})]})})]}),e.jsx(pj,{selectedDate:t,setSelectedDate:s})]})}const Do=t=>t&&["US","PH","IR"].includes(t)?"Zip":"Postal Code",fj=({postalCode:t,countryCode:s,updatePersonalInfo:n,variant:a})=>{const[d,o]=r.useState(!1);return r.useEffect(()=>{},[t,s]),e.jsx(pn,{isRequired:!0,maxLength:16,label:Do(s),labelPlacement:"inside",placeholder:"12345",isInvalid:d,errorMessage:d?"Invalid ".concat(Do(s)):"",variant:a,classNames:{base:"w-30"},value:t,onChange:i=>n("postal_code",i.target.value.toUpperCase()),onBlur:()=>{t&&s&&o(!kd(t,s))},onFocus:()=>{o(!1)}})},Uo=t=>t&&["US","AU","BR","IN","MX","NG","DE"].includes(t)?"State":"Province",jj={id:0,name:"NA",state_code:"N/A"},Mi=Kr("country"),fu=r.forwardRef(({email:t,first_name:s,last_name:n,country:a=null,state:d,stateOptional:o,postal_code:i,className:c,variant:u,updatePersonalInfo:m},j)=>{const[f,h]=r.useState([]),[x,y]=r.useState([]),[p,b]=r.useState(!1);return r.useEffect(()=>{px().then(g=>{h(g),!a&&Mi!==""&&Mi!==null&&m("country",Mi)})},[]),r.useEffect(()=>{if(a&&f){const g=f.find(v=>v.iso2===a);mx(g==null?void 0:g.id).then(v=>{const T=v!=null&&v.length?v:[jj];y(T),T.length>0&&!T.find(w=>w.state_code===d)&&m("state",""),v.length===0?m("stateOptional","true"):m("stateOptional","false")})}},[a,f]),e.jsxs("div",{ref:j,className:ws("flex flex-col gap-4",c),children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 xs:flex-nowrap",children:[e.jsx(pn,{isRequired:!0,label:"First Name",labelPlacement:"inside",placeholder:"Enter your first name",variant:u,value:s,onChange:g=>m("first_name",g.target.value),maxLength:30}),e.jsx(pn,{isRequired:!0,label:"Last Name",labelPlacement:"inside",placeholder:"Enter your last name",variant:u,value:n,onChange:g=>m("last_name",g.target.value),maxLength:30})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-4 sm:flex-nowrap",children:e.jsx(Ll,{isRequired:!0,defaultItems:f,selectedKey:a,label:"Country",labelPlacement:"inside",placeholder:"Select country",showScrollIndicators:!1,onSelectionChange:g=>{m("country",String(g))},variant:u,children:g=>e.jsx(Ua,{value:g==null?void 0:g.iso2,children:g==null?void 0:g.name},g==null?void 0:g.iso2)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 xs:flex-nowrap",children:[e.jsx(Ll,{isRequired:o===!1,isDisabled:a===""||a===null,defaultItems:x,label:Uo(a),labelPlacement:"inside",placeholder:"Select ".concat(Uo(a)),showScrollIndicators:!1,onSelectionChange:g=>{m("state",String(g))},selectedKey:d,variant:u,children:g=>e.jsx(Ua,{value:g==null?void 0:g.state_code,children:g==null?void 0:g.name},g==null?void 0:g.state_code)}),e.jsx(fj,{postalCode:i,countryCode:a,updatePersonalInfo:m,variant:u})]}),e.jsx(pn,{isRequired:!0,value:t,label:"Email",labelPlacement:"inside",placeholder:"Enter your email",type:"email",onChange:g=>m("email",g.target.value),variant:u,maxLength:320,onBlur:()=>{t!=null&&t.length&&b(!Ld(t))},onFocus:()=>{b(!1)},isInvalid:p,errorMessage:p&&"Invalid email address"})]})});fu.displayName="PersonalInfo";const bj=({email:t,country:s,state:n,postal_code:a,first_name:d,last_name:o,stateOptional:i,onChangeButtonClick:c})=>e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsx("div",{className:"flex flex-col gap-1",children:e.jsxs("span",{className:"text-sm font-semibold",children:[d," ",o,", ",n," ",s," ",a]})}),e.jsxs("span",{className:"text-sm font-semibold",children:[" ",e.jsx(Ls,{radius:"full",variant:"bordered",onClick:c,"aria-label":"change",children:"Change"})]})]}),yj=({last_4:t,type:s,exp:n,onChangeButtonClick:a})=>e.jsxs(e.Fragment,{children:[e.jsx(l,{variant:"regular",type:"font-[600]",children:"Credit Card"}),e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[" ",e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"mt-2",width:40,brand:s}),e.jsxs("span",{className:"text-sm font-semibold",children:["ending in ",t," exp ",n]})]}),e.jsx("span",{className:"text-sm font-semibold",children:e.jsx(Ls,{radius:"full",variant:"bordered",onClick:()=>a(!0),"aria-label":"annual",children:"Change"})})]})]}),ju=Yt.forwardRef(({hideTitle:t=!0,discounts:s=[],subtotal:n,total:a,tax:d,items:o=[],allowCoupon:i,billingPeriod:c="monthly",updateCoupon:u,isCalculating:m,currency:j="USD",currencySymbol:f,plan:h,isChangePlanLoading:x,purchaseOptions:y,...p},b)=>{const{isMobile:g}=Ie(),[v,T]=Yt.useState(!1),[w,I]=Yt.useState(""),[A,D]=Yt.useState(""),{logEvent:O}=bt(),P=Yt.useRef(!1),{userId:E}=he(),N=r.useRef(null),R=()=>{m&&!a||x||!y||P.current||(O(Ss.SUBSCRIPTION_CHECKOUT_START,{user_id:E,plan_id:h,currency:j,plan_price:n.toFixed(2)}),P.current=!0)},k=()=>{const V=s.find(z=>z.valid);V&&N.current!==V.code?(O(Ss.CHECKOUT_COUPON_APPLY,{user_id:E,coupon_code:w,discount_amount:V.total}),N.current=V.code):V||(N.current=null)};r.useEffect(()=>{if(w){const V=s.find(ne=>ne.code===w&&!ne.valid),z=V?V.error:"";D(z),k()}R()},[w,s]);const F=(()=>{let V=0;return s.forEach(z=>{V+=parseFloat(z.total)}),V})(),H=parseFloat((d==null?void 0:d.total)||"")||0;return m&&!a||x||!y?e.jsx("div",{className:"flex justify-center",children:e.jsx(Se,{label:"Loading..."})}):a?e.jsxs("div",{ref:b,...p,children:[!t&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"font-medium text-default-500",children:"Your Order"}),e.jsx(Qs,{className:"mt-4"})]}),e.jsx("h3",{className:"sr-only",children:"Items in your cart"}),g&&e.jsx(l,{variant:"regular",type:"font-[600]",children:"Checkout Summary"}),e.jsxs(_,{className:g?"justify-between items-center mt-4":"justify-center",children:[g&&e.jsx("dt",{className:"text-small text-default-500",children:"Plan Name"}),g?e.jsx(l,{variant:"sm",type:"font-[600]",children:h}):e.jsx(Md,{items:o,billingPeriod:c,updateCoupon:u,purchaseOptions:y})]}),e.jsx(S,{y:g?2:1.5}),e.jsxs("div",{children:[i&&!v&&e.jsx("div",{className:"text-xs text-right cursor-pointer",onClick:()=>T(!0),children:"Apply Coupon"}),g&&e.jsx(S,{y:2}),i&&v&&e.jsxs("form",{className:"mb-4 mt-6 flex items-center gap-2",onSubmit:V=>V.preventDefault(),children:[e.jsx(pn,{classNames:{label:"text-default-700",inputWrapper:"bg-background"},color:"primary",label:"Coupon code",labelPlacement:"inside",placeholder:"Enter coupon code",isInvalid:A!=="",errorMessage:A?"Invalid coupon":"",variant:"bordered",value:w,onChange:V=>I(V.target.value)}),e.jsx(Ls,{className:"cursor-pointer",type:"submit",onClick:()=>u&&u(w),isLoading:m,"aria-label":"apply",children:"Apply"})]}),e.jsxs("dl",{className:"flex flex-col gap-4 "+(g?"pb-1":"py-4"),children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("dt",{className:"text-small text-default-500",children:[c==="monthly"?"Monthly":"Annual"," Price"]}),e.jsxs("dd",{className:"text-small font-semibold text-default-700",children:[f,n.toFixed(2)]})]}),H>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-small text-default-500",children:"Taxes"}),e.jsxs("dd",{className:"text-small font-semibold text-default-700",children:[f,H.toFixed(2)]})]}),F>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-small text-default-500",children:"Discount"}),e.jsxs("dd",{className:"text-small font-semibold text-success",children:[" ","- ",F.toFixed(2)]})]}),e.jsx(Qs,{}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-small font-semibold text-default-500",children:"You Pay"}),e.jsxs("dd",{className:"text-small font-semibold text-default-700",children:[e.jsx("span",{className:"font-light text-tiny text-default-500",children:j})," ",f,a.toFixed(2)," "]})]})]})]})]}):null});ju.displayName="OrderSummary";const zs=r.forwardRef(({label:t,children:s,description:n,icon:a,isExpired:d,isRecommended:o,classNames:i={},className:c,...u},m)=>e.jsx(ua,{ref:m,...u,classNames:{...i,base:ws("inline-flex m-0 px-3 py-4 max-w-[100%] items-center justify-between","flex-row-reverse w-full cursor-pointer rounded-lg 3 !border-medium border-default-100","data-[selected=true]:border-primary",i==null?void 0:i.base,c),labelWrapper:ws("ml-0",i==null?void 0:i.labelWrapper)},color:"primary",children:e.jsxs("div",{className:"flex w-full items-center gap-3",children:[e.jsx("div",{className:"item-center flex rounded-small p-2",children:a}),e.jsxs("div",{className:"flex w-full flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("p",{className:"text-small",children:t}),d&&e.jsx(ct,{className:"h-6 p-0 text-tiny",color:"danger",children:"Expired"}),o&&e.jsx(ct,{className:"h-6 p-0 text-tiny",color:"success",variant:"flat",children:"Recommended"})]}),e.jsx("p",{className:"text-tiny text-default-400",children:n||s})]})]})}));zs.displayName="PaymentMethodRadio";const bu=r.forwardRef(({className:t,classNames:s,value:n,...a},d)=>{const{logEvent:o}=bt(),{paymentMethods:i}=a,{userId:c}=he(),u=m=>{o(Ss.CHECKOUT_PAYMENT_METHOD_SELECT,{user_id:c,payment_method:m})};return r.useEffect(()=>{n&&u(n)},[n]),e.jsxs(En,{...a,value:n,ref:d,classNames:{base:ws("mt-4",s==null?void 0:s.base,t),wrapper:ws("grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-3",s==null?void 0:s.wrapper)},label:"Payment Method",orientation:"horizontal",children:[i.includes(se.CARD)&&e.jsx(zs,{className:"bg-content2 dark:bg-content1",description:"",icon:e.jsx(Bs,{icon:"icon-park-outline:bank-card",height:30,width:30}),label:"Credit Card",value:se.CARD}),i.includes(se.VOLT)&&e.jsx(zs,{className:"bg-content2 dark:bg-content1",description:"One time payment",icon:e.jsx(Bs,{icon:"mdi:bank",height:30,width:30}),label:"Pay by Bank",value:se.VOLT}),(i.includes(se.PAYPORT)||i.includes(se.ANTRPAY))&&e.jsx(zs,{className:"bg-content2 dark:bg-content1",description:"One time payment",icon:e.jsx(Bs,{icon:"material-symbols:p2p-outline-sharp",height:30,width:30}),label:"Перевод по номеру телефона",value:se.ANTRPAY}),i.includes(se.DIRECTA24)&&e.jsx(zs,{className:"bg-content2 dark:bg-content1",description:"One time payment",icon:e.jsx(Bs,{icon:"mdi:bank",height:30,width:30}),label:"Pay by Bank",value:se.DIRECTA24}),i.includes(se.INWIZO_ECOM)&&e.jsx(zs,{className:"bg-content2 dark:bg-content1",description:"One time payment",icon:e.jsx(Bs,{icon:"material-symbols:payments-outline",height:30,width:30}),label:"Credit Card",value:se.INWIZO_ECOM}),i.includes(se.INWIZO_TPAY)&&e.jsx(zs,{className:"bg-content2 dark:bg-content1",description:"One time payment",icon:e.jsx(Bs,{icon:"material-symbols:payments-outline",height:30,width:30}),label:"Telco Payment",value:se.INWIZO_TPAY}),i.includes(se.INWIZO_SBP)&&e.jsx(zs,{className:"bg-content2 dark:bg-content1",description:"Разовый платеж",icon:e.jsx(Bs,{icon:"mdi:bank",height:30,width:30}),label:"Sberbank",value:se.INWIZO_SBP}),i.includes(se.LUXFIN)&&e.jsx(zs,{className:"bg-content2 dark:bg-content1",description:"One time payment",icon:e.jsx(Bs,{icon:"cib:venmo",height:30,width:30}),label:"VENMO (pyusd)",value:se.LUXFIN}),i.includes(se.PAYOK)&&e.jsx(zs,{className:"bg-content2 dark:bg-content1",description:"One time payment (₹)",icon:e.jsx(Bs,{icon:"material-symbols:upi-pay-outline-sharp",height:30,width:30}),label:"UPI (Backup Provider)",value:se.PAYOK}),i.includes(se.UPGATE_ALIPAY)&&e.jsx(zs,{className:"bg-content2 dark:bg-content1",description:"One time payment (¥)",icon:e.jsx(Nn,{brand:"alipay",height:30,width:30,color:"white"}),label:"Alipay",value:se.UPGATE_ALIPAY}),i.includes(se.UPGATE_KAKAO)&&e.jsx(zs,{className:"bg-content2 dark:bg-content1",description:"1회 결제 (₩)",icon:e.jsx(Nn,{brand:"kakaopay",height:30,width:30,color:"white"}),label:"Kakao Pay",value:se.UPGATE_KAKAO}),i.includes(se.UPGATE_UPI)&&e.jsx(zs,{className:"bg-content2 dark:bg-content1",description:"One time payment (₹)",icon:e.jsx(Bs,{icon:"material-symbols:upi-pay-outline-sharp",height:30,width:30}),label:"UPI (PhonePe, Paytm, GPay)",value:se.UPGATE_UPI}),i.includes(se.COINPAYMENTS)&&e.jsx(zs,{className:"bg-content2 dark:bg-content1",description:"One time payment",icon:e.jsx(Bs,{icon:"bitcoin-icons:bitcoin-circle-outline",height:30,width:30,color:"white"}),label:"Cryptocurrencies",value:se.COINPAYMENTS})]})});bu.displayName="PaymentMethodRadioGroup";const _j=({isOpen:t,iframeUrl:s,onClose:n,onSuccess:a,onFailure:d})=>{const{isMobile:o}=Ie();return r.useEffect(()=>{const i=c=>{var u,m,j;((u=c.data)==null?void 0:u.status)==="success"?a(c.data):((m=c.data)==null?void 0:m.status)==="failure"&&d((j=c.data)==null?void 0:j.error_message)};return window.addEventListener("message",i),()=>{window.removeEventListener("message",i)}},[n,a,d]),e.jsx(es,{open:t,onOpenChange:n,backdrop:"blur",size:gx.Free,className:"!w-[672px] ".concat(o?"!size-full max-h-full max-w-full":""),classNames:{close:"!bg-gray-8 text-white mt-md mr-md"},children:e.jsx("iframe",{src:s,title:"3DS Verification",width:"100%",height:"400px",frameBorder:"0"})})},vj="201706",Nj=({setKountSessionId:t})=>(r.useEffect(()=>{document.body.classList.add("kaxsdc"),document.body.setAttribute("data-event","load");const s=document.createElement("script");return s.src="https://ssl.kaptcha.com/collect/sdk?m=".concat(vj),s.onload=()=>{const n=new window.ka.ClientSDK;n.setupCallback({"collect-begin":function(a){t(a.MercSessId)}}),n.autoLoadEvents()},document.body.appendChild(s),()=>{document.body.removeChild(s)}},[t]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"bg-default-100 rounded-lg shadow-md p-0",children:e.jsx("div",{id:"stickyio_card",className:"max-w-[400px]"})})})),Fo=[se.VOLT,se.PAYPORT,se.ANTRPAY,se.DIRECTA24,se.LUXFIN,se.PAYOK,se.INWIZO_ECOM,se.INWIZO_TPAY,se.INWIZO_SBP,se.UPGATE_ALIPAY,se.UPGATE_KAKAO,se.UPGATE_UPI,se.COINPAYMENTS],yu=r.forwardRef(({className:t,...s},n)=>{var Tt,_t,It,Pt,Rt,at,nt,vt,hs,Ot;const{platform:a,email:d,userId:o}=he(),{data:i}=pl();Ds();const[c,u]=r.useState(null),[m,j]=r.useState(""),[f,h]=r.useState(""),[x,y]=r.useState(""),[p,b]=r.useState(sessionStorage.getItem("checkout_country")||""),[g,v]=r.useState(""),[T,w]=r.useState(!1),[I,A]=r.useState(""),[D,O]=r.useState(""),[P,E]=r.useState(null),[N,R]=r.useState(null),[k,G]=r.useState(!1),[F,H]=r.useState(!1),[V,z]=r.useState(!1),[ne,J]=r.useState(!0),[$,xe]=r.useState(!0),[de,W]=r.useState(!1),[ge,X]=r.useState(""),[ae,Pe]=r.useState(se.CARD),[Ce,ve]=r.useState(""),[Z,me]=r.useState("USD"),{callApi:Ge,jsonApiService:Y,isLoading:fe}=Ee(),{callApi:Le,isLoading:Fe}=Ee(),We=r.useRef(!0),Be=r.useRef(),{logEvent:Ye}=bt(),[Ke,ze]=xa(),B=Object.fromEntries(Ke.entries()),[ce,Ne]=Ml(m,600),[je,js]=Ml(I,600),bs=Je(),{isMobile:ns}=Ie(),M=i==null?void 0:i.default_plan_id,{plan_id:ee=M,o_id:re,coupon:De}=B,[qe,Ve]=r.useState(ee);r.useEffect(()=>{j(d)},[d]),r.useEffect(()=>{Ne(m)},[m]),r.useEffect(()=>{js(I)},[I]),r.useEffect(()=>{h(sessionStorage.getItem("checkout_first_name")||""),y(sessionStorage.getItem("checkout_last_name")||""),b(sessionStorage.getItem("checkout_country")||""),v(sessionStorage.getItem("checkout_state")||""),A(sessionStorage.getItem("checkout_postal_code")||"")},[]),r.useEffect(()=>{a==Hi.STICKY&&(J(!1),xe(!1))},[a]),r.useEffect(()=>{qe!=ee&&(Ve(ee),z(!0))},[ee]),r.useEffect(()=>{De&&O(De)},[De]),r.useEffect(()=>{ee&&ce&&Ge(Y.createResource,"checkout/calculate",{plan_id:ee,offer_id:re,email:ce,state:g,country:p,postal_code:je,promo_code:D,platform:a}).then(ie=>{if(u(ie),ie!=null&&ie.on_file&&!ne){let{first_name:pe,last_name:os,country:Hs,state:ht,postal_code:Js}=ie.on_file;pe&&h(pe),os&&y(os),Hs&&b(Hs),ht&&v(ht),Js&&A(Js),Be.current=on.PAYMENT_INFO}}).catch(ie=>{ve(ie.message)}).finally(()=>{z(!1)})},[ce,g,p,je,D,ee,re,a]),r.useEffect(()=>{ve("")},[P,ne,$]),r.useEffect(()=>{F&&!P&&$&&ae===se.CARD&&ve("Enter a valid card, expiration date and cvv.")},[F]),r.useEffect(()=>{var ie,pe;(ie=i==null?void 0:i.payment_methods)!=null&&ie.length&&Pe((pe=i==null?void 0:i.payment_methods)==null?void 0:pe[0])},[i]),r.useEffect(()=>()=>{We.current&&Ye(Ss.CHECKOUT_EXIT_ABANDON,{user_id:o,exit_point:Be.current})},[]);const ls=(ie,pe)=>{switch(sessionStorage.setItem("checkout_".concat(ie),pe),Be.current=on.USER_DETAILS,ie){case"email":j(pe);break;case"first_name":h(pe);break;case"last_name":y(pe);break;case"country":b(pe);break;case"state":v(pe);break;case"postal_code":A(pe),ve("");break;case"state_optional":w(pe==="true");break}},we=ie=>{Ye(Ss.CHECKOUT_PURCHASE_COMPLETE,ie)},Es=ie=>{var Js,ss;let pe=((ss=(Js=c==null?void 0:c.line_items)==null?void 0:Js.map(Us=>Us==null?void 0:Us.name))==null?void 0:ss.join(","))||"";const os={user_id:o,plan_id:pe,transaction_id:ie==null?void 0:ie.transactionID,total_amount:ie==null?void 0:ie.orderTotal,currency:ie==null?void 0:ie.currency,timestamp:new Date().toISOString()};if(window!=null&&window.ReactNativeWebView){const Us=JSON.stringify({event_name:Ss.CHECKOUT_PURCHASE_COMPLETE,...os});window.ReactNativeWebView.postMessage(Us)}we(os);const Hs=new URLSearchParams;Object.entries(ie).forEach(([Us,xt])=>{typeof Us=="string"&&typeof xt=="string"&&Hs.set(Us,xt)});let ht=Date.now().toString();Hs.set("plan",pe),Hs.set("date",ht),Q.removeItem(Hp),We.current=!1,bs("/checkout/success?".concat(Hs.toString()))},Xe=()=>{const ie={payment_token:P,email:m,first_name:f,last_name:x,offer_id:re,plan_id:ee,state:g,country:p,postal_code:I,promo_code:D,platform:a,session_id:N};Le(Y.createResource,"checkout/new_order",ie).then(pe=>{pe!=null&&pe.error_message&&ve(pe.error_message||""),(pe==null?void 0:pe.resp_msg)==="redirect"&&(pe!=null&&pe.iframe_3ds_url)&&(X(pe.iframe_3ds_url),W(!0)),(pe==null?void 0:pe.resp_msg)==="Approved"&&Es(pe)}).catch(pe=>{ve(pe.message)})},dt=ie=>{W(!1),Es(ie)},et=ie=>{W(!1),ve(ie)},st=ie=>{let pe;switch(ie){case se.VOLT:pe="checkout/volt_new_payment";break;case se.PAYPORT:pe="checkout/payport_new_payment";break;case se.ANTRPAY:pe="checkout/antrpay_new_payment";break;case se.DIRECTA24:pe="checkout/directa24_new_payment";break;case se.LUXFIN:pe="checkout/luxfin_new_payment";break;case se.PAYOK:pe="checkout/payok_new_payment";break;case se.INWIZO_ECOM:case se.INWIZO_TPAY:case se.INWIZO_SBP:pe="checkout/inwizo_new_payment";break;case se.UPGATE_ALIPAY:case se.UPGATE_KAKAO:case se.UPGATE_UPI:pe="checkout/upgate_new_payment";break;case se.COINPAYMENTS:pe="checkout/coinpayments_new_payment";break}Le(Y.createResource,pe,{plan_id:ee,offer_id:re,email:m,first_name:f,last_name:x,state:g,country:p,postal_code:I,promo_code:D,payment_option:ie}).then(os=>{os!=null&&os.error_message&&ve(os.error_message||""),os!=null&&os.url&&(We.current=!1,window.location.href=os.url)}).catch(os=>{ve(os.message)})},ys=()=>{if(window!=null&&window.ReactNativeWebView){const ie=JSON.stringify({event_name:Ss.SUBSCRIPTION_CHECKOUT_START,user_id:o,plan_id:ee,currency:c==null?void 0:c.currency,plan_price:c==null?void 0:c.total});window.ReactNativeWebView.postMessage(ie)}Ye(Ss.CHECKOUT_PROCEED,{user_id:o,cart_value:ut}),ae===se.CARD?Xe():Fo.includes(ae)&&st(ae)},tt=ae===se.CARD&&P===null&&!k&&!((Tt=c==null?void 0:c.on_file)!=null&&Tt.order_id)||Ce!==""||!F||Fe||I===""||!kd(I,p)||!Ld(m)||p===""||p==="null"||g===""&&!T||(f==null?void 0:f.trim())===""||(x==null?void 0:x.trim())==="",qs=ee.includes("1y")?fr.ANNUAL:fr.MONTHLY,us=qs===fr.ANNUAL?"yearly":"monthly",Gs=Wa((c==null?void 0:c.currency)||"USD"),Vs=(c==null?void 0:c.line_items.map(ie=>ie.name).join(","))||"",ut=parseFloat((c==null?void 0:c.total)||"").toFixed(2),Vt=ne||!(c!=null&&c.on_file)?fu:bj,Ht=ie=>{Be.current=on.PAYMENT_INFO,Pe(ie)},yt=r.useCallback(ie=>{G(ie),Be.current=on.PAYMENT_INFO},[]),At=()=>{const ie=pe=>{H(pe),Be.current=on.CHECKBOX_MARK};return e.jsxs(Ui,{size:"sm",classNames:{base:"mb-2",label:"text-xs",icon:"text-white"},isSelected:F,onValueChange:ie,children:["I agree to the"," ",e.jsx(K,{to:"/terms",target:"_blank","aria-label":"terms-and-conditions",children:"Terms & Conditions"})]})};return e.jsxs("section",{className:"flex w-full max-w-5xl flex-col lg:flex-row lg:gap-8",children:[e.jsxs("div",{className:"w-full",children:[ns&&e.jsxs(e.Fragment,{children:[e.jsx(l,{b:!0,variant:"xxl",children:"Payment"}),e.jsx(C,{className:"bg-[#9DB2CE40] p-4 rounded-xl gap-3 my-4",children:fe&&!D||!(c!=null&&c.total)?e.jsx(Se,{}):e.jsxs(e.Fragment,{children:[e.jsxs(_,{justify:"between",style:void 0,children:[e.jsx(Md,{items:(c==null?void 0:c.line_items)||[],billingPeriod:qs,updateCoupon:ie=>O(ie),setIsChangePlanLoading:z,purchaseOptions:i}),e.jsx(l,{type:"capitalize",children:us})]}),e.jsxs(_,{justify:"between",style:void 0,children:[e.jsx(l,{type:"font-[600]",children:"Total Amount"}),e.jsxs(l,{type:"font-[600]",children:[Gs,ut]})]})]})}),e.jsx(l,{variant:"regular",type:"font-[600]",children:"Personal Information"}),e.jsx(S,{y:1.5})]}),e.jsxs("form",{ref:n,className:ws("flex flex-col gap-4 py-0",t),...s,children:[e.jsx(Vt,{email:m,country:p,state:g,stateOptional:T,postal_code:I,first_name:f,last_name:x,updatePersonalInfo:ls,onChangeButtonClick:()=>J(!0)}),((_t=i==null?void 0:i.payment_methods)==null?void 0:_t.some(ie=>Fo.includes(ie)))&&e.jsx(bu,{paymentMethods:(i==null?void 0:i.payment_methods)||[se.CARD],value:ae,onValueChange:Ht}),ae===se.CARD&&e.jsxs(e.Fragment,{children:[($||!((It=c==null?void 0:c.on_file)!=null&&It.credit_card))&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{gap:1,children:[e.jsx(l,{variant:"regular",type:"font-[600]",children:"Card Info"}),Object.values(Vp).map(ie=>e.jsx(Nn,{brand:ie,width:"40"},ie))]}),e.jsx(bd,{setIsCardValid:yt,setCreditCardToken:E})]}),!$&&((Pt=c==null?void 0:c.on_file)==null?void 0:Pt.credit_card)&&e.jsx(yj,{last_4:(at=(Rt=c==null?void 0:c.on_file)==null?void 0:Rt.credit_card)==null?void 0:at.last_4,type:(vt=(nt=c==null?void 0:c.on_file)==null?void 0:nt.credit_card)==null?void 0:vt.type,exp:(Ot=(hs=c==null?void 0:c.on_file)==null?void 0:hs.credit_card)==null?void 0:Ot.exp,onChangeButtonClick:()=>xe(!0)})]}),[se.VOLT,se.DIRECTA24].includes(ae)&&e.jsxs(l,{className:"text-small text-default-300",children:["You will be prompted for your banking details once your click the ",e.jsx("b",{children:"Continue"})," button."]}),ae===se.PAYPORT&&e.jsxs(l,{className:"text-small text-default-300",children:["Fill the form, click the ",e.jsx("b",{children:"Continue"})," button and choose your local currency and language."]})]})]}),ns&&e.jsxs(e.Fragment,{children:[e.jsx(S,{y:6}),e.jsx(Qs,{}),e.jsx(S,{y:4}),e.jsx(At,{}),e.jsx(S,{y:3}),e.jsx(Qs,{})]}),e.jsx(C,{className:"w-full lg:w-[340px] lg:flex-none",children:e.jsxs("div",{className:"rounded-medium px-2 py-4 md:px-6 md:py-8 "+(!ns&&"bg-content2 dark:bg-content1"),children:[e.jsx(ju,{isCalculating:fe,billingPeriod:qs,allowCoupon:De===void 0,discounts:(c==null?void 0:c.discounts)||[],subtotal:parseFloat((c==null?void 0:c.subtotal)||""),total:parseFloat((c==null?void 0:c.total)||""),tax:c==null?void 0:c.tax,currency:(c==null?void 0:c.currency)||"USD",items:(c==null?void 0:c.line_items)||[],updateCoupon:ie=>O(ie),currencySymbol:Gs,plan:Vs,isChangePlanLoading:V,purchaseOptions:i}),e.jsxs("div",{className:"mt-4",children:[Ce&&e.jsx("div",{className:"flex justify-center text-danger-300 pb-4",children:Ce}),ns&&e.jsxs(e.Fragment,{children:[e.jsx(Qs,{}),e.jsx(Qs,{}),e.jsxs(_,{className:"justify-between items-center py-6",children:[e.jsx(l,{b:!0,variant:"regular",children:ut!=="NaN"?Gs+ut:""}),e.jsx(U,{variant:"primary_large",color:"primary_strong",isDisabled:tt,onClick:()=>ys(),isLoading:Fe,children:e.jsx(l,{b:!0,variant:"md",type:"white",children:Fe?"Processing...":ae===se.CARD?"Subscribe":"Continue"})})]})]}),!ns&&e.jsxs(e.Fragment,{children:[e.jsx(At,{}),e.jsx(U,{fullWidth:!0,color:"primary_strong",radius:"sm",size:"lg",isDisabled:tt,onClick:()=>ys(),children:Fe?"Processing...":ae===se.CARD?"Subscribe":"Continue"})]}),ae===se.CARD&&e.jsx("div",{className:"text-xs text-default-500 text-center",children:e.jsxs("div",{className:"mt-4 mb-4 "+(ns&&"bg-[#9DB2CE40] rounded-xl p-2"),children:["This subscription automatically renews ",us,", and you’ll be notified in advance if the ",us," amount increases. Your purchase will appear as ndai.cc on your statement and you can cancel anytime from your profile."]})})]}),e.jsxs(_,{className:"mt-6 items-center justify-center gap-1 pb-5",children:[e.jsx(Bs,{className:"text-green-600",icon:"solar:shield-check-bold",width:20}),e.jsx("p",{className:"text-small text-gray-800",children:"Payments are secure and encrypted"})]})]})}),e.jsx(_j,{isOpen:de,onClose:()=>W(!1),onSuccess:dt,onFailure:et,iframeUrl:ge}),ae===se.CARD&&e.jsx(Nj,{setKountSessionId:R})]})});yu.displayName="CheckoutForm";const Cj=()=>{const{onlyUserId:t}=he(),s=Zs();return t?(s(gl(!0)),e.jsx("div",{className:"flex justify-center",children:e.jsx(yu,{})})):null},Ia=r.forwardRef(({label:t,value:s,children:n,...a},d)=>e.jsxs("div",{ref:d,className:"flex flex-col sm:flex-row items-start sm:items-center justify-between py-2",...a,children:[e.jsx(l,{type:"text-gray-700",children:t}),e.jsx(l,{children:s||n})]})),Sj=()=>{const{onlyUserId:t}=he(),{forceRefreshToken:s}=Ee(),[n,a]=xa(),{orderTotal:d,order_id:o=null,subscription_id:i=null,transactionID:c=null,plan:u,date:m,currency:j="USD"}=Object.fromEntries(n.entries()),{isMobile:f}=Ie(),h=async()=>{setTimeout(async()=>{s()},5e3)};if(r.useEffect(()=>{h()},[]),!t)return null;const x=()=>e.jsxs(_,{className:"w-full bg-gray-50 px-6 py-5 rounded-xl items-center",style:void 0,children:[e.jsxs(C,{gap:.5,children:[e.jsxs(l,{variant:"lg",type:"font-[600]",children:[Wa(j),d]}),e.jsx(l,{children:"Payment Successful"})]}),e.jsx(_,{children:e.jsx(Dl,{className:"bg-blue-600 rounded-full p-1 shadow-[0_0_0px_10px_#0072F570]",fontSize:32})})]}),y=()=>e.jsx(e.Fragment,{children:e.jsx(U,{as:K,variant:"primary_large",color:"primary_strong",to:"/",children:e.jsx(l,{b:!0,variant:"md",type:"white",children:"Start Chatting"})})});return e.jsxs(_,{className:"justify-between px-12 py-12 w-full max-lg:px-0 "+(f&&"flex-col items-center pt-8"),style:void 0,children:[f&&e.jsx(x,{}),e.jsxs(C,{className:"w-[750px] max-w-full "+(f&&"items-center text-center mt-6 p-2"),children:[e.jsx(S,{y:1}),e.jsxs(l,{b:!0,variant:f?"xxl":"biggest",children:["Thank you for your ",e.jsx("br",{})," purchase!"]}),e.jsx(S,{y:6}),e.jsx(l,{variant:f?"md":"xxl",type:f?"text-start":void 0,children:"We sent a purchase confirmation to your email. You can cancel your subscription at anytime from Manage Subscription button on your profile page."}),e.jsx(S,{y:f?4:12}),!f&&e.jsx(y,{})]}),e.jsxs(ps,{className:"w-full max-w-lg p-2 bg-transparent shadow-none gap-7",children:[!f&&e.jsx(Sn,{className:"rounded-xl p-0",children:e.jsx(x,{})}),e.jsxs(ds,{className:"flex-col gap-2 bg-gray-50 rounded-xl p-6",children:[e.jsx(l,{variant:"regular",type:"font-[600]",children:"Payment Details"}),e.jsx(Ia,{label:"Plan",value:u}),e.jsx(Ia,{label:"Date",value:$p(+m)}),o&&e.jsx(Ia,{label:"Order ID",value:o}),i&&e.jsx(Ia,{label:"Subscription ID",value:i}),c&&e.jsx(Ia,{label:"Transaction ID",value:c}),e.jsx(Ia,{label:"Status",value:e.jsxs(_,{style:void 0,align:"center",gap:.5,children:[e.jsx(Dl,{className:"bg-blue-600 rounded-full p-0.5 shadow-[0_0_0px_4px_#0072F570]",fontSize:12})," ","Success"]})})]})]}),f&&e.jsxs(e.Fragment,{children:[e.jsx(S,{y:8}),e.jsx(y,{})]})]})},Bo=qr(()=>In(()=>import("./legal-CrG-l4iq.js").then(t=>t.P),__vite__mapDeps([0,1,2,3,4]))),wj=qr(()=>In(()=>import("./legal-CrG-l4iq.js").then(t=>t.R),__vite__mapDeps([0,1,2,3,4]))),Go=qr(()=>In(()=>import("./legal-CrG-l4iq.js").then(t=>t.T),__vite__mapDeps([0,1,2,3,4]))),Ej=qr(()=>In(()=>import("./legal-CrG-l4iq.js").then(t=>t.S),__vite__mapDeps([0,1,2,3,4]))),Aj=()=>e.jsx("p",{children:"Loading"}),Tj=Ac([{path:"/",element:e.jsx(mu,{}),errorElement:e.jsx(Ni,{}),children:[{children:[{element:e.jsx(un,{hideFooter:!0}),children:[{path:"/chat/:characterId",element:e.jsx(ke,{element:e.jsx(ho,{}),permission:Oe.view_chat,fallbackPath:"/accessDenied"})},{path:"/chat/:characterId/:conversationId",element:e.jsx(ke,{element:e.jsx(ho,{}),permission:Oe.view_chat,fallbackPath:"/accessDenied"})},{path:Ae.sale,element:e.jsx(ij,{})},{path:"/external/signup",element:e.jsx(pf,{})},{path:"/accessDenied",element:e.jsx(Rd,{})}]},{element:e.jsx(un,{}),children:[{path:"/",element:e.jsx(ke,{element:e.jsx(lr,{}),permission:Oe.view_chat,fallbackPath:"/accessDenied"})},{path:"/external",element:e.jsx(ke,{element:e.jsx(lr,{}),permission:Oe.view_chat,fallbackPath:"/accessDenied"})},{path:"/creator/:username",element:e.jsx(ke,{element:e.jsx(No,{}),permission:Oe.view_chat,fallbackPath:"/accessDenied"})},{path:Ae.blockedCreators,element:e.jsx(ke,{element:e.jsx(Uf,{}),permission:Oe.view_chat,fallbackPath:"/accessDenied"})},{path:"/chats",element:e.jsx(ke,{element:e.jsx(oo,{}),permission:Oe.view_chat,fallbackPath:"/accessDenied"})},{path:"/chats/:characterId",element:e.jsx(ke,{element:e.jsx(co,{}),permission:Oe.view_chat,fallbackPath:"/accessDenied"})},{path:"/privacy",element:e.jsx(Bo,{})},{path:"/terms",element:e.jsx(Go,{})},{path:"/refund",element:e.jsx(wj,{})},{path:"/2257",element:e.jsx(Ej,{})},{path:"/contribute",element:e.jsx(Co,{})},{path:"/subscribeOld",element:e.jsx(go,{})},{path:"/plan-comparison/:frequency",element:e.jsx(cg,{})},{path:"/subscribe-crypto",element:e.jsx(mo,{})},{path:"/welcome/subscribestar",element:e.jsx(Io,{})},{path:"/promo/loveai",element:e.jsx(Po,{})},{path:"/easter-giveaway",element:e.jsx(Oo,{})},{path:"/creators/leaderboard",element:e.jsx(gj,{})},{path:"/download",element:e.jsx(Ag,{})},{path:"*",element:e.jsx(So,{})},{path:Ae.report,element:e.jsx(ke,{element:e.jsx(pr,{}),permission:Oe.report_character,fallbackPath:"/accessDenied"})},{path:Ae.recommendedBots,element:e.jsx(lo,{})},{path:Ae.recommendedBots,element:e.jsx(ke,{element:e.jsx(lo,{}),permission:Oe.view_my_chat_bots,fallbackPath:"/accessDenied"})},{path:"",element:e.jsx(bn,{}),errorElement:e.jsx(Ni,{}),children:[]}]},{element:e.jsx(un,{isProtected:!0}),children:[{path:Ae.signUp,element:e.jsx(wo,{})},{path:Ae.subscribe,element:e.jsx(mo,{})},{path:"/checkout",element:e.jsx(Cj,{})},{path:"/checkout/success",element:e.jsx(Sj,{})},{path:"/update-email",element:e.jsx(Eo,{})},{path:"/settings",element:e.jsx(Ao,{})},{path:Ae.ProfileSetting,element:e.jsx(_o,{})},{path:"/user-not-found",element:e.jsx(jo,{})},{path:"/my-characters",element:e.jsx(ke,{element:e.jsx(ir,{}),permission:Oe.view_my_chat_bots,fallbackPath:"/accessDenied"})},{path:"/my-chatbots",element:e.jsx(ke,{element:e.jsx(ir,{}),permission:Oe.view_my_chat_bots,fallbackPath:"/accessDenied"})},{path:Ae.favoriteBots,element:e.jsx(ke,{element:e.jsx(eo,{}),permission:Oe.view_chat,fallbackPath:"/accessDenied"})},{path:"/character/create",element:e.jsx(ke,{element:e.jsx(hr,{}),permission:Oe.create_character,fallbackPath:"/accessDenied"})},{path:"/chatbot/create/:draftId",element:e.jsx(ke,{element:e.jsx(hr,{}),permission:Oe.create_character,fallbackPath:"/accessDenied"})},{path:"/character/edit/:characterId",element:e.jsx(ke,{element:e.jsx(rr,{}),permission:Oe.create_character,fallbackPath:"/accessDenied"})},{path:"/chatbot/edit/:characterId",element:e.jsx(ke,{element:e.jsx(rr,{}),permission:Oe.create_character,fallbackPath:"/accessDenied"})},{path:"/chatbot/:characterId",element:e.jsx(io,{})},{path:"/link/subscribestar/:transientId",element:e.jsx(xr,{})},{path:"/link/subscribestar",element:e.jsx(xr,{})},{path:"".concat(Ae.report,"/:characterId"),element:e.jsx(ke,{element:e.jsx(pr,{}),permission:Oe.report_character,fallbackPath:"/accessDenied"})},{path:"/admin/reviews",element:e.jsx(Of,{})},{path:"/welcome",element:e.jsx(To,{})}]}]},{element:e.jsx(un,{}),children:[{path:"/",element:e.jsx(ke,{element:e.jsx(lr,{}),permission:Oe.view_chat,fallbackPath:"/accessDenied"})},{path:"/external",element:e.jsx(ke,{element:e.jsx(lr,{}),permission:Oe.view_chat,fallbackPath:"/accessDenied"})},{path:"/creator/:username",element:e.jsx(ke,{element:e.jsx(No,{}),permission:Oe.view_chat,fallbackPath:"/accessDenied"})},{path:"/chats",element:e.jsx(ke,{element:e.jsx(oo,{}),permission:Oe.view_chat,fallbackPath:"/accessDenied"})},{path:"/chats/:characterId",element:e.jsx(ke,{element:e.jsx(co,{}),permission:Oe.view_chat,fallbackPath:"/accessDenied"})},{path:"/privacy",element:e.jsx(Bo,{})},{path:"/terms",element:e.jsx(Go,{})},{path:"/contribute",element:e.jsx(Co,{})},{path:Ae.subscribe,element:e.jsx(go,{})},{path:"/subscribe-crypto",element:e.jsx(yg,{})},{path:"/welcome/subscribestar",element:e.jsx(Io,{})},{path:"/promo/loveai",element:e.jsx(Po,{})},{path:"/easter-giveaway",element:e.jsx(Oo,{})},{path:"/manage-subscription",element:e.jsx(fo,{})},{path:"/portal",element:e.jsx(fo,{})},{path:"*",element:e.jsx(So,{})},{path:"",element:e.jsx(bn,{}),errorElement:e.jsx(Ni,{}),children:[]},{path:"/apps/android",element:e.jsx(Bf,{})}]},{element:e.jsx(un,{isProtected:!0}),children:[{path:Ae.signUp,element:e.jsx(wo,{})},{path:"/update-email",element:e.jsx(Eo,{})},{path:"/settings",element:e.jsx(Ao,{})},{path:Ae.profile,element:e.jsx(_o,{})},{path:"/user-not-found",element:e.jsx(jo,{})},{path:"/my-characters",element:e.jsx(ke,{element:e.jsx(ir,{}),permission:Oe.view_my_chat_bots,fallbackPath:"/accessDenied"})},{path:"/my-chatbots",element:e.jsx(ke,{element:e.jsx(ir,{}),permission:Oe.view_my_chat_bots,fallbackPath:"/accessDenied"})},{path:"/my-chatbots/drafts",element:e.jsx(ke,{element:e.jsx(Yg,{}),permission:Oe.view_my_chat_bots,fallbackPath:"/accessDenied"})},{path:Ae.personas,element:e.jsx(ke,{element:e.jsx(og,{}),permission:Oe.view_chat,fallbackPath:"/accessDenied"})},{path:Ae.createPersona,element:e.jsx(ke,{element:e.jsx(ng,{}),permission:Oe.view_chat,fallbackPath:"/accessDenied"})},{path:"/personas/edit/:personaId",element:e.jsx(ke,{element:e.jsx(rg,{}),permission:Oe.view_chat,fallbackPath:"/accessDenied"})},{path:Ae.favoriteBots,element:e.jsx(ke,{element:e.jsx(eo,{}),permission:Oe.view_chat,fallbackPath:"/accessDenied"})},{path:"/character/create",element:e.jsx(ke,{element:e.jsx(hr,{}),permission:Oe.create_character,fallbackPath:"/accessDenied"})},{path:"/chatbot/create",element:e.jsx(ke,{element:e.jsx(hr,{}),permission:Oe.create_character,fallbackPath:"/accessDenied"})},{path:"/character/edit/:characterId",element:e.jsx(ke,{element:e.jsx(rr,{}),permission:Oe.create_character,fallbackPath:"/accessDenied"})},{path:"/chatbot/edit/:characterId",element:e.jsx(ke,{element:e.jsx(rr,{}),permission:Oe.create_character,fallbackPath:"/accessDenied"})},{path:"/chatbot/:characterId",element:e.jsx(io,{})},{path:"/link/subscribestar/:transientId",element:e.jsx(xr,{})},{path:"/link/subscribestar",element:e.jsx(xr,{})},{path:Ae.report,element:e.jsx(ke,{element:e.jsx(pr,{}),permission:Oe.report_character,fallbackPath:"/accessDenied"})},{path:"".concat(Ae.report,"/:characterId"),element:e.jsx(ke,{element:e.jsx(pr,{}),permission:Oe.report_character,fallbackPath:"/accessDenied"})},{path:"/welcome",element:e.jsx(To,{})}]}]}]),Ij=()=>{const{permissions:t,userId:s}=he(),{isLoading:n}=Qe();r.useEffect(()=>{n||s&&fx(Tc,s)},[n,s]);const{message:a,type:d,duration:o}=Pc(c=>c.notification),i=t!=null&&t.includes(Mr.restriction_complete)||t!=null&&t.includes(Mr.restriction_temporary)?Ac([{path:"*",element:e.jsx(Pd,{})}]):Tj;return e.jsxs(zp,{children:[e.jsx(Zp,{message:a,type:d,duration:o}),e.jsxs(jx,{router:i,fallbackElement:e.jsx(Aj,{}),children:[e.jsx(bn,{}),e.jsx(mu,{})]})]})};var Ma={VITE_KINDE_CLIENT_ID:"fb5754f42ee84f4787f9bd8ff49cac7a",VITE_KINDE_DOMAIN:"https://gamma.kinde.com",VITE_KINDE_USE_LOCAL_STORAGE:"true",VITE_TRACKJS_TOKEN:"b09ab090b6ea48d18b12799bec0484f7",VITE_TRACKJS_APPLICATION:"spicychat-prod",VITE_LOGROCKET_STAGING:"bxawyo/nextday"};location.host.indexOf("localhost")!==0&&bx.install({token:Ma.VITE_TRACKJS_TOKEN,application:Ma.VITE_TRACKJS_APPLICATION,network:{enabled:!1}});location.host.indexOf("staging")!==-1&&In(()=>import("./build.umd-CtN2yqbk.js").then(t=>t.b),__vite__mapDeps([5,1,2])).then(t=>{t.default.init(Ma.VITE_LOGROCKET_STAGING),yx(t.default),window.LogRocket=t.default}).catch(t=>{console.error("Failed to load LogRocket:",t)});_x.init({code:"GTM-NCBJ3WJ9",debug:!1,performance:!0});vx.createRoot(document.getElementById("root")).render(e.jsx(Nx,{clientId:Ma.VITE_KINDE_CLIENT_ID,domain:Ma.VITE_KINDE_DOMAIN,logoutUri:window.location.origin,redirectUri:window.location.origin,isDangerouslyUseLocalStorage:Ma.VITE_KINDE_USE_LOCAL_STORAGE==="true",onRedirectCallback:(t,s)=>{localStorage.getItem(Xl)==="true"?(localStorage.setItem(Xl,"false"),window.location=(s==null?void 0:s.kindeOriginUrl)||"/"):s!=null&&s.redirectTo&&(window.location=s==null?void 0:s.redirectTo)},children:e.jsx(Cx,{store:Fd,children:e.jsx(Ij,{className:"dark bg-background text-foreground"})})}));window.mainJSLoaded=!0;export{Rj as __vite_legacy_guard};
//# sourceMappingURL=https://sourcemaps.nd-api.com/index-BxxWAzO5.js.map
